(function(){"use strict";var e={1469:function(e,t,n){var a=n(1357),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editor",attrs:{id:"editor"}},[n("EntryDisplay")],1)},i=[],r=n(463),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.state.entry.dictConfigs&&e.state.entry.dictConfigs.xemplate?n("div",[n("ComponentGeneratorComponent",{attrs:{children:e.preparedDataForEntry,content:e.dataStructure},on:{input:e.handleContentUpdate}})],1):e._e()},o=[],m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.renderedChildren,(function(t){return n("ul",{key:t.name},[e.useExampleEngine(t.name)?n("CorpusComponent",{attrs:{"element-name":t.name},on:{save:function(n){return e.saveFromCorpus(t,n)}}}):e._e(),e._l(t.children,(function(t){return n(t.componentName,e._b({key:t.props.key,ref:t.props.elementName+t.props.editorChildNumber,refInFor:!0,tag:"component",class:{"is-attribute":t.props.isAttribute},staticStyle:{display:"list-item"},on:{input:e.handleChildUpdate,"create-element":e.createElement,"move-element":e.moveElement,"delete-element":e.deleteElement,"clone-element":e.createElement}},"component",t.props,!1))}))],2)})),0)},c=[],d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isAnyCorpusAvailable?n("div",{staticClass:"corpus-managers"},[n("div",{ref:"corpusManagers",staticClass:"dropdown",on:{click:e.openCorpuses}},[n("button",{class:{active:e.show}},[e.numberOfCorpuses>1?n("i",{staticClass:"material-icons right"},[e._v("arrow_drop_down")]):e._e(),n("p",[e._v("Corpus search")])]),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[e.kontextEnabled?n("button",{staticClass:"tertiary",on:{click:e.openKontext}},[e._v("KonText")]):e._e(),e.isSkeAvailable&1===e.numberOfSkeCorpuses?n("button",{staticClass:"tertiary",on:{click:e.openSketchEngine}},[e._v("Sketch Engine")]):e._e(),e.numberOfSkeCorpuses>1&&e.skeXamplEnabled?n("button",{staticClass:"tertiary",on:{click:function(t){return e.openSketchEngine("xampl")}}},[e._v("Ske - Examples")]):e._e(),e.numberOfSkeCorpuses>1&&e.skeCollxEnabled?n("button",{staticClass:"tertiary",on:{click:function(t){return e.openSketchEngine("collx")}}},[e._v("Ske - Collocations")]):e._e(),e.numberOfSkeCorpuses>1&&e.skeDefoEnabled?n("button",{staticClass:"tertiary",on:{click:function(t){return e.openSketchEngine("defo")}}},[e._v("Ske - Definitions")]):e._e(),e.numberOfSkeCorpuses>1&&e.skeThesEnabled?n("button",{staticClass:"tertiary",on:{click:function(t){return e.openSketchEngine("thes")}}},[e._v("Ske - Thesauruses")]):e._e()])]),n("KontextDisplay",{on:{save:function(t){return e.$emit("save",t)}},model:{value:e.showKontext,callback:function(t){e.showKontext=t},expression:"showKontext"}}),n("SkeDisplay",{attrs:{"search-type":e.skeSearchType},on:{save:function(t){return e.$emit("save",t)}},model:{value:e.showSke,callback:function(t){e.showSke=t},expression:"showSke"}})],1):e._e()},u=[],p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("PopupDisplay",{attrs:{"z-index":"10",value:e.value},on:{input:function(t){return e.$emit("input",t)}}},[n("h2",[e._v("Kontext search engine")]),n("div",{staticClass:"search-box"},[n("div",{staticClass:"switch type-toggle"},[n("label",[e._v(" Headword "),n("input",{ref:"searchTypeToggle",attrs:{type:"checkbox"}}),n("span",{staticClass:"lever"}),e._v(" CQL ")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],attrs:{placeholder:"Headword",type:"text"},domProps:{value:e.searchTerm},on:{input:function(t){t.target.composing||(e.searchTerm=t.target.value)}}}),n("button",{on:{click:function(t){return e.getExamples(1)}}},[e._v("Search")])]),e.error?n("div",[e._v(" "+e._s(e.errorMessage)+" ")]):n("div",{staticClass:"examples"},e._l(e.examples,(function(t,a){return n("div",{key:t.text,staticClass:"example",on:{click:function(t){return e.toggleCheck(a)}}},[n("input",{attrs:{type:"checkbox"},domProps:{checked:t.checked}}),n("span",{staticClass:"text--xs",staticStyle:{"font-size":"12px","line-height":"16px"},domProps:{innerHTML:e._s(t.text)}})])})),0),n("div",{staticClass:"navigation"},[e.showPreviousButton?n("button",{staticClass:"tertiary",on:{click:function(t){return e.getExamples(e.pagination.prevPage)}}},[e._v("Previous")]):e._e(),e.showNextButton?n("button",{staticClass:"tertiary",on:{click:function(t){return e.getExamples(e.pagination.nextPage)}}},[e._v("Next")]):e._e()]),n("div",{staticClass:"actions"},[n("button",{on:{click:function(t){return e.$emit("input",!1)}}},[e._v("Cancel")]),n("button",{attrs:{disabled:!e.isAnyExampleChecked},on:{click:e.saveSelectedExamples}},[e._v("Save "+e._s(e.examples.filter((function(e){return e.checked})).length||"")+" ")])])])},h=[],f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return!e.keepAlive&&e.value?n("div",{ref:"wrapper",staticClass:"modal",style:e.computedStyles,on:{click:e.maybeClosePopup}},[n("div",{ref:"modalContent",staticClass:"modal-content"},[n("span",{staticClass:"close",on:{click:e.closePopup}},[e._v("×")]),e._t("default")],2)]):e.keepAlive?n("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],ref:"wrapper",staticClass:"modal",style:e.computedStyles,on:{click:e.maybeClosePopup}},[n("div",{ref:"modalContent",staticClass:"modal-content"},[n("span",{staticClass:"close",on:{click:e.closePopup}},[e._v("×")]),e._t("default")],2)]):e._e()},g=[],v={name:"PopupDisplayComponent",inject:["$validator"],props:{value:{type:Boolean,required:!0},zIndex:{type:String,default:"2"},keepAlive:{type:Boolean,default:!1}},watch:{value:{handler(e){e&&(this.popupId||(this.popupId=Math.random()),this.state.openedPopups.push(this.popupId),document.addEventListener("keydown",this.handleEscKey))},immediate:!0}},computed:{computedStyles(){return{zIndex:this.zIndex}}},data(){return{popupId:null}},methods:{maybeClosePopup(e){e.target===this.$refs.wrapper&&this.closePopup()},closePopup(){this.$emit("input",!1)},handleEscKey(e){"Escape"===e.key&&this.$nextTick((()=>{this.state.openedPopups[this.state.openedPopups.length-1]===this.popupId&&(document.removeEventListener("keydown",this.handleEscKey),this.closePopup(),this.state.openedPopups.pop())}))}}},y=v,C=n(1001),b=(0,C.Z)(y,f,g,!1,null,"79ba3890",null),x=b.exports,E=n(6166),N=n.n(E),w={name:"KontextDisplay",components:{PopupDisplay:x},props:{value:{type:Boolean,required:!0},zIndex:{type:String,default:"2"}},watch:{"state.headwordData":{handler(e){this.searchTerm=e},immediate:!0}},computed:{isAnyExampleChecked(){return this.examples.filter((e=>e.checked)).length>0}},data(){return{searchTerm:"",examples:[],error:!1,errorMessage:"",showPreviousButton:!1,showNextButton:!1,pagination:{}}},methods:{saveSelectedExamples(){let e=this.examples.filter((e=>e.checked));this.$emit("save",{type:"kontext",elements:e}),this.$emit("input",!1)},toggleCheck(e){this.examples[e].checked=!this.examples[e].checked},getExamples(e){let t=`${window.location.origin}/${this.state.entry.dictId}/kontext/conc/`,n=this.$refs.searchTypeToggle.checked?"kontextcql":"kontextsimple";N().get(t,{params:{querytype:n,query:this.searchTerm,fromp:e}}).then((e=>{if(e.data.error&&"Empty result"===e.data.error||e.data.Lines&&0===e.data.Lines.length)this.error=!0,this.errorMessage="No results found.";else if(e.data.Lines){let o=e.data.Lines;this.error=!1,this.showPreviousButton=!!e.data.pagination.prevPage,this.showNextButton=!!e.data.pagination.nextPage,this.pagination=e.data.pagination,this.examples=[];for(var t=0;t<o.length;t++){for(var n=o[t],a="",s=0;s<n.Left.length;s++)a+=n.Left[s].str;a=a.replace(/<[^<>]+>/g,"");var i="";for(s=0;s<n.Kwic.length;s++)i+=n.Kwic[s].str;i=i.replace(/<[^<>]+>/g,"");var r="";for(s=0;s<n.Right.length;s++)r+=n.Right[s].str;r=r.replace(/<[^<>]+>/g,"");var l=a+"<b>"+i+"</b>"+r;l=l.replace("<b> "," <b>"),l=l.replace(" </b>","</b> "),this.examples.push({checked:!1,text:l,left:a,headword:i,right:r})}}else this.error=!0,this.errorMessage="There has been an error getting data from KonText."}))}}},k=w,_=(0,C.Z)(k,p,h,!1,null,"5b34d9b8",null),O=_.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("PopupDisplay",{attrs:{"z-index":"10",value:e.value},on:{input:function(t){return e.$emit("input",t)}}},[n("h2",[e._v("Sketch Engine:"+e._s(e.displayedType)+" search")]),n("div",{staticClass:"search-box"},["xampl"===e.searchType?n("div",{staticClass:"switch type-toggle"},[n("label",[e._v(" Headword "),n("input",{ref:"searchTypeToggle",attrs:{type:"checkbox"}}),n("span",{staticClass:"lever"}),e._v(" CQL ")])]):e._e(),n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],attrs:{placeholder:"Headword",type:"text"},domProps:{value:e.searchTerm},on:{input:function(t){t.target.composing||(e.searchTerm=t.target.value)}}}),n("button",{on:{click:function(t){return e.getExamples(1)}}},[e._v("Search")])]),e.error?n("div",[e._v(" "+e._s(e.errorMessage)+" ")]):n("div",{staticClass:"examples"},e._l(e.examples,(function(t,a){return n("div",{key:t.text+a,staticClass:"example",on:{click:function(t){return e.toggleCheck(a)}}},[n("input",{attrs:{type:"checkbox"},domProps:{checked:t.checked}}),n("span",{staticClass:"text--xs",staticStyle:{"font-size":"12px","line-height":"16px"},domProps:{innerHTML:e._s(t.text)}})])})),0),n("div",{staticClass:"navigation"},[e.showPreviousButton?n("button",{staticClass:"tertiary",on:{click:function(t){return e.getExamples(e.pagination.prevPage)}}},[e._v("Previous")]):e._e(),e.showNextButton?n("button",{staticClass:"tertiary",on:{click:function(t){return e.getExamples(e.pagination.nextPage)}}},[e._v("Next")]):e._e()]),n("div",{staticClass:"actions"},[n("button",{on:{click:function(t){return e.$emit("input",!1)}}},[e._v("Cancel")]),n("button",{attrs:{disabled:!e.isAnyExampleChecked},on:{click:e.saveSelectedExamples}},[e._v("Save "+e._s(e.examples.filter((function(e){return e.checked})).length||"")+" ")])])])},D=[],P={name:"SkeDisplay",components:{PopupDisplay:x},props:{value:{type:Boolean,required:!0},zIndex:{type:String,default:"2"},searchType:{type:String}},watch:{"state.headwordData":{handler(e){this.searchTerm=e},immediate:!0}},computed:{isAnyExampleChecked(){return this.examples.filter((e=>e.checked)).length>0},displayedType(){switch(this.searchType){case"xampl":return" Examples";case"collx":return" Collocations";case"thes":return" Thesaurus";case"defo":return" Definitions";default:return""}}},data(){return{searchTerm:"",examples:[],error:!1,errorMessage:"",showPreviousButton:!1,showNextButton:!1,pagination:{}}},methods:{saveSelectedExamples(){let e=this.examples.filter((e=>e.checked));this.$emit("save",{type:this.searchType,elements:e}),this.$emit("input",!1)},toggleCheck(e){this.examples[e].checked=!this.examples[e].checked},getExamples(e){let t=this.state.entry.dictConfigs.kex,n=`${window.location.origin}/${this.state.entry.dictId}/skeget/${this.searchType}/`,a=this.$refs.searchTypeToggle&&this.$refs.searchTypeToggle.checked?"skecql":"skesimple",s={url:t.apiurl,corpus:t.corpus,username:this.state.entry.userInfo.ske_username,apikey:this.state.entry.userInfo.ske_apiKey,querytype:a,fromp:e};switch(this.searchType){case"xampl":s.query=this.searchTerm;break;case"collx":case"thes":case"defo":s.lemma=this.searchTerm;break}N().get(n,{params:s}).then((e=>{switch((e.data.error&&"Empty result"===e.data.error||e.data.Lines&&0===e.data.Lines.length)&&(this.error=!0,this.errorMessage="No results found."),this.examples=[],this.searchType){case"xampl":this.prepareExamples(e.data);break;case"collx":this.prepareCollocations(e.data);break;case"thes":this.prepareThesaurus(e.data);break;case"defo":this.prepareDefinitions(e.data);break}})).catch((e=>{alert("Something went wrong with SketchEngine, make sure your credentials are correct. "+e.message)}))},prepareThesaurus(e){if(e.Words){let t=e.Words;this.error=!1,this.showPreviousButton=!!e.prevlink,this.showNextButton=!!e.nextlink,this.pagination={prevPage:e.prevLink,nextPage:e.nextLink},this.examples=[];for(let e=0;e<t.length;e++){let n=t[e],a=n.word;this.examples.push({checked:!1,text:a})}}else this.error=!0,this.errorMessage="There has been an error getting data from KonText."},prepareCollocations(e){if(e.Items){let t=e.Items;this.error=!1,this.showPreviousButton=!!e.prevlink,this.showNextButton=!!e.nextlink,this.pagination={prevPage:e.prevLink,nextPage:e.nextLink},this.examples=[];for(let e=0;e<t.length;e++){let n=t[e],a=n.word;this.examples.push({checked:!1,text:a})}}else this.error=!0,this.errorMessage="There has been an error getting data from KonText."},prepareExamples(e){if(e.Lines){let t=e.Lines;this.error=!1,this.showPreviousButton=!!e.prevlink,this.showNextButton=!!e.nextlink,this.pagination={prevPage:e.prevLink,nextPage:e.nextLink},this.examples=[];for(let e=0;e<t.length;e++){let n=t[e],a="";for(let e=0;e<n.Left.length;e++)a+=n.Left[e].str;a=a.replace(/<[^<>]+>/g,"");let s="";for(let e=0;e<n.Kwic.length;e++)s+=n.Kwic[e].str;s=s.replace(/<[^<>]+>/g,"");let i="";for(let e=0;e<n.Right.length;e++)i+=n.Right[e].str;i=i.replace(/<[^<>]+>/g,"");let r=a+"<b>"+s+"</b>"+i;r=r.replace("<b> "," <b>"),r=r.replace(" </b>","</b> "),this.examples.push({checked:!1,text:r,left:a,headword:s,right:i})}}else this.error=!0,this.errorMessage="There has been an error getting data from KonText."},prepareDefinitions(e){if(e.Lines){let t=e.Lines;this.error=!1,this.showPreviousButton=!!e.prevlink,this.showNextButton=!!e.nextlink,this.pagination={prevPage:e.prevLink,nextPage:e.nextLink},this.examples=[];for(let e=0;e<t.length;e++){let n=t[e],a="";for(let e=0;e<n.Left.length;e++)a+=n.Left[e].str;a=a.replace(/<[^<>]+>/g,"");let s="";for(let e=0;e<n.Kwic.length;e++)s+=n.Kwic[e].str;s=s.replace(/<[^<>]+>/g,"");let i="";for(let e=0;e<n.Right.length;e++)i+=n.Right[e].str;i=i.replace(/<[^<>]+>/g,"");let r=a+"<b>"+s+"</b>"+i;r=r.replace("<b> "," <b>"),r=r.replace(" </b>","</b> "),this.examples.push({checked:!1,text:r})}}else this.error=!0,this.errorMessage="There has been an error getting data from KonText."}}},T=P,A=(0,C.Z)(T,S,D,!1,null,"3e9b4738",null),$=A.exports,I={name:"CorpusComponent",components:{SkeDisplay:$,KontextDisplay:O},props:{elementName:{type:String,required:!0}},computed:{isAnyCorpusAvailable(){return this.kontextEnabled||this.isSkeAvailable},skeConfig(){return this.state.entry.dictConfigs.kex},isSkeConfigValid(){return!!(this.skeConfig.corpus&&this.skeConfig.apiurl&&this.skeConfig.url)},isSkeAvailable(){return this.skeXamplEnabled||this.skeCollxEnabled||this.skeThesEnabled||this.skeDefoEnabled},skeXamplEnabled(){let e=this.state.entry.dictConfigs.xampl;return!!(this.isSkeConfigValid&&e.container&&e.container===this.elementName&&e.markup)},skeCollxEnabled(){let e=this.state.entry.dictConfigs.collx;return!(!this.isSkeConfigValid||!e.container||e.container!==this.elementName)},skeThesEnabled(){let e=this.state.entry.dictConfigs.thes;return!(!this.isSkeConfigValid||!e.container||e.container!==this.elementName)},skeDefoEnabled(){let e=this.state.entry.dictConfigs.defo;return!(!this.isSkeConfigValid||!e.container||e.container!==this.elementName)},kontextEnabled(){let e=this.state.entry.dictConfigs.kontext;return!!(e.container&&e.container===this.elementName&&e.markup&&e.url)},numberOfCorpuses(){return[this.kontextEnabled,this.skeDefoEnabled,this.skeThesEnabled,this.skeCollxEnabled,this.skeXamplEnabled].filter((e=>!0===e)).length},numberOfSkeCorpuses(){return[this.skeDefoEnabled,this.skeThesEnabled,this.skeCollxEnabled,this.skeXamplEnabled].filter((e=>!0===e)).length}},watch:{show(e){e?window.addEventListener("click",this.watchForOutsideClick):window.removeEventListener("click",this.watchForOutsideClick)}},data(){return{show:!1,showKontext:!1,showSke:!1,skeSearchType:"xampl"}},methods:{toggleShow(){this.show=!this.show},openCorpuses(){1===this.numberOfCorpuses?this.kontextEnabled?this.openKontext():this.isSkeAvailable&&this.openSketchEngine():this.toggleShow()},openKontext(){this.showKontext=!0},openSketchEngine(e=null){this.skeXamplEnabled&&(this.skeSearchType="xampl"),this.skeCollxEnabled&&(this.skeSearchType="collx"),this.skeThesEnabled&&(this.skeSearchType="thes"),this.skeDefoEnabled&&(this.skeSearchType="defo"),e&&(this.skeSearchType=e),this.showSke=!0},watchForOutsideClick(e){this.$refs.corpusManagers&&!this.$refs.corpusManagers.contains(e.target)&&this.toggleShow()}}},j=I,R=(0,C.Z)(j,d,u,!1,null,"3276fe69",null),L=R.exports,B={methods:{saveFromCorpus(e,t){switch(t.type){case"kontext":this.saveFromKontext(e,t.elements);break;case"collx":case"thes":this.saveSingleWord(e,t.elements);break;case"defo":this.saveDefinitions(e,t.elements);break;case"xampl":this.saveSkeExamples(e,t.elements);break}},saveFromKontext(e,t){for(const n of t){let t=this.createElementTemplate(e.name)[0],a=this.createElementTemplate(this.state.entry.dictConfigs.kontext.markup)[0];a.elements=[{type:"text",text:n.headword}],t.elements=[{type:"text",text:n.left},a,{type:"text",text:n.right}],this.createElement({name:e.name,content:t})}},saveDefinitions(e,t){console.log("saveDefinitions",e,t)},saveSingleWord(e,t){for(const n of t){let t=this.createElementTemplate(e.name)[0];t.elements=[{type:"text",text:n.text}],this.createElement({name:e.name,content:t})}},saveSkeExamples(e,t){for(const n of t){let t=this.createElementTemplate(e.name)[0],a=this.createElementTemplate(this.state.entry.dictConfigs.xampl.markup)[0];a.elements=[{type:"text",text:n.headword}],t.elements=[{type:"text",text:n.left},a,{type:"text",text:n.right}],this.createElement({name:e.name,content:t})}}}},V={name:"ComponentGeneratorComponent",inject:["$validator"],components:{CorpusComponent:L},props:{children:Array,elementName:String,content:{type:[Object,Array],required:!0},forceReadOnlyElements:{type:Boolean,default:!1},maxDisplayedChildren:{type:Number,default:-1}},mixins:[B],data(){return{displayTypeToComponentMap:{popup:"PopupComponent",inline:"InlineComponent","read-only":"ReadOnlyComponent","text-input":"TextInputComponent",dropdown:"DropdownComponent",media:"MediaComponent"},renderedChildren:[],numberOfRenderedChildren:0,actualContent:{}}},watch:{content:{handler(e){this.updateContentInChildren(e)},deep:!0}},created(){this.loadNewData(this.content)},methods:{useExampleEngine(){return!this.forceReadOnlyElements},getEncompassingStyles(e){let t=this.state.entry.dictConfigs.xemplate[e].gutter,n="none";switch(t){case"disk":n="disc";break;case"square":n="square";break;case"diamond":case"arrow":case"handing":break;case"indent":return{marginLeft:"40px"};case"sensenum0":n="upper-roman";break;case"sensenum1":n="decimal";break;case"sensenum2":n="lower-alpha";break;case"sensenum3":n="lower-roman";break}return{listStyleType:n,listStylePosition:"inside",textAlign:"left"}},updateContentInChildren(e){if(e&&(e.elements||e.attributes))for(let t of this.renderedChildren){let n;if(t.children[0].props.isAttribute?e.attributes&&(n=[{type:"attribute",name:t.name,text:e.attributes[t.name]}]):e.elements&&(n=e.elements.filter((e=>e.name===t.name))),n.length!==t.children.length)return void this.loadNewData(e);let a=[];for(let e in t.children){let s,i=t.children[e],r=this.$refs[i.props.elementName+i.props.editorChildNumber],l=r&&r[0]||null;s=n.length!==t.children.length?n.find((e=>e._index===i.props.editorChildNumber)):n[i.props.editorChildNumber],l&&s&&l.updateContent(s),l&&!s&&a.push(Number(e))}if(a.length>0){while(a.length>0){let e=a.pop();t.children.splice(e,1)}t.children.forEach(((e,t)=>{e.props.editorChildNumber=t}))}}},loadNewData(e){if(this.renderedChildren=[],this.numberOfRenderedChildren=0,this.children)for(const t of this.children){if(this.numberOfRenderedChildren===this.maxDisplayedChildren)break;let n=t.name,a=this.getElementData(n,this.elementName,t.isAttribute);this.state.entry.dictConfigs.xemplate[n]=a;let s=this.getComponentFromElementName(n,t.isAttribute),i=[{}];if(t.isAttribute){let t=e.attributes&&e.attributes[n];i=[{type:"attribute",name:n,text:t}]}else Array.isArray(e&&e.elements)&&(i=e.elements.filter((e=>e.name===n)),0===i.length&&(i=[{}]));let r=[];if(Array.isArray(i))for(const e in i){const l=i[e];if(r.push({componentName:s,props:{elementName:n,children:this.getElementChildren(n,l),content:l,elementData:a,editorChildNumber:Number(e),parentElementName:this.elementName,numberOfElements:i.length,isAttribute:t.isAttribute,forceReadOnlyElements:this.forceReadOnlyElements,key:Math.random()}}),this.numberOfRenderedChildren++,this.numberOfRenderedChildren===this.maxDisplayedChildren)break}else if(r.push({componentName:s,props:{elementName:n,children:this.getElementChildren(n,i),content:i,elementData:a,editorChildNumber:0,parentElementName:this.elementName,numberOfElements:i.length,isAttribute:t.isAttribute,forceReadOnlyElements:this.forceReadOnlyElements,key:Math.random()}}),this.numberOfRenderedChildren++,this.numberOfRenderedChildren===this.maxDisplayedChildren)break;this.renderedChildren.push({name:n,children:r})}},createElementTemplate(e){return(0,r.xml2js)(`<${e}></${e}>`,this.state.xml2jsConfig).elements},getElementChildren(e,t){let n=this.state.entry.dictConfigs.xema.elements[e],a=n&&n.children;if(n&&Object.keys(n.attributes||{}).length>0){let e=Object.keys(n.attributes).map((e=>({name:e,isAttribute:!0})));a=e.concat(a)}if(t.elements){let e=t.elements.filter((e=>!!e.name)),s=e.map((e=>e.name)).filter(((e,t,n)=>n.indexOf(e)===t)).length;if(!n||s!==(n.children&&n.children.length)){let t=[];e&&(t=e.map((e=>({min:1,max:1,name:e.name})))),a=a||[];for(const e of t)a.find((t=>t.name===e.name))||a.push(e)}}return a},getElementData(e,t,n){let a,s=this.state.entry.dictConfigs.xemplate;return a=n?s[t].attributes&&s[t].attributes[e]:s[e],a?("shown"in a||(a.shown=!0),"displayType"in a||(a.displayType="inline"),"valueRenderType"in a||(a.valueRenderType="text-input")):a={shown:!0,displayType:"inline",valueRenderType:"text-input"},a},handleChildUpdate(e){let t=Object.assign({},this.content);if(e.isAttribute)return t.attributes={...t.attributes,...e.content},this.$emit("input",{content:t}),!0;if(t.elements){if(!t.elements.find((t=>t.name===e.elementName)))return t.elements.push(e.content),void this.$emit("input",{content:t})}else t.elements=this.createElementTemplate(e.elementName);let n=0,a=!1;for(const s in t.elements)if(t.elements[s].name===e.elementName){if(n===e.editorChildNumber){a=!0,t.elements[s]=e.content;break}n++}a||this.appendElementAfterSameNameSiblings(e.elementName,t,e.content),this.$emit("input",{content:t})},getComponentFromElementName(e,t,n){if(this.forceReadOnlyElements)return this.displayTypeToComponentMap["inline"];let a,s=this.state.entry.dictConfigs.xemplate;a=n?s[t].attributes&&s[t].attributes[e]:s[e];let i=a&&a.displayType||"inline";return this.displayTypeToComponentMap[i]},appendElementAfterSameNameSiblings(e,t,n){let a=t.elements||[],s=a.map((e=>e.name)).lastIndexOf(e);s>=0?a.splice(s+1,0,n):a.push(n),t.elements=a,this.loadNewData(t)},createElement(e){let t=this.content.elements.filter((t=>t.name===e.name)).length;this.handleChildUpdate({elementName:e.name,editorChildNumber:t,content:e.content||this.createElementTemplate(e.name)[0]})},moveElement({name:e,direction:t,position:n}){let a=this.content.elements||[];if(!this.isNewPositionInBounds(a,e,n,t))return;let s=this.getPositionOfElementInContent(e,n,this.content);var i=a[s];a.splice(s,1),a.splice(s+t,0,i);let r=Object.assign({},this.content);r.elements=a,this.loadNewData(r),this.$emit("input",{content:r})},deleteElement({name:e,position:t}){let n=this.content.elements||[],a=0,s=-1;for(const r in n)n[r].name===e&&(n[r]._index=a,a===t&&(s=r),a++);if(-1===s)return;n.splice(s,1);let i=Object.assign({},this.content);i.elements=n,this.$emit("input",{content:i})},isNewPositionInBounds(e,t,n,a){let s=n+a,i=e.filter((e=>e.name===t)).length;return s>=0&&s<i},getPositionOfElementInContent(e,t,n){let a,s=n.elements,i=0;for(const r in s)if(s[r].name===e){if(i===t){a=r;break}i++}return Number(a)}}},F=V,K=(0,C.Z)(F,m,c,!1,null,"c0e910fe",null),Z=K.exports,U={name:"EntryDisplay",components:{ComponentGeneratorComponent:Z},watch:{dirty(e){try{e?Screenful.Editor.changed():Screenful.Editor.resetChanged()}catch(t){console.error(t)}}},computed:{preparedDataForEntry(){if(!this.state.entry.dictConfigs)return[];const e=this.state.entry.content;let t=e.elements&&e.elements[0]&&e.elements[0].name||this.state.entry.dictConfigs.xema.root;return[{max:1,min:1,name:t}]}},data(){return{dataStructure:{},dirty:!1}},created(){this.dataStructure=this.state.entry.content,window.harvestGraphicalEditorData=this.getXmlData,this.setHeadwordElement()},methods:{setHeadwordElement(){let e=this.state.entry.dictConfigs,t=e.titling;if(t&&t.headword)return void(this.state.headwordElement=t.headword);let n=e.xema.root;if(n){let t=e.xema.elements[n];t&&t.children&&t.children.length>0&&(this.state.headwordElement=t.children[0].name)}},handleContentUpdate(e){this.dataStructure=e.content,this.dirty=this.areAnyChanges()},areAnyChanges(){let e=this.createDeepCopy();this.fixElementNames(e);let t=(0,r.js2xml)(e,this.state.xml2jsConfig),n=(0,r.js2xml)(this.state._initialContent,this.state.xml2jsConfig);return n!=t},getXmlData(){return this.$validator.validateAll().then((e=>{if(e)return this.prepareXMLData();{let e=this.$validator.errors.items.map((e=>e.field)).join("\n");return!0===confirm(`Are you sure you want to save despite some elements missing? \n \n Missing fields: \n${e}`)?this.prepareXMLData():null}}))},prepareXMLData(){let e=this.createDeepCopy();delete e.declaration,this.fixElementNames(e);let t=(0,r.js2xml)(e,this.state.xml2jsConfig);return console.log(t),t},createDeepCopy(){let e=(0,r.js2xml)(this.dataStructure,this.state.xml2jsConfig);return(0,r.xml2js)(e,this.state.xml2jsConfig)},fixElementNames(e){if(e.name){let t=this.getStructureConfig(e.name);t&&t.elementName&&(e.name=t.elementName)}if(e.attributes)for(const t of Object.keys(e.attributes)){let n=this.getStructureConfig(t,e.name);n&&n.elementName&&(e.attributes[n.elementName]=e.attributes[t],delete e.attributes[t])}if(e.elements)for(const t of e.elements)this.fixElementNames(t)},getStructureConfig(e,t=null){let n=this.state.entry.dictConfigs.xema.elements;return n[e]?t?n[t].attributes[e]:n[e]||{}:{}}}},q=U,W=(0,C.Z)(q,l,o,!1,null,"30539e3d",null),G=W.exports,H=n(1386),z={name:"App",components:{EntryDisplay:G},props:{message:String},created(){let e=window.entryData;this.updateEntry(e),this.addDropdownValidator()},methods:{updateEntry(e){e&&(console.log(e.content),this.state._initialContent=(0,r.xml2js)(e.content||"",this.state.xml2jsConfig),e.content=(0,r.xml2js)(e.content||"",this.state.xml2jsConfig),this.changeElementNames(e.content,null,e.dictConfigs.xema),this.state.entry={...this.state.entry,...e})},changeElementNames(e,t=null,n){if(e.name&&(e.name=this.getFakeName(e.name,t,n)||e.name),e.attributes)for(const a of Object.keys(e.attributes)){let t=this.getFakeName(a,e.name,n);t&&t!==a&&(e.attributes[t]=e.attributes[a],delete e.attributes[a])}if(e.elements)for(const a of e.elements)this.changeElementNames(a,e.name,n)},getFakeName(e,t,n){if(n.root===e)return n.elements[e].name;if(!t)return console.error("No parent element"),e;let a=n.elements[t]&&n.elements[t].children||[];t&&(a=a.map((e=>e.name)));for(const[s,i]of Object.entries(n.elements))if(i.elementName===e&&a.includes(s))return s},addDropdownValidator(){H.cX.extend("requiredDropdown",{getMessage:e=>"The "+e+" value is required.",validate:e=>!("undefined"===typeof e||!e)})}}},X=z,J=(0,C.Z)(X,s,i,!1,null,null,null),Q=J.exports,Y={entry:{entryId:null,dictId:null,dictConfigs:null,userAccess:null,userInfo:null,editorConfig:null,content:{},contentHtml:null},xml2jsConfig:{compact:!1},_initialContent:null,headwordElement:null,headwordData:null,openedPopups:[]},ee={state:Y},te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"inline-component",class:{"read-only":e.forceReadOnlyElements},style:e.configStyles},[e.elementData.shown&&!e.readOnly?n("section",{staticClass:"content"},[e.isAttribute?e._e():n("ActionButtons",{staticClass:"actions-button",attrs:{elementName:e.elementName,elementEditorConfig:e.elementData,editorChildNumber:e.editorChildNumber,parentElementName:e.parentElementName,numberOfElements:e.numberOfElements},on:{"move-element-down":e.moveElementDown,"move-element-up":e.moveElementUp,"add-element":e.createSibling,"select-new-parent":e.selectNewParent,"clone-element":e.cloneElement,"remove-element":e.deleteElement}}),n(e.valueComponent,{tag:"component",staticClass:"value-display",attrs:{elementEditorConfig:e.elementData,elementName:e.elementName,elementData:e.elementData,content:e.componentData,children:e.children,isAttribute:e.isAttribute,parentElementName:e.parentElementName,forceReadOnly:e.forceReadOnlyElements},on:{"hide-children":e.hideChildren,input:e.handleValueUpdate}})],1):e._e(),e.elementData.shown&&e.readOnly?n("section",[n(e.valueComponent,{tag:"component",attrs:{elementEditorConfig:e.elementData,elementName:e.elementName,elementData:e.elementData,content:e.componentData,children:e.children,isAttribute:e.isAttribute,parentElementName:e.parentElementName,forceReadOnly:e.forceReadOnlyElements},on:{"hide-children":e.hideChildren,input:e.handleValueUpdate}})],1):e._e(),"TextInputWithMarkupComponent"!==e.valueComponent?n("ComponentGeneratorComponent",{attrs:{children:e.children,elementName:e.elementName,content:e.calculatedContent,forceReadOnlyElements:e.forceReadOnlyElements,maxDisplayedChildren:e.maxDisplayedChildren},on:{input:e.handleChildUpdate}}):e._e(),e.showSelectNewParent?n("SelectElementFromArray",{attrs:{"element-name":e.elementName,"possible-parent-elements":e.newPossibleParents,parentElementName:e.parentElementName},on:{"selected-element":e.handleSelectedNewParent},model:{value:e.showSelectNewParent,callback:function(t){e.showSelectNewParent=t},expression:"showSelectNewParent"}}):e._e()],1)},ne=[],ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isRootElement?e._e():n("div",{ref:"actionButton",staticClass:"dropdown"},[n("button",{staticClass:"button--sm secondary",attrs:{disabled:0===e.numberOfActions},on:{click:function(t){return t.stopPropagation(),e.toggleDropdown.apply(null,arguments)}}},[e._v(" "+e._s(e.computedElementName)+" ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"vue-dropdown-content"},[e.canMoveElementDown?n("button",{staticClass:"tertiary",on:{click:function(t){return e.triggerEvent("move-element-down")}}},[e._v(" Move "+e._s(e.computedElementName)+" "),n("img",{attrs:{src:e.iconUrl("arrow-down.svg")}})]):e._e(),e.canMoveElementUp?n("button",{staticClass:"tertiary",on:{click:function(t){return e.triggerEvent("move-element-up")}}},[e._v(" Move "+e._s(e.computedElementName)+" "),n("img",{attrs:{src:e.iconUrl("arrow-up.svg")}})]):e._e(),e.canAddElement&&e.elementEditorConfig.enableCopying?n("button",{staticClass:"tertiary",on:{click:function(t){return e.triggerEvent("select-new-parent")}}},[e._v(" Change parent of "+e._s(e.computedElementName)+" ")]):e._e(),e.canAddElement?n("button",{staticClass:"tertiary",on:{click:function(t){return e.triggerEvent("add-element")}}},[e._v(" Create new "+e._s(e.computedElementName)+" ")]):e._e(),e.canAddElement&&e.elementEditorConfig.enableCopying?n("button",{staticClass:"tertiary",on:{click:function(t){return e.triggerEvent("clone-element")}}},[e._v(" Duplicate "+e._s(e.computedElementName)+" ")]):e._e(),e.canRemoveElement?n("button",{staticClass:"tertiary",on:{click:function(t){return e.triggerEvent("remove-element")}}},[e._v(" Remove selected "+e._s(e.computedElementName)+" ")]):e._e()])])},se=[],ie={props:{isAttribute:{type:Boolean},parentElementName:{type:String}},computed:{computedElementNameWithColon(){if(this.elementData&&this.elementData.hideElementName)return"";const e=this.state.entry.dictConfigs.xema.elements;let t=e[this.elementName]&&e[this.elementName].elementName||this.elementName;if(this.isAttribute)try{let n=e[this.parentElementName].attributes[this.elementName].optionality;"obligatory"===n&&(t+="*")}catch(n){console.log("",t)}return t+=":",t},computedElementName(){if(this.elementData&&this.elementData.hideElementName)return"";const e=this.state.entry.dictConfigs.xema.elements;let t=e[this.elementName]&&e[this.elementName].elementName||this.elementName;if(this.isAttribute)try{let n=e[this.parentElementName].attributes[this.elementName].optionality;"obligatory"===n&&(t+="*")}catch(n){console.log("",t)}return t}}},re={methods:{iconUrl(e){return`${window.location.origin}/img/svg/${e}`}}},le={name:"ActionButtons",props:{elementName:String,elementEditorConfig:Object,parentElementName:String,numberOfElements:Number,editorChildNumber:Number},mixins:[ie,re],data(){return{show:!1}},computed:{isRootElement(){return this.elementName===this.state.entry.dictConfigs.xema.root},numberOfActions(){return[this.canAddElement,this.canRemoveElement,this.canMoveElementUp,this.canMoveElementDown].filter((e=>!0===e)).length},canAddElement(){const e=this.state.entry.dictConfigs.xema.elements;let t=e&&e[this.parentElementName]&&e[this.parentElementName].children||[],n=t.find((e=>e.name===this.elementName));return n&&(0===Number(n.max)||this.numberOfElements<Number(n.max))},canRemoveElement(){const e=this.state.entry.dictConfigs.xema.elements;let t=e&&e[this.parentElementName]&&e[this.parentElementName].children||[],n=t.find((e=>e.name===this.elementName));return n&&(!Number(n.min)||this.numberOfElements>Number(n.min))},canMoveElementDown(){return this.elementEditorConfig.enablePositionChange&&this.editorChildNumber<this.numberOfElements-1},canMoveElementUp(){return this.elementEditorConfig.enablePositionChange&&this.editorChildNumber>0}},watch:{show(e){e?window.addEventListener("click",this.watchForOutsideClick):window.removeEventListener("click",this.watchForOutsideClick)}},methods:{triggerEvent(e){this.toggleDropdown(),this.$nextTick((()=>{this.$emit(e)}))},toggleDropdown(){this.show=!this.show},watchForOutsideClick(e){this.$refs.actionButton&&!this.$refs.actionButton.contains(e.target)&&this.toggleDropdown()}}},oe=le,me=(0,C.Z)(oe,ae,se,!1,null,"3ad13598",null),ce=me.exports,de={data(){return{valueComponent:null}},created(){let e,t={chd:"ReadOnlyComponent",emp:"ReadOnlyComponent",txt:"TextInputComponent",lst:"DropdownComponent",med:"MediaComponent",inl:"TextInputWithMarkupComponent"};if(this.isAttribute){let t=this.state.entry.dictConfigs.xema.elements[this.parentElementName].attributes||{};e=t[this.elementName]}else e=this.state.entry.dictConfigs.xema.elements[this.elementName];if(e){let n=e.filling;this.valueComponent=t[n]}else console.error(`xema config doesn't exists for: ${this.elementName}`),this.valueComponent="TextInputComponent"}},ue={mixins:[de],computed:{configStyles(){let e={};for(const[t,n]of Object.entries(this.elementData))switch(t){case"border":e.border=`1px ${n} #B3D6FF`;break}if(!this.forceReadOnlyElements)return e},readOnly(){return this.elementData.readOnly||this.forceReadOnlyElements},componentData(){if("TextInputWithMarkupComponent"===this.valueComponent)return this.calculatedContent.elements||[];if(this.isAttribute)return this.calculatedContent||{type:"attribute",name:this.elementName,text:""};let e=this.calculatedContent.elements&&this.calculatedContent.elements.find((e=>"text"===e.type&&!e.name));return e||{text:"",type:"text"}},calculatedContent(){return this.updatedContent||this.content}},data(){return{showChildren:!0,updatedContent:null,isHeadword:!1,newPossibleParents:[],showSelectNewParent:!1}},created(){if(!this.forceReadOnlyElements&&(this.children&&this.children.length>0&&this.bus.$on("is-parent-to-element",this.handleIsParentToElement),this.state.headwordElement===this.elementName)){this.isHeadword=!0;try{this.state.headwordData=this.getHeadwordValue(this.content.elements)}catch(e){console.error(e)}}},beforeDestroy(){this.bus.$off("is-parent-to-element",this.handleIsParentToElement),this.bus.$off("possible-new-parent",this.handlePossibleNewParent),this.bus.$off("add-element-to-self",this.addElementToSelf)},methods:{getHeadwordValue(e){try{return e.find((e=>"text"===e.type)).text}catch(t){return console.error(t),""}},hideChildren(){this.showChildren=!1},createElementTemplate(e){return(0,r.xml2js)(`<${e}></${e}>`,this.state.xml2jsConfig).elements[0]},handleValueUpdate(e){if(this.isAttribute)return void this.$emit("input",{elementName:this.elementName,content:e.attributes,isAttribute:!0});this.isHeadword&&(this.state.headwordData=this.getHeadwordValue(e.elements));let t=Object.assign({},this.calculatedContent);0===Object.keys(t).length&&(t=this.createElementTemplate(this.elementName)),t.elements=e.elements,this.$emit("input",{elementName:this.elementName,editorChildNumber:this.editorChildNumber,content:t})},handleChildUpdate(e){let t={...this.calculatedContent,...e.content};this.$emit("input",{elementName:this.elementName,editorChildNumber:this.editorChildNumber,content:t})},updateContent(e){this.updatedContent=e},moveElementDown(){this.$emit("move-element",{name:this.elementName,direction:1,position:this.editorChildNumber})},moveElementUp(){this.$emit("move-element",{name:this.elementName,direction:-1,position:this.editorChildNumber})},createSibling(){this.$emit("create-element",{name:this.elementName})},deleteElement(){this.$emit("delete-element",{name:this.elementName,position:this.editorChildNumber})},cloneElement(){this.$emit("clone-element",{name:this.elementName,content:this.calculatedContent})},selectNewParent(){this.newPossibleParents=[],this.bus.$on("possible-new-parent",this.handlePossibleNewParent),this.bus.$emit("is-parent-to-element",{emitEvent:"possible-new-parent",elementName:this.elementName}),setTimeout((()=>{this.showSelectNewParent=!0}),50)},handleSelectedNewParent(e){this.bus.$emit("add-element-to-self",{name:e.props.elementName,editorChildNumber:e.props.content.editorChildNumber,content:this.calculatedContent}),this.deleteElement()},addElementToSelf(e){if(this.elementName===e.name&&this.editorChildNumber===e.editorChildNumber){let t=Object.assign({},e.content);delete t._index;let n=Object.assign({},this.calculatedContent);if(n.elements){if(!n.elements.find((e=>e.name===t.name)))return n.elements.push(t),this.updatedContent=n,void this.handleChildUpdate({content:n})}else n.elements=this.createElementTemplate(t.name);n=this.appendElementAfterSameNameSiblings(t.name,n,t),this.updatedContent=n,this.handleChildUpdate({content:n})}this.bus.$off("add-element-to-self",this.addElementToSelf)},handlePossibleNewParent(e){console.log(e),this.newPossibleParents.push(e.content)},handleIsParentToElement(e){this.children.find((t=>t.name===e.elementName))&&(this.bus.$emit(e.emitEvent,{content:{...this.calculatedContent,parentName:this.parentElementName,editorChildNumber:this.editorChildNumber}}),this.bus.$on("add-element-to-self",this.addElementToSelf))},appendElementAfterSameNameSiblings(e,t,n){let a=t.elements||[],s=a.map((e=>e.name)).lastIndexOf(e);return s>=0?a.splice(s+1,0,n):a.push(n),t.elements=a,t}}},pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("PopupDisplay",{attrs:{"z-index":e.zIndex,value:e.value},on:{input:function(t){return e.$emit("input",t)}}},[n("h2",[e._v("Move selected "+e._s(e.computedElementName)+" to:")]),n("div",{staticClass:"parents"},[n("ReadOnlyComponentGenerator",{attrs:{children:e.children,elementName:e.elementName,content:e.possibleParentElements},on:{"selected-element":e.handleSelectedElement}})],1),n("div",{staticClass:"actions"},[n("button",{on:{click:function(t){return e.$emit("input",!1)}}},[e._v("Cancel")])])])},he=[],fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.renderedChildren,(function(t){return n("section",{key:t.props.key,staticClass:"component drop-shadow--100",on:{click:function(n){return e.$emit("selected-element",t)}}},[n(t.componentName,e._b({ref:t.props.elementName+t.props.editorChildNumber,refInFor:!0,tag:"component",class:{"is-attribute":t.props.isAttribute},attrs:{forceReadOnlyElements:!0,"max-displayed-children":5}},"component",t.props,!1))],1)})),0)},ge=[],ve={name:"ReadOnlyComponentGenerator",props:{children:Array,elementName:String,content:{type:[Object,Array],required:!0}},data(){return{renderedChildren:[]}},watch:{content:{handler(e){this.loadNewData(e)},deep:!0}},created(){this.loadNewData(this.content)},methods:{loadNewData(e){this.renderedChildren=[],this.children&&e.forEach((e=>{let t=e.name,n=this.getElementData(t,e.parentName,e.isAttribute);n.hideElementName=!1;let a="InlineComponent",s=e;this.renderedChildren.push({componentName:a,props:{elementName:t,children:this.getElementChildren(t,s),content:s,elementData:n,editorChildNumber:0,parentElementName:this.elementName,numberOfElements:1,isAttribute:e.isAttribute,forceReadOnlyElements:this.forceReadOnlyElements,key:Math.random()}})}))},getElementChildren(e,t){let n=this.state.entry.dictConfigs.xema.elements[e],a=n&&n.children;if(n&&Object.keys(n.attributes||{}).length>0){let e=Object.keys(n.attributes).map((e=>({name:e,isAttribute:!0})));a=e.concat(a)}if(t.elements){let e=t.elements.filter((e=>!!e.name)),s=e.map((e=>e.name)).filter(((e,t,n)=>n.indexOf(e)===t)).length;if(!n||s!==(n.children&&n.children.length)){let t=[];e&&(t=e.map((e=>({min:1,max:1,name:e.name})))),a=a||[];for(const e of t)a.find((t=>t.name===e.name))||a.push(e)}}return a},getElementData(e,t,n){let a,s=this.state.entry.dictConfigs.xemplate;return a=n?s[t].attributes&&s[t].attributes[e]:s[e],a?("shown"in a||(a.shown=!0),"displayType"in a||(a.displayType="inline"),"valueRenderType"in a||(a.valueRenderType="text-input")):a={shown:!0,displayType:"inline",valueRenderType:"text-input"},a}}},ye=ve,Ce=(0,C.Z)(ye,fe,ge,!1,null,"45e60001",null),be=Ce.exports,xe={name:"SelectElementFromArray",components:{ReadOnlyComponentGenerator:be,PopupDisplay:x},props:{value:{type:Boolean,required:!0},zIndex:{type:String,default:"100"},elementName:{type:String,default:""},possibleParentElements:{type:Array,required:!0}},mixins:[ie],computed:{children(){return this.possibleParentElements.map((e=>e.name)).filter(((e,t,n)=>n.indexOf(e)===t)).map((e=>({name:e})))}},methods:{handleSelectedElement(e){this.$emit("selected-element",e),this.$emit("input",!1)}}},Ee=xe,Ne=(0,C.Z)(Ee,pe,he,!1,null,"ab462fea",null),we=Ne.exports,ke={name:"InlineComponent",inject:["$validator"],components:{SelectElementFromArray:we,ActionButtons:ce,ComponentGeneratorComponent:Z},mixins:[ue],props:{children:Array,elementData:Object,elementName:String,parentElementName:String,numberOfElements:Number,content:{type:[Object,Array],required:!0},childrenContent:Object,editorChildNumber:Number,isAttribute:Boolean,forceReadOnlyElements:{type:Boolean,default:!1},maxDisplayedChildren:{type:Number,default:-1}}},_e=ke,Oe=(0,C.Z)(_e,te,ne,!1,null,"1b801170",null),Se=Oe.exports,De=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"popup-component"},[n("div",[e.elementData.shown?n("section",{staticClass:"preview drop-shadow--100",on:{click:e.openPopup}},[e.isAttribute?e._e():n("ActionButtons",{staticClass:"actions-button",attrs:{elementName:e.elementName,elementEditorConfig:e.elementData,editorChildNumber:e.editorChildNumber,parentElementName:e.parentElementName,numberOfElements:e.numberOfElements},on:{"move-element-down":e.moveElementDown,"move-element-up":e.moveElementUp,"add-element":e.createSibling,"clone-element":e.cloneElement,"remove-element":e.deleteElement}}),n("section",[n(e.valueComponent,{tag:"component",staticClass:"preview-element text--md",attrs:{elementEditorConfig:e.elementData,elementName:e.elementName,elementData:e.elementData,content:e.componentData,isAttribute:e.isAttribute,parentElementName:e.parentElementName,forceReadOnlyElements:!0},on:{"hide-children":e.hideChildren,input:e.handleValueUpdate}}),e.showChildren?n("ComponentGeneratorComponent",{staticClass:"preview-components",attrs:{children:e.children,elementName:e.elementName,content:e.calculatedContent,forceReadOnlyElements:!0},on:{input:e.handleChildUpdate}}):e._e()],1)],1):e._e(),n("PopupDisplay",{model:{value:e.showPopup,callback:function(t){e.showPopup=t},expression:"showPopup"}},[e.elementData.shown?n(e.valueComponent,{tag:"component",attrs:{elementEditorConfig:e.elementData,elementName:e.elementName,elementData:e.elementData,content:e.componentData,isAttribute:e.isAttribute,parentElementName:e.parentElementName},on:{"hide-children":e.hideChildren,input:e.handleValueUpdate}}):e._e(),e.showChildren?n("ComponentGeneratorComponent",{attrs:{children:e.children,elementName:e.elementName,content:e.calculatedContent},on:{input:e.handleChildUpdate}}):e._e()],1)],1),e.showSelectNewParent?n("SelectElementFromArray",{attrs:{"element-name":e.elementName,"possible-parent-elements":e.newPossibleParents,parentElementName:e.parentElementName},on:{"selected-element":e.handleSelectedNewParent},model:{value:e.showSelectNewParent,callback:function(t){e.showSelectNewParent=t},expression:"showSelectNewParent"}}):e._e()],1)},Pe=[],Te={name:"PopupComponent",inject:["$validator"],components:{ComponentGeneratorComponent:Z,ActionButtons:ce,PopupDisplay:x,SelectElementFromArray:we},mixins:[ue],props:{children:Array,elementData:Object,elementName:String,parentElementName:String,numberOfElements:Number,content:{type:[Object,Array],required:!0},editorChildNumber:Number,isAttribute:Boolean,forceReadOnlyElements:{type:Boolean,default:!1}},data(){return{showPopup:!1,showChildren:!0,updatedContent:null}},methods:{openPopup(){this.showPopup=!0}}},Ae=Te,$e=(0,C.Z)(Ae,De,Pe,!1,null,"63d23c37",null),Ie=$e.exports,Me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.elementData.shown?n("section",[n("p",{class:e.computedClass},[e._v(e._s(e.forceReadOnly?e.computedElementNameWithColon:"")+" ")]),n("span",{class:e.computedClass},[e._v(" "+e._s(e.content.text))])]):e._e()])},je=[],Re={props:{forceReadOnly:{type:Boolean,default:!1}},computed:{computedClass(){return this.forceReadOnly?"text--xs":"text--md"},readOnly(){return this.elementData.readOnly||this.forceReadOnly}}},Le={name:"ReadOnlyComponent",props:{children:Array,elementData:Object,elementName:String,content:{type:[Object,Array],required:!0}},mixins:[ie,Re]},Be=Le,Ve=(0,C.Z)(Be,Me,je,!1,null,"1eafa6d2",null),Fe=Ve.exports,Ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.elementData.shown&&!e.readOnly?n("section",{staticClass:"dropdown",class:{error:e.errors.has(e.computedElementName)}},[n("p",{staticClass:"text--md"},[e._v(e._s(e.isAttribute?e.computedElementNameWithColon:""))]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"},{name:"validate",rawName:"v-validate.continues",value:e.computedValidation,expression:"computedValidation",modifiers:{continues:!0}}],attrs:{name:e.computedElementName||e.elementName},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.value=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"",disabled:"",selected:""}},[e._v(" Choose "+e._s(this.computedElementName||e.elementName)+" ")]),e._l(e.options,(function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v(e._s(t.caption))])}))],2)]):e._e(),e.elementData.shown&&e.readOnly?n("section",{staticClass:"read-only"},[n("p",{class:e.computedClass},[e._v(e._s(e.computedElementNameWithColon)+" ")]),n("span",{class:e.computedClass},[e._v(e._s(e.valueCaption))])]):e._e()])},Ze=[],Ue={props:{isAttribute:{type:Boolean},parentElementName:{type:String}},computed:{computedValidation(){if(!this.parentElementName)return null;if(this.isAttribute){let e=this.state.entry.dictConfigs.xema.elements[this.parentElementName].attributes[this.elementName];if("obligatory"===e.optionality)return"lst"===e.filling?{requiredDropdown:!0}:{required:!0}}return null}}},qe={name:"DropdownComponent",inject:["$validator"],props:{elementData:Object,elementName:String,content:{type:Object,required:!0}},mixins:[ie,Re,Ue],computed:{valueCaption(){let e=this.options.find((e=>e.value===this.value));return e&&e.caption}},data(){return{value:null,options:[]}},watch:{value(e){if(e!==this.content.text)if("attribute"===this.content.type)this.$emit("input",{elementName:this.elementName,attributes:{[this.content.name]:e}});else{let t=Object.assign({},this.content);t.text=e,this.$emit("input",{elementName:this.elementName,elements:[t]})}}},created(){let e=this.state.entry.dictConfigs.xema.elements[this.elementName];if(!e){let t=this.state.entry.dictConfigs.xema.elements[this.parentElementName].attributes||{};e=t[this.elementName]}this.options=e.values,this.value=this.content.text},mounted(){this.initSelect()},methods:{initSelect(){M.FormSelect.init(document.querySelectorAll("select"),{})}}},We=qe,Ge=(0,C.Z)(We,Ke,Ze,!1,null,"0839600b",null),He=Ge.exports,ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.elementData.shown&&!e.readOnly?n("section",{staticClass:"media-input"},[e.isAttribute?n("label",{staticClass:"text--md",attrs:{for:e.computedElementName}},[e._v(e._s(e.computedElementNameWithColon))]):e._e(),n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{name:e.computedElementName,type:"text"},domProps:{value:e.value},on:{change:e.updateParent,input:function(t){t.target.composing||(e.value=t.target.value)}}}),n("button",{staticClass:"button--sm secondary",staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.$refs.imageSearcher.toggleOpen()}}},[n("img",{attrs:{src:e.iconUrl("search-image.svg")}})])]):e._e(),e.elementData.shown&&!e.readOnly?n("ImageSearcher",{ref:"imageSearcher",on:{selected:e.updateValue}}):e._e(),e.elementData.shown&&e.readOnly?n("section",{staticClass:"read-only"},[n("p",{class:e.computedClass},[e._v(e._s(e.computedElementNameWithColon)+" ")]),n("span",{class:e.computedClass},[e._v(e._s(e.value))])]):e._e()],1)},Xe=[],Je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"popup"},[n("div",{ref:"wrapper",staticClass:"modal",on:{click:e.maybeClosePopup}},[n("div",{ref:"modalContent",staticClass:"modal-content"},[n("span",{staticClass:"close",on:{click:e.close}},[e._v("×")]),n("div",{staticClass:"search-box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],attrs:{type:"text",placeholder:"Search images for"},domProps:{value:e.searchTerm},on:{input:function(t){t.target.composing||(e.searchTerm=t.target.value)}}}),n("button",{on:{click:function(t){return e.getImages()}}},[e._v("Search")])]),n("div",{staticClass:"image-carousel"},[e._l(e.images,(function(t,a){return n("div",{key:a,staticClass:"image-holder"},[n("img",{attrs:{src:t.thumb},on:{click:function(n){return e.selectImage(t.url)}}})])})),e.errorMessage?n("p",[e._v(e._s(e.errorMessage))]):e._e(),n("div",{staticClass:"loader-wrapper"},[e.gettingImagesInProcess?n("LoaderComponent"):e._e()],1)],2)])])])},Qe=[],Ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loader"},[e._v(".")])},et=[],tt={name:"LoaderComponent",props:{color:{type:String,default:"black"}}},nt=tt,at=(0,C.Z)(nt,Ye,et,!1,null,"08de508f",null),st=at.exports,it={name:"ImageSearcher",components:{LoaderComponent:st},data(){return{show:!1,popupId:null,searchTerm:"",images:[],continue:null,scrollListening:!1,gettingImagesInProcess:!1,errorMessage:null}},watch:{show:{handler(e){e&&(this.popupId||(this.popupId=Math.random()),this.state.openedPopups.push(this.popupId),document.addEventListener("keydown",this.handleEscKey))},immediate:!0}},methods:{toggleOpen(){this.show=!this.show},close(){this.show=!1},handleEscKey(e){"Escape"===e.key&&this.$nextTick((()=>{this.state.openedPopups[this.state.openedPopups.length-1]===this.popupId&&(document.removeEventListener("keydown",this.handleEscKey),this.close(),this.state.openedPopups.pop())}))},maybeClosePopup(e){e.target===this.$refs.wrapper&&this.close()},selectImage(e){this.$emit("selected",e),this.close()},getImages(){this.gettingImagesInProcess=!0,N().get(`${window.location.origin}/${this.state.entry.dictId}/getmedia/${this.searchTerm}/`).then((e=>{this.images=[],this.gettingImagesInProcess=!1,0!==e.data.images.length?(this.errorMessage=null,e.data.images.forEach((e=>{this.images.push({thumb:e.thumb,url:e.url})}))):this.errorMessage="No images found."})).catch((e=>{this.errorMessage=e.message}))}}},rt=it,lt=(0,C.Z)(rt,Je,Qe,!1,null,"dc8502c0",null),ot=lt.exports,mt={name:"MediaComponent",components:{ImageSearcher:ot},props:{elementData:Object,elementName:String,content:{type:Object,required:!0}},mixins:[ie,Re,re],computed:{isMultimediaAPI(){return!0}},data(){return{value:""}},mounted(){this.value=this.content.text},methods:{updateParent(){this.$nextTick((()=>{if(this.value!==this.content.text)if("attribute"===this.content.type)this.$emit("input",{elementName:this.elementName,attributes:{[this.content.name]:this.value}});else{let e=Object.assign({},this.content);e.text=this.value,this.$emit("input",{elementName:this.elementName,elements:[e]})}}))},updateValue(e){this.value=e,this.updateParent()}}},ct=mt,dt=(0,C.Z)(ct,ze,Xe,!1,null,"afb1ec2a",null),ut=dt.exports,pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.elementData.shown&&!e.readOnly?n("section",{staticClass:"text-input"},[e.isAttribute?n("label",{staticClass:"text--md",attrs:{for:e.computedElementName}},[e._v(e._s(e.computedElementNameWithColon))]):e._e(),"textarea"===this.elementData.editorInputType?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"},{name:"validate",rawName:"v-validate.continues",value:e.computedValidation,expression:"computedValidation",modifiers:{continues:!0}}],class:{error:e.errors.has(e.computedElementName||e.elementName)},attrs:{name:e.computedElementName||e.elementName,cols:"30",rows:"10",placeholder:e.errors&&e.errors.first(e.computedElementName||e.elementName)||e.computedElementName||e.elementName},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}):"checkbox"===e.getInputType()?n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"},{name:"validate",rawName:"v-validate.continues",value:e.computedValidation,expression:"computedValidation",modifiers:{continues:!0}}],class:{error:e.errors.has(e.computedElementName||e.elementName)},attrs:{name:e.computedElementName||e.elementName,placeholder:e.errors&&e.errors.first(e.computedElementName||e.elementName)||e.computedElementName||e.elementName,type:"checkbox"},domProps:{checked:Array.isArray(e.value)?e._i(e.value,null)>-1:e.value},on:{change:[function(t){var n=e.value,a=t.target,s=!!a.checked;if(Array.isArray(n)){var i=null,r=e._i(n,i);a.checked?r<0&&(e.value=n.concat([i])):r>-1&&(e.value=n.slice(0,r).concat(n.slice(r+1)))}else e.value=s},e.updateParent]}}):"radio"===e.getInputType()?n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"},{name:"validate",rawName:"v-validate.continues",value:e.computedValidation,expression:"computedValidation",modifiers:{continues:!0}}],class:{error:e.errors.has(e.computedElementName||e.elementName)},attrs:{name:e.computedElementName||e.elementName,placeholder:e.errors&&e.errors.first(e.computedElementName||e.elementName)||e.computedElementName||e.elementName,type:"radio"},domProps:{checked:e._q(e.value,null)},on:{change:[function(t){e.value=null},e.updateParent]}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"},{name:"validate",rawName:"v-validate.continues",value:e.computedValidation,expression:"computedValidation",modifiers:{continues:!0}}],class:{error:e.errors.has(e.computedElementName||e.elementName)},attrs:{name:e.computedElementName||e.elementName,placeholder:e.errors&&e.errors.first(e.computedElementName||e.elementName)||e.computedElementName||e.elementName,type:e.getInputType()},domProps:{value:e.value},on:{change:e.updateParent,input:function(t){t.target.composing||(e.value=t.target.value)}}}),e.elementData.interactivity?n("button",{staticClass:"button--sm tertiary",staticStyle:{"margin-left":"8px"},on:{click:e.previewValue}},[e._v("Preview ")]):e._e()]):e._e(),e.elementData.shown&&e.readOnly?n("section",{staticClass:"read-only"},[n("p",{class:e.computedClass},[e._v(e._s(e.computedElementNameWithColon)+" ")]),n("span",{class:e.computedClass},[e._v(e._s(e.value))])]):e._e()])},ht=[],ft={name:"TextInputComponent",inject:["$validator"],props:{elementData:Object,elementName:String,content:{type:Object,required:!0}},mixins:[ie,Re,Ue],data(){return{value:""}},mounted(){this.value=this.content.text},methods:{updateParent(){this.$nextTick((()=>{if(this.value!==this.content.text)if("attribute"===this.content.type)this.$emit("input",{elementName:this.elementName,attributes:{[this.content.name]:this.value}});else{let e=Object.assign({},this.content);e.text=this.value,this.$emit("input",{elementName:this.elementName,elements:[e]})}}))},previewValue(){window.open(this.value,"_blank")},getInputType(){switch(this.elementData.editorInputType){case"number":case"text":return this.elementData.editorInputType;default:return"text"}}}},gt=ft,vt=(0,C.Z)(gt,pt,ht,!1,null,"43344832",null),yt=vt.exports,Ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.elementData.shown&&!e.readOnly?n("section",{staticClass:"input-section"},[e.isAttribute?n("label",{staticClass:"text--md"},[e._v(e._s(e.computedElementNameWithColon))]):e._e(),n("div",{ref:"wholeInput",staticClass:"text-with-markup"},e._l(e.values,(function(t,a){return n("span",{key:a+t.type,ref:a,refInFor:!0,class:e.calculatedClasses(t),staticStyle:{"white-space":"pre-wrap"},style:e.calculatedStyles(t),attrs:{"data-index":a,"data-type":t.type,"data-name":t.name||null,"data-text":t.text,role:"textbox",contenteditable:""},domProps:{innerHTML:e._s(t.text)},on:{focusout:e.updateValue}})})),0),n("div",{ref:"markActionButton",staticClass:"dropdown"},[n("button",{staticClass:"secondary mark-as",on:{click:e.toggleMarkActions}},[e._v("Mark as")]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showMarkActions,expression:"showMarkActions"}],staticClass:"vue-dropdown-content"},e._l(e.markupElements,(function(t,a){return n("button",{key:a,staticClass:"tertiary",attrs:{disabled:t.disabled},on:{click:function(n){return e.markTextAs(t.type)}}},[e._v(e._s(t.type)+" ")])})),0)])]):e._e(),e.elementData.shown&&e.readOnly&&e.readOnlyValues.length>0?n("section",{staticClass:"read-only"},[n("p",{class:e.computedClass},[e._v(e._s(e.computedElementNameWithColon)+" ")]),n("span",{class:e.computedClass},e._l(e.readOnlyValues,(function(t,a){return n("span",{key:a+t.type,staticStyle:{"white-space":"pre-wrap"},domProps:{innerHTML:e._s(t.text)}})})),0)]):e._e()])},bt=[],xt={methods:{getStylesFromConfig(e){let t=this.state.entry.dictConfigs.xemplate[e],n={};for(const[a,s]of Object.entries(t))switch(a){case"background":n.backgroundColor=s;break;case"colour":n.color=s;break;case"slant":n.fontStyle=s;break;case"weight":n.fontWeight=s;break}return n}}},Et={name:"TextInputWithMarkupComponent",props:{elementData:Object,elementName:String,content:{type:[Object,Array],required:!0},children:Array},mixins:[xt,ie,Re],computed:{readOnlyValues(){return this.values.filter((e=>e.text))}},watch:{values:{handler(e){let t;Array.isArray(this.values)?(t=[],this.values.forEach((e=>{switch(e.type){case"text":""!==e.text&&t.push({type:"text",text:e.text});break;default:""!==e.text&&t.push({type:"element",name:e.name,elements:[{type:"text",text:e.text}]})}}))):(t=Object.assign({},this.content),t.text=""+e[0].text),JSON.stringify(t)!==JSON.stringify(this.content)&&this.$emit("input",{elementName:this.elementName,elements:t})},deep:!0},showMarkActions(e){e?window.addEventListener("click",this.watchForOutsideClick):window.removeEventListener("click",this.watchForOutsideClick)}},data(){return{values:[],markupElements:null,combinedValue:"",showMarkActions:!1}},created(){let e=this.state.entry.dictConfigs.xampl;this.markupElements=[{type:"text",disabled:!1}],Array.isArray(this.children)?this.children.forEach((e=>{e.isAttribute||this.markupElements.push({type:this.getElementNameInConfig(e.name),disabled:!1})})):this.markupElements=[{type:e.markup,disabled:!1}]},mounted(){this.computeValues()},methods:{getElementNameInConfig(e){let t=this.state.entry.dictConfigs.xema.elements,n=t[e];return n&&n.elementName||e},computeValues(){Array.isArray(this.content)&&this.content.length>0?this.content.forEach(((e,t)=>{"text"===e.type?this.values.push({type:"text",text:e.text,index:t,name:null}):"element"===e.type&&this.values.push({type:e.type,name:e.name||null,text:this.findTextInElement(e.elements),index:t})})):this.values=[{type:"text",text:"",index:0,name:null}]},updateValue(e){this.values[e.target.dataset.index].text=e.target.textContent},findTextInElement(e){if(Array.isArray(e)){let t=e.find((e=>"text"===e.type));return t.text||""}return""},calculatedStyles(e){switch(e.type){case"text":return this.getStylesFromConfig(this.elementName);case"element":return this.getStylesFromConfig(e.name)}},calculatedClasses(e){let t=[];return""===e.text&&t.push("empty-element"),"text"===e.type?t.push("text-element"):t.push("dynamic-element"),t},markTextAs(e){this.showMarkActions=!1;const{fromElement:t,start:n,end:a,selection:s}=this.getSelection();if(!t||!s)return;let i=[];switch(0!==n&&i.push({type:t.dataset.type,text:t.textContent.substring(0,n),name:t.dataset.name||null}),e){case"text":i.push({type:"text",text:s,name:null});break;default:i.push({type:"element",text:s,name:e||null})}a!==t.textContent.length&&i.push({type:t.dataset.type,text:t.textContent.substring(a,t.textContent.length),name:t.dataset.name||null}),this.values.splice(Number(t.dataset.index),1,...i),this.tryMergingValues()},tryMergingValues(){if(!(this.values.length<2))for(let e=0;e<this.values.length-1;e++){let t=this.values[e],n=this.values[e+1];if(t.type===n.type&&t.name===n.name){t.text+=n.text,this.values.splice(e,2,t),this.tryMergingValues();break}}},getSelection(){let e,t,n,a=getSelection(),s=this.$refs["wholeInput"];if(a.rangeCount&&s.compareDocumentPosition((e=a.getRangeAt(0)).startContainer)!==Node.DOCUMENT_POSITION_PRECEDING&&s.compareDocumentPosition(e.endContainer)!==Node.DOCUMENT_POSITION_FOLLOWING){let i=a.focusNode.parentElement;return t=s.compareDocumentPosition(e.startContainer)===Node.DOCUMENT_POSITION_FOLLOWING?0:e.startOffset,n=s.compareDocumentPosition(e.endContainer)===Node.DOCUMENT_POSITION_PRECEDING?s.textContent.length:e.endOffset,a=i.textContent.substring(t,n),{fromElement:i,start:t,end:n,selection:a}}return{}},toggleMarkActions(){this.showMarkActions=!this.showMarkActions},watchForOutsideClick(e){this.$refs.markActionButton&&!this.$refs.markActionButton.contains(e.target)&&this.toggleMarkActions()}}},Nt=Et,wt=(0,C.Z)(Nt,Ct,bt,!1,null,"735f6768",null),kt=wt.exports;a.Z.config.productionTip=!1;const _t=new a.Z;a.Z.use(H.ZP,{mode:"eager"}),a.Z.component("InlineComponent",Se),a.Z.component("PopupComponent",Ie),a.Z.component("ReadOnlyComponent",Fe),a.Z.component("DropdownComponent",He),a.Z.component("MediaComponent",ut),a.Z.component("TextInputComponent",yt),a.Z.component("TextInputWithMarkupComponent",kt),a.Z.mixin({data:()=>({bus:_t,state:ee.state})}),window.mountGraphicalEditor=function(){let e="editor";document.getElementById("editor")||(e="container"),window.editor=new a.Z({components:{App:Q},template:"<App/>"}),window.editor.$mount("#"+e)}}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,a,s,i){if(!a){var r=1/0;for(c=0;c<e.length;c++){a=e[c][0],s=e[c][1],i=e[c][2];for(var l=!0,o=0;o<a.length;o++)(!1&i||r>=i)&&Object.keys(n.O).every((function(e){return n.O[e](a[o])}))?a.splice(o--,1):(l=!1,i<r&&(r=i));if(l){e.splice(c--,1);var m=s();void 0!==m&&(t=m)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[a,s,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,i,r=a[0],l=a[1],o=a[2],m=0;if(r.some((function(t){return 0!==e[t]}))){for(s in l)n.o(l,s)&&(n.m[s]=l[s]);if(o)var c=o(n)}for(t&&t(a);m<r.length;m++)i=r[m],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},a=self["webpackChunkeditor"]=self["webpackChunkeditor"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(1469)}));a=n.O(a)})();
//# sourceMappingURL=app.482fe022.js.map