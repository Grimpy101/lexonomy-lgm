!function(){function R(e){return e.replace(/-(\w)/g,(e,t)=>t.toUpperCase())}function F(e){j(e.childNodes)}function j(e){Array.from(e).forEach(T)}const T=e=>e&&e.parentNode&&e.parentNode.removeChild(e),E=(e,t)=>t&&t.parentNode&&t.parentNode.insertBefore(e,t),P=new Map,O=Symbol("riot-component"),V=new Set,n="is",g="mount",e="update",t="unmount",a="shouldUpdate",K="onBeforeMount",H="onMounted",z="onBeforeUpdate",G="onUpdated",q="onBeforeUnmount",Y="onUnmounted",v="props",y="state",W="slots",Q="root",f=Symbol("pure"),o=Symbol("is_updating"),l=Symbol("parent"),d=Symbol("attributes"),c=Symbol("template");var i=Object.freeze({__proto__:null,COMPONENTS_IMPLEMENTATION_MAP:P,DOM_COMPONENT_INSTANCE_PROPERTY:O,PLUGINS_SET:V,IS_DIRECTIVE:n,VALUE_ATTRIBUTE:"value",MOUNT_METHOD_KEY:g,UPDATE_METHOD_KEY:e,UNMOUNT_METHOD_KEY:t,SHOULD_UPDATE_KEY:a,ON_BEFORE_MOUNT_KEY:K,ON_MOUNTED_KEY:H,ON_BEFORE_UPDATE_KEY:z,ON_UPDATED_KEY:G,ON_BEFORE_UNMOUNT_KEY:q,ON_UNMOUNTED_KEY:Y,PROPS_KEY:v,STATE_KEY:y,SLOTS_KEY:W,ROOT_KEY:Q,IS_PURE_SYMBOL:f,IS_COMPONENT_UPDATING:o,PARENT_KEY_SYMBOL:l,ATTRIBUTES_KEY_SYMBOL:d,TEMPLATE_KEY_SYMBOL:c});var Z={EACH:0,IF:1,SIMPLE:2,TAG:3,SLOT:4};const r=0,p=2,J=3;var ee={ATTRIBUTE:r,EVENT:1,TEXT:p,VALUE:J};const te=Symbol("head"),ae=Symbol("tail");function ne(e){var e=e.dom.cloneNode(!0),{head:t,tail:a}=function(){const e=document.createTextNode(""),t=document.createTextNode("");return e[te]=!0,t[ae]=!0,{head:e,tail:t}}();return{avoidDOMInjection:!0,fragment:e,head:t,tail:a,children:[t,...Array.from(e.childNodes),a]}}function A(e,t,a,n){void 0===n&&(n={}),Object.defineProperty(e,t,Object.assign({value:a,enumerable:!1,writable:!1,configurable:!0},n))}function ie(a,e,n){return Object.entries(e).forEach(e=>{var[e,t]=e;A(a,e,t,n)}),a}function re(a,e){return Object.entries(e).forEach(e=>{var[e,t]=e;a[e]||(a[e]=t)}),a}function se(e,t){return typeof e===t}function oe(e){e=e.ownerSVGElement;return!!e||null===e}function u(e){return"template"===e.tagName.toLowerCase()}function h(e){return se(e,"function")}function le(e){return!de(e)&&e.constructor===Object}function de(e){return null==e}const ce=Symbol("unmount"),pe={nodes:[],mount(e,t){return this.update(e,t)},update(e,t){const{placeholder:o,nodes:l,childrenMap:d}=this;var c,p,a=e===ce?null:this.evaluate(e);const{newChildrenMap:n,batches:i,futureNodes:u}=function(e,c,p,t){const{condition:u,template:h,childrenMap:m,itemName:x,getKey:g,indexName:v,root:y,isTemplateTag:f}=t,b=new Map,w=[],k=[];return e.forEach((e,t)=>{const a=function(e,t){var{itemName:t,indexName:a,index:n,item:i}=t;A(e,t,i),a&&A(e,a,n);return e}(Object.create(c),{itemName:x,indexName:v,index:t,item:e});var e=g?g(a):t,n=m.get(e);const i=[];if(s=u,r=a,!s||s(r)){var r,s=!n;const o=n?n.template:h.clone(),l=o.el||y.cloneNode(),d=f&&s?ne(o):o.meta;s?w.push(()=>o.mount(l,a,p,d)):w.push(()=>o.update(a,p)),f?i.push(...d.children):i.push(l),m.delete(e),k.push(...i),b.set(e,{nodes:i,template:o,context:a,index:t})}}),{newChildrenMap:b,batches:w,futureNodes:k}}(a?Array.from(a):[],e,t,this);{var h=l,m=u,x=(c=Array.from(d.values()),p=t,(e,t)=>{if(t<0){t=c[c.length-1];if(t){const{template:a,nodes:n,context:i}=t;n.pop(),n.length||(c.pop(),a.unmount(i,p,null))}}return e}),g=o,v,y=m.length;let a=h.length,n=y,i=0,r=0,s=null;for(;i<a||r<n;)if(a===i)for(var f=n<y?r?x(m[r-1],-0).nextSibling:x(m[n-r],0):g;r<n;)E(x(m[r++],1),f);else if(n===r)for(;i<a;)s&&s.has(h[i])||T(x(h[i],-1)),i++;else if(h[i]===m[r])i++,r++;else if(h[a-1]===m[n-1])a--,n--;else if(h[i]===m[n-1]&&m[r]===h[a-1]){var b=x(h[--a],-1).nextSibling;E(x(m[r++],1),x(h[i++],-1).nextSibling),E(x(m[--n],1),b),h[a]=m[n]}else{if(!s){s=new Map;let e=r;for(;e<n;)s.set(m[e],e++)}if(s.has(h[i])){var w=s.get(h[i]);if(r<w&&w<n){let e=i,t=1;for(;++e<a&&e<n&&s.get(h[e])===w+t;)t++;if(t>w-r)for(var k=x(h[i],0);r<w;)E(x(m[r++],1),k);else b=x(m[r++],1),(v=x(h[i++],-1))&&v.parentNode&&v.parentNode.replaceChild(b,v)}else i++}else T(x(h[i++],-1))}}return i.forEach(e=>e()),this.childrenMap=n,this.nodes=u,this},unmount(e,t){return this.update(ce,t),this}};const ue={mount(e,t){return this.update(e,t)},update(t,a){var e=!!this.evaluate(t),n=!this.value&&e,i=this.value&&!e,r=()=>{var e=this.node.cloneNode();E(e,this.placeholder),this.template=this.template.clone(),this.template.mount(e,t,a)};switch(!0){case n:r();break;case i:this.unmount(t);break;default:e&&this.template.update(t,a)}return this.value=e,this},unmount(e,t){return this.template.unmount(e,t,!0),this}};function b(e){throw new Error(e)}function he(t){const a=new Map;var e=e=>(a.has(e)||a.set(e,t.call(this,e)))&&a.get(e);return e.cache=a,e}function me(e){return e.reduce((e,t)=>{var{value:a,type:n}=t;switch(!0){case!t.name&&n===r:return Object.assign({},e,a);case n===J:e.value=t.value;break;default:e[R(t.name)]=t.value}return e},{})}const xe="undefined"==typeof Element?{}:Element.prototype,ge=he(e=>xe.hasOwnProperty(e));function ve(e,t,a,n){var i,t=t["name"];if(t)!ge(t)&&(se(a,"boolean")||le(a)||h(a))&&(e[t]=a),(s=a)||0===s?!0!==(s=a)&&!["string","number"].includes(typeof s)||e.setAttribute(t,(s=t,!0===(o=a)?s:o)):e.removeAttribute(t);else{if(n){var r=e;var s=a;var o=n;const l=s?Object.keys(s):[];Object.keys(o).filter(e=>!l.includes(e)).forEach(e=>r.removeAttribute(e))}a&&(i=e,Object.entries(a).forEach(e=>{var[e,t]=e;return ve(i,{name:e},t)}))}}const ye=/^on/,fe={handleEvent(e){this[e.type](e)}},be=new WeakMap;function we(e){return de(e)?"":e}const ke=(e,t)=>{var a,t=e.childNodes[t];return t.nodeType===Node.COMMENT_NODE?(a=document.createTextNode(""),e.replaceChild(a,t),a):t};var Te={[r]:ve,1:function(e,t,a){let n=t["name"];t=n.replace(ye,"");const i=be.get(e)||(r=e,s=Object.create(fe),be.set(r,s),s);r=a;var r,[s,a]=Array.isArray(r)?r:[r,!1],o=i[t],l=s&&!o;o&&!s&&e.removeEventListener(t,i),l&&e.addEventListener(t,i,a),i[t]=s},[p]:function(e,t,a){e.data=we(a)},[J]:function(e,t,a){e.value=we(a)}};const Ee={mount(e){return this.value=this.evaluate(e),Ae(this,this.value),this},update(e){e=this.evaluate(e);return this.value!==e&&(Ae(this,e),this.value=e),this},unmount(){return 1===this.type&&Ae(this,null),this}};function Ae(e,t){Te[e.type](e.node,e,t,e.value)}function Ie(e,t){return Object.assign({},Ee,t,{node:t.type===p?ke(e,t.childNodeIndex):e})}const Se=(e,t)=>e[l]||t,Ce={attributes:[],getTemplateScope(e,t){return a=this.attributes,n=e,e=t,a&&a.length?(a=a.map(e=>Object.assign({},e,{value:e.evaluate(n)})),Object.assign(Object.create(e||null),me(a))):e;var a,n},mount(e,t){var a=!!e.slots&&e.slots.find(e=>{e=e.id;return e===this.name}),n=this.node["parentNode"],t=Se(e,t);return this.template=a&&Xe(a.html,a.bindings).createDOM(n),this.template&&(F(this.node),this.template.mount(this.node,this.getTemplateScope(e,t),t),this.template.children=Array.from(this.node.childNodes)),function e(t){const a=t&&t.firstChild;if(!a)return;E(a,t);e(t)}(this.node),T(this.node),this},update(e,t){return this.template&&(t=Se(e,t),this.template.update(this.getTemplateScope(e,t),t)),this},unmount(e,t,a){return this.template&&this.template.unmount(this.getTemplateScope(e,t),null,a),this}};const De={mount(e){return this.update(e)},update(e,t){var a,n=this.evaluate(e);return n&&n===this.name?this.tag.update(e):(this.unmount(e,t,!0),this.name=n,this.tag=(t=this.getComponent(n),n=this.slots,a=this.attributes,void 0===n&&(n=[]),void 0===a&&(a=[]),t?t({slots:n,attributes:a}):Xe(n.reduce((e,t)=>e+t.html,""),[...n.reduce((e,t)=>{t=t.bindings;return e.concat(t)},[]),{expressions:a.map(e=>Object.assign({type:r},e))}])),this.tag.mount(this.node,e)),this},unmount(e,t,a){return this.tag&&this.tag.unmount(a),this}};var s,$e={[1]:function(e,t){let{evaluate:a,template:n}=t;return t=document.createTextNode(""),E(t,e),T(e),Object.assign({},ue,{node:e,evaluate:a,placeholder:t,template:n.createDOM(e)})},2:function(t,e){let a=e["expressions"];return Object.assign({},(n=a.map(e=>Ie(t,e)),["mount","update","unmount"].reduce((e,a)=>Object.assign({},e,{[a]:t=>n.map(e=>e[a](t))&&i}),{})));var n,i},0:function(e,t){let{evaluate:a,condition:n,itemName:i,indexName:r,getKey:s,template:o}=t;var t=document.createTextNode(""),l=e.cloneNode();return E(t,e),T(e),Object.assign({},pe,{childrenMap:new Map,node:e,root:l,condition:n,evaluate:a,isTemplateTag:u(l),template:o.createDOM(e),getKey:s,indexName:r,itemName:i,placeholder:t})},3:function(e,t){var{evaluate:t,getComponent:a,slots:n,attributes:i}=t;return Object.assign({},De,{node:e,evaluate:t,slots:n,attributes:i,getComponent:a})},4:function(e,t){var{name:t,attributes:a}=t;return Object.assign({},Ce,{attributes:a,node:e,name:t})}};function Le(e,t,a){var{selector:n,type:i,redundantAttribute:r,expressions:s}=t;const o=n?e.querySelector(n):e;r&&o.removeAttribute(r);var l,e=s||[];return($e[i]||$e[2])(o,Object.assign({},t,{expressions:a&&!n?(l=a,e.map(e=>e.type===p?Object.assign({},e,{childNodeIndex:e.childNodeIndex+l}):e)):e}))}function Ne(e,t){if(oe(e))return a=t,e.ownerDocument.importNode((new window.DOMParser).parseFromString(`<svg xmlns="http://www.w3.org/2000/svg">${a}</svg>`,"application/xml").documentElement,!0);{a=t,t=e;const n=u(t)?t:document.createElement("template");return n.innerHTML=a,n.content}var a}function Ue(e,t){switch(!0){case oe(e):!function e(t,a){t.firstChild&&(a.appendChild(t.firstChild),e(t,a))}(t,e);break;case u(e):e.parentNode.replaceChild(t,e);break;default:e.appendChild(t)}}const _e=Object.freeze({createDOM(e){var t;return this.dom=this.dom||(e=e,(t=this.html)&&("string"==typeof t?Ne(e,t):t))||document.createDocumentFragment(),this},mount(e,t,a,n){if(void 0===n&&(n={}),!e)throw new Error("Please provide DOM node to mount properly your template");this.el&&this.unmount(t);var{fragment:i,children:r,avoidDOMInjection:s}=n,o=(r?r[0]:e)["parentNode"],l=u(e);const d=l?function(e,t,a){const n=Array.from(e.childNodes);return Math.max(n.indexOf(t),n.indexOf(a.head)+1,0)}(o,e,n):null;this.createDOM(e);i=i||this.dom.cloneNode(!0);return this.el=l?o:e,this.children=l?r||Array.from(i.childNodes):null,!s&&i&&Ue(e,i),this.bindings=this.bindingsData.map(e=>Le(this.el,e,d)),this.bindings.forEach(e=>e.mount(t,a)),this.meta=n,this},update(t,a){return this.bindings.forEach(e=>e.update(t,a)),this},unmount(t,a,n){void 0===n&&(n=!1);var e=this.el;if(!e)return this;switch(this.bindings.forEach(e=>e.unmount(t,a,n)),!0){case e[f]||null===n:break;case Array.isArray(this.children):j(this.children);break;case!n:F(e);break;case!!n:T(e)}return this.el=null,this},clone(){return Object.assign({},this,{meta:{},el:null})}});function Xe(e,t){return void 0===t&&(t=[]),Object.assign({},_e,{html:e,bindingsData:t})}function m(){return this}function w(e){return h(e)?e.prototype&&e.prototype.constructor?new e:e():e}function Be(e){return Array.isArray(e)?e:/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(e))&&"number"==typeof e.length?Array.from(e):[e]}function Re(e,t){return Be("string"==typeof e?(t||document).querySelectorAll(e):e)}const Me=e=>1===e.length?e[0]:e;function Fe(e,t,a){const n="object"==typeof t?t:{[t]:a},i=Object.keys(n);Be(e).forEach(t=>{i.forEach(e=>t.setAttribute(e,n[e]))})}function je(e,t){{var a="getAttribute";const n="string"==typeof t?[t]:t;return Me(Be(e).map(t=>Me(n.map(e=>t[a](e)))))}}const x=new Map,Pe=()=>s||(Fe(s=Re("style[riot]")[0]||document.createElement("style"),"type","text/css"),s.parentNode||document.head.appendChild(s),s);var Oe,Ve,Ke={CSS_BY_NAME:x,add(e,t){return x.has(e)||(x.set(e,t),this.inject()),this},inject(){return Pe().innerHTML=[...x.values()].join("\n"),this},remove(e){return x.has(e)&&(x.delete(e),this.inject()),this}};const He=Object.freeze({$(e){return Re(e,this.root)[0]},$$(e){return Re(e,this.root)}}),ze=Object.freeze({[g]:m,[e]:m,[t]:m}),Ge=Object.freeze({[a]:m,[K]:m,[H]:m,[z]:m,[G]:m,[q]:m,[Y]:m}),qe=Object.assign({},ze,{clone:m,createDOM:m}),Ye=he(k);function We(e,t){return void 0===t&&(t={}),Object.assign({},Array.from(e.attributes).reduce((e,t)=>(e[R(t.name)]=t.value,e),{}),w(t))}const Qe=(e,t)=>e[O]=t;function Ze(a){return[g,e,t].reduce((e,t)=>(e[t]=a(t),e),{})}function Je(e,t){const a=function(e){void 0===e&&(e={});return Object.entries(w(e)).reduce((e,t)=>{var[t,a]=t;return e[t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()]=k(a),e},{})}(t.exports?t.exports.components:{});return e(Xe,ee,Z,e=>e===t.name?Ye(t):a[e]||P.get(e))}function k(e){const{css:p,template:u,exports:h,name:m}=e,x=u?Je(u,e):qe;return e=>{var{slots:e,attributes:t,props:a}=e;if(h&&h[f]){var n=h,{slots:i,attributes:r,props:s,css:o,template:l}=i={slots:e,attributes:t,props:a,css:p,template:u};l&&b("Pure components can not have html"),o&&b("Pure components do not have css");const d=re(n({slots:i,attributes:r,props:s}),ze);return Ze(i=>function(){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return i===g&&([e]=a,A(e,f,!0),Qe(e,d)),d[i](...a),d})}{l=w(h)||{};const c=function(e){var{css:e,template:t,componentAPI:a,name:n}=e;e&&n&&Ke.add(n,e);return function n(i){for(var e=arguments.length,r=new Array(1<e?e-1:0),t=1;t<e;t++)r[t-1]=arguments[t];return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(t=[...r,...t]).length<i.length?n(i,...t):i(...t)}}(at)(ie(re(a,Object.assign({},Ge,{[v]:{},[y]:{}})),Object.assign({[W]:null,[Q]:null},He,{name:n,css:e,template:t})))}({css:p,template:x,componentAPI:l,name:m})({slots:e,attributes:t,props:a});return{mount(e,t,a){return c.mount(e,a,t)},update(e,t){return c.update(t,e)},unmount(e){return c.unmount(e)}}}}}function et(e,t){return Object.assign({},e,w(t))}function tt(e,t){var a;(je(a=e,n)||a.tagName.toLowerCase())!==t&&Fe(e,n,t)}function at(n,e){let{slots:i,attributes:r,props:s}=e;return e=ie(le(n)?Object.create(n):n,{mount(e,t,a){return void 0===t&&(t={}),A(e,f,!1),this[l]=a,this[d]=function(t,e){const n=(e=void 0===e?[]:e).map(e=>Ie(t,e)),i={};return Object.assign(i,Object.assign({expressions:n},Ze(a=>t=>(n.forEach(e=>e[a](t)),i))))}(e,r).mount(a),A(this,v,Object.freeze(Object.assign({},We(e,s),me(this[d].expressions)))),this[y]=et(this[y],t),this[c]=this.template.createDOM(e).clone(),Qe(e,this),n.name&&tt(e,n.name),A(this,Q,e),A(this,W,i),this[K](this[v],this[y]),this[c].mount(e,this,a),this[H](this[v],this[y]),this},update(e,t){void 0===e&&(e={}),t&&(this[l]=t,this[d].update(t));t=me(this[d].expressions);if(!1!==this[a](t,this[v]))return A(this,v,Object.freeze(Object.assign({},this[v],t))),this[y]=et(this[y],e),this[z](this[v],this[y]),this[o]||(this[o]=!0,this[c].update(this,this[l])),this[G](this[v],this[y]),this[o]=!1,this},unmount(e){return this[q](this[v],this[y]),this[d].unmount(),this[c].unmount(this,this[l],null===e?null:!e),this[Y](this[v],this[y]),this}}),t=[...V].reduce((e,t)=>t(e)||e,e),Object.keys(n).filter(e=>h(n[e])).forEach(e=>{t[e]=t[e].bind(t)}),t;var t}const{COMPONENTS_IMPLEMENTATION_MAP:nt,PLUGINS_SET:it}=i;function I(e,t){var{css:t,template:a,exports:n}=t;nt.has(e)&&b(`The component "${e}" was already registered`),nt.set(e,k({name:e,css:t,template:a,exports:n})),nt}window.store=new class{constructor(){observable(this),this.data={isSiteconfigLoading:!1,isDictionaryListLoading:!1,isDictionaryListLoaded:!1,siteconfig:null,dictionaryList:[],isPublicDictionaryListLoaded:!1,isPublicDictionaryListLoading:!1,publicDictionaryList:null},this.resetDictionary()}getDictionary(t){return this.data.dictionaryList.find(e=>e.id==t)}open(e,t,a,n){this.changeDictionary(e),this.changeDoctype(t),a&&this.changeEntryId(a),n&&(this.data.mode=n)}changeDictionary(e){e!=this.data.dictId&&(this.resetDictionary(),this.data.dictId=e,(window.dictId=e)?this.loadActualDictionary():this.trigger("dictionaryChanged"))}changeDoctype(e){this.data.isDictionaryLoading?this.one("dictionaryChanged",this.changeDoctype.bind(this,e)):(e=e||this.data.doctypes[0])!=this.data.doctype&&(this.data.doctype=e,this.data.config.xema.root=e,this.trigger("doctypeChanged"))}changeSearchParams(e){var t;this.data.isDictionaryLoading?this.one("dictionaryChanged",this.changeSearchParams.bind(this,e)):(t=e.searchtext||"",e=e.modifier||"start",t===this.data.searchtext&&e===this.data.modifier||(this.data.searchtext=t,this.data.modifier=e,this.loadEntryList()))}changeEntryId(e){this.data.isDictionaryLoading?this.one("dictionaryChanged",this.changeEntryId.bind(this,e)):e!=this.data.entryId&&(this.data.entryId=e,this.trigger("entryIdChanged"))}searchEntryList(){this.loadEntryList(),url.setQuery(this.data.searchtext?{s:this.data.searchtext,m:this.data.modifier}:{},!0)}setEntryFlag(t,e){let a=this.data.entryList.find(e=>e.id==t);return a.isSaving=!0,this.trigger("entryListChanged",t),$.ajax({url:""+window.API_URL+this.data.dictId+"/entryflag.json",method:"POST",data:{id:t,flag:e}}).done(function(e,t){t.success&&(a.flag=[e])}.bind(this,e)).fail(e=>{M.toast({html:"Flag was not saved."})}).always(e=>{delete a.isSaving,this.trigger("entryListChanged",t)})}getFlag(t){return t?this.data.config.flagging.flags.find(e=>e.name==t):null}getFlagLabel(e){e=this.getFlag(e);return e?e.label:""}getFlagColor(e){e=this.getFlag(e);return e?e.color:""}getFlagTextColor(e){e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return!e||186<.299*parseInt(e[1],16)+.587*parseInt(e[2],16)+.114*parseInt(e[3],16)?"#000000":"#ffffff"}resetDictionary(){Object.assign(this.data,{isDictionaryLoading:!1,isDictionaryLoaded:!1,isEntryListLoading:!1,isEntryListLoaded:!1,isEntryLoading:!1,isEntryLoaded:!1,isDictionaryExamplesLoading:!1,config:null,doctype:null,doctypes:null,entryList:null,entry:null,dictId:null,entryId:null,searchtext:"",modifier:"start",mode:"view",userAccess:{canEdit:!1,canConfig:!1,canUpload:!1,canDownload:!1},dictionaryExamples:null,dictionaryExamplesHasMore:null})}loadSiteconfig(){return this.data.isSiteconfigLoading=!0,$.ajax({url:window.API_URL+"siteconfigread.json"}).done(e=>{this.data.siteconfig=e}).fail(e=>{M.toast({html:"Could not load app configuration."})}).always(e=>{this.data.isSiteconfigLoading=!1})}loadDictionaryList(){return this.data.isDictionaryListLoading=!0,this.trigger("dictionaryListLoadingChanged"),$.ajax(window.API_URL+"userdicts.json").done(e=>{this.data.dictionaryList=e.dicts||[],this.data.isDictionaryListLoaded=!0,this.trigger("dictionaryListChanged")}).fail(e=>{M.toast({html:"Dictionary list could not be loaded."})}).always(e=>{this.data.isDictionaryListLoading=!1,this.trigger("dictionaryListLoadingChanged")})}loadPublicDictionaryList(){return this.data.isPublicDictionaryListLoading=!0,this.trigger("isPublicDictionaryListLoadingChanged"),$.ajax(window.API_URL+"publicdicts.json").done(e=>{this.data.isPublicDictionaryListLoaded=!0,this.data.publicDictionaryList=e.entries||[],this.data.publicDictionaryLanguageList=[...new Set(this.data.publicDictionaryList.map(e=>e.lang))].filter(e=>!!e)}).fail(e=>{M.toast({html:"Dictionary list could not be loaded."})}).always(e=>{this.data.isPublicDictionaryListLoading=!1,this.trigger("isPublicDictionaryListLoadingChanged")})}loadActualDictionary(){this.data.dictId&&!this.data.isDictionaryLoading&&(this.data.isDictionaryLoading=!0,this.data.isDictionaryLoaded=!1,this.trigger("isDictionaryLoadingChanged"),this.loadDictionary(this.data.dictId).done(e=>{e.success?(Object.assign(this.data,{config:e.configs,userAccess:e.userAccess,xemaOverride:!1,xemplateOverride:!1,editingOverride:!1,userAccess:e.userAccess,dictConfigs:e.configs,doctype:e.doctype,doctypes:e.doctypes},e.publicInfo),window.xema=this.data.config.xema,this.data.isDictionaryLoaded=!0,this.data.isDictionaryLoading=!1,this.trigger("dictionaryChanged"),this.loadEntryList()):(this.data.isDictionaryLoading=!1,route("#/"))}).fail(e=>{this.data.isDictionaryLoading=!1,route("#/")}).always(e=>{this.trigger("isDictionaryLoadingChanged")}))}loadDictionary(t){return $.ajax(""+window.API_URL+t+"/config.json").done(e=>{e.success||M.toast({html:`Could not load ${t} dictionary.`})}).fail(function(e){M.toast({html:`Could not load ${t} dictionary.`})}.bind(this,t))}loadEntryList(t){var a=window.auth.data.authorized;if(this.data.dictId&&(!a||this.data.doctype)){this.data.isEntryListLoading=!0,this.trigger("entryListLoadingChanged");let e;t={searchtext:this.data.searchtext,modifier:this.data.modifier,howmany:t||this.data.dictConfigs.titling.numberEntries||1e3};return e=a?""+window.API_URL+this.data.dictId+`/${this.data.doctype}/entrylist.json`:""+window.API_URL+this.data.dictId+"/search.json",$.ajax({url:e,method:"POST",data:t}).done(e=>{this.data.entryList=e.entries,this.data.entryCount=e.total,this.data.isEntryListLoaded=!0,this.trigger("entryListChanged")}).fail(e=>{M.toast({html:"Entry list could not be loaded."})}).always(e=>{this.data.isEntryListLoading=!1,this.trigger("entryListLoadingChanged")})}}loadEntry(){if(this.data.entryId)return this.data.isEntryLoading=!0,this.trigger("isEntryLoadingChanged"),$.ajax({url:""+window.API_URL+this.data.dictId+"/entryread.json",method:"POST",data:{id:this.data.entryId}}).done(e=>{this.data.entry=e,this.data.isEntryLoaded=!0,this.trigger("entryChanged")}).fail(e=>{M.toast({html:"Entry could not be loaded."})}).always(()=>{this.data.isEntryLoading=!1,this.trigger("isEntryLoadingChanged")})}loadDictionaryLinks(){return $.ajax({url:""+window.API_URL+this.data.dictId+"/links.json"}).fail(e=>{M.toast({html:"Dictionary links could not be loaded."})})}loadDictionaryConfig(t){return $.ajax({url:""+window.API_URL+this.data.dictId+"/configread.json",method:"POST",data:{id:t}}).done(e=>{}).fail(e=>{M.toast({html:`Could not load the data ('${t}'): `+e.statusText})}).always(e=>{})}updateDictionaryConfig(t,e){return $.ajax({url:""+window.API_URL+this.data.dictId+"/configupdate.json",method:"POST",data:{id:t,content:JSON.stringify(e)}}).done(e=>{this.loadActualDictionary(),M.toast({html:"Saved"})}).fail(e=>{M.toast({html:`Could not save the data ('${t}'): `+e.statusText})}).always(e=>{})}createDictionary(e){return $.ajax({url:window.API_URL+"make.json",method:"POST",data:e}).done(e=>{e.success&&this.loadDictionaryList()}).fail(e=>{M.toast({html:"Could not create dictionary."})}).always(e=>{})}cloneDictionary(e){return $.ajax({url:""+window.API_URL+e+"/clone.json",method:"POST"}).done(e=>{this.data.dictionaryList=e.dicts,M.toast({html:"Dictionary was cloned."}),this.trigger("dictionaryListChanged"),this.changeDictionary(e.dictID),this.one("dictionaryChanged",()=>{route(e.dictID)})}).fail(e=>{M.toast({html:"Dictionary clone creation failed."})}).always(e=>{})}deleteDictionary(e){return $.ajax({url:""+window.API_URL+e+"/destroy.json",method:"POST"}).done(e=>{this.data.dictionaryList=e.dicts,M.toast({html:"Dictionary was deleted."}),this.trigger("dictionaryListChanged")}).fail(e=>{M.toast({html:"Dictionary clone creation failed."})}).always(e=>{})}uploadXML(e){return $.ajax({url:""+window.API_URL+this.data.dictId+"/upload.html",method:"POST",data:e,processData:!1,contentType:!1})}importXML(e){return $.ajax({url:""+window.API_URL+this.data.dictId+"/import.json",data:e}).done(e=>{e.finished&&(this.loadDictionaryList(),this.loadEntryList())})}reloadDictionaryExamples(){if(this.data.dictId&&!this.data.isDictionaryExamplesLoading)return this.data.isDictionaryExamplesLoading=!0,this.trigger("isDictionaryExamplesLoading"),$.ajax({url:""+window.API_URL+this.data.dictId+"/random.json",method:"POST"}).done(e=>{this.data.dictionaryExamples=e.entries,this.data.dictionaryExamplesHasMore=e.more,this.trigger("dictionaryExamplesChanged")}).fail(e=>{M.toast({html:"Could not load the examples."})}).always(e=>{this.data.isDictionaryExamplesLoading=!1,this.trigger("isDictionaryExamplesLoading")})}loadCorpora(){return $.ajax({url:window.API_URL+"skeget/corpora"}).fail(e=>{M.toast({html:"Could not load Sketch Engine corpora."})})}loadKontextCorpora(){return $.ajax({url:window.API_URL+"kontext/corpora"}).fail(e=>{M.toast({html:"Could not load Kontext corpora."})})}suggestUrl(){return $.ajax({url:window.API_URL+"makesuggest.json"}).fail(e=>{M.toast({html:"Could not generate URL of the new dictionary."})})}autoAddImages(e,t){return $.ajax({url:""+window.API_URL+this.data.dictId+"/autoimage.json",method:"POST",data:{addElem:e,addNumber:t}}).fail(e=>{M.toast({html:"Could not automatically add images."})})}autoAddImagesGetProgress(e){return $.ajax({url:""+window.API_URL+this.data.dictId+"/autoimageprogress.json",data:{jobId:e}}).fail(e=>{M.toast({html:"Could not check image generation progress."})})}startLinking(e){return $.ajax({url:""+window.API_URL+this.data.dictId+"/linknaisc.json",data:{otherdictID:e}}).fail(e=>{M.toast({html:"Could not initiate linking process."})})}linkingCheckIfRunning(){return $.ajax({url:""+window.API_URL+this.data.dictId+"/linking.json"}).fail(e=>{M.toast({html:"Could not check linking process."})})}linkingGetProgress(e,t){return $.ajax({url:""+window.API_URL+this.data.dictId+"/naiscprogress.json",data:{otherdictID:e,jobid:t}}).fail(e=>{M.toast({html:"Could not check the linking progress."})})}autonumberElements(e,t){return $.ajax({url:""+window.API_URL+this.data.dictId+"/autonumber.json",method:"POST",data:{countElem:e,storeElem:t}}).fail(e=>{M.toast({html:"Autonumbering failed."})})}};window.auth=new class{constructor(){observable(this),this.data={authorized:!1},this.resetUser()}resetUser(){Object.assign(this.data,{username:null,apiKey:null,consent:null,email:null,sessionkey:null,ske_apiKey:null,ske_username:null})}checkAuthCookie(){if(!this.data.username)return this.data.isCheckingAuth=!0,this.trigger("checkingAuthChanged"),$.ajax({url:window.API_URL+"login.json",method:"POST"}).done(e=>{e.success&&(Object.assign(this.data,e,{username:e.email}),this.data.authorized=!0,this.trigger("authChanged"))}).fail(e=>{}).always(()=>{this.data.isCheckingAuth=!1,this.trigger("checkingAuthChanged")})}login(e,t){return this.data.isCheckingAuth=!0,this.trigger("checkingAuthChanged"),$.ajax({url:window.API_URL+"login.json",method:"POST",data:{email:e,password:t}}).done(e=>{e.success&&(Object.assign(this.data,e,{username:e.email}),this.data.authorized=!0,this.trigger("authChanged"))}).fail(e=>{}).always(()=>{this.data.isCheckingAuth=!1,this.trigger("checkingAuthChanged")})}register(e){return $.ajax({url:window.API_URL+"signup.json",method:"POST",data:{email:e}}).done(e=>{this.trigger("registrationComplete",{error:e.success?"":"Incorrect e-mail."})}).fail(e=>{this.trigger("registrationComplete",{error:"Incorrect e-mail."})}).always(e=>{})}registerPassword(e,t){return $.ajax({url:window.API_URL+"createaccount.json",method:"POST",data:{token:e,password:t}}).done(e=>{this.trigger("registerPasswordComplete",{error:e.success?"":"Error while creating account."})}).fail(e=>{this.trigger("registerPasswordComplete",{error:"Error while creating account."})}).always(e=>{})}requestResetPassword(e){return $.ajax({url:window.API_URL+"forgotpwd.json",method:"POST",data:{email:e}})}resetPassword(e,t){return $.ajax({url:window.API_URL+"recoverpwd.json",method:"POST",data:{token:e,password:t}}).done(e=>{this.trigger("passwordResetComplete",{error:e.success?"":"Error while accessing account."})}).fail(e=>{this.trigger("passwordResetComplete",{error:"Error while accessing account."})}).always(e=>{})}verifyToken(e,t){return $.ajax({url:window.API_URL+"verifytoken.json",method:"POST",data:{token:e,type:t}})}consent(){return this.data.isCheckingAuth=!0,this.trigger("checkingAuthChanged"),$.ajax({url:window.API_URL+"consent.json",method:"POST",data:{consent:1}}).done(e=>{this.data.consent=!0,this.trigger("authChanged")}).fail(e=>{M.toast("Could not save the consent.")}).always(e=>{this.data.isCheckingAuth=!1,this.trigger("checkingAuthChanged")})}logout(){return this.data.isCheckingAuth=!0,this.trigger("checkingAuthChanged"),$.ajax({url:window.API_URL+"logout.json",method:"POST"}).done(()=>{this.data.authorized=!1,this.resetUser(),this.trigger("authChanged")}).fail(e=>{M.toast({html:"Could not log out."})}).always(()=>{this.data.isCheckingAuth=!1,this.trigger("checkingAuthChanged")})}_getCookie(t){return null!=document.cookie&&null!=document.cookie.split("; ").find(e=>e.startsWith(t+"="))?document.cookie.split("; ").find(e=>e.startsWith(t+"=")).split("=")[1].slice(1,-1):""}},h(i=function(n){if(n.store=window.store,n.dictData=window.store.data,n.auth=window.auth,n.authData=window.auth.data,n.bindings){n.boundFunctions={};let e=n.onMounted,t=n.onBeforeUnmount,a;n.onMounted=()=>{e.apply(n),n.bindings.forEach(e=>{a=n[e[2]].bind(n),n[e[0]].on(e[1],a),n.boundFunctions[e[1]+"_"+e[2]]=a})},n.onBeforeUnmount=()=>{n.bindings.forEach(e=>{n[e[0]].off(e[1],n.boundFunctions[e[1]+"_"+e[2]])}),t.apply(n)}}return n})||b("Plugins must be of type function"),it.has(i)&&b("This plugin was already installed"),it.add(i),it;window.AppUpdaterClass=class{constructor(e){this.URL=e.url,this.CHECK_INTERVAL=60*(e.interval||24)*60*1e3,this.onNewVersion=e.onNewVersion,this._intervalHandle=null,this.windowVersionKey=e.windowVersionKey||"version","@VERSION@"!=window[this.windowVersionKey]&&this.startTimer()}startTimer(){this._intervalHandle=setInterval(this.loadVersion.bind(this),this.CHECK_INTERVAL)}stopTimer(){clearInterval(this._intervalHandle),this._intervalHandle=null}loadVersion(){var e=(Math.random(1e6)+"").substr(2);$.ajax({url:this.URL+"?"+e}).done(this.onData.bind(this))}onData(e){"string"==typeof e&&(window[this.windowVersionKey]+"").trim()!=e.trim()&&(this.stopTimer(),"function"==typeof this.onNewVersion?this.onNewVersion():this.showNotification())}showNotification(){$(`<div class="newVersionNotification"
                    style="position: fixed; top: 0; left: 0; right: 0; z-index: 99999; padding: 20px; text-align: center; background-color: #fff; box-shadow: 0 3px 3px 0 rgb(0 0 0 / 14%), 0 1px 7px 0 rgb(0 0 0 / 12%), 0 3px 1px -1px rgb(0 0 0 / 20%);">
            <div class="newVersionNotificationTitle" style="font-size: 1.8rem; margin-bottom: 1rem;">New version available!</div>
            <div class="newVersionNotificationDesc">Please, reload the page to use the latest version.
                <button id="reloadPageButton" class="newVersionNotificationButton btn" style="margin-left: 1.5rem">
                    reload
                </button>
            </div>
        </div>`).appendTo($("body")),$("body").css("margin-top",$(".newVersionNotification").outerHeight()+"px"),$("#reloadPageButton").click(()=>{window.location.reload()})}};window.url=new class{constructor(){}setQuery(e,t){var a=window.location.href.split(/\?(.*)/s),e=this.stringifyQuery(e),a=""+a[0]+e;t?(history.pushState(null,null,a),route.base()):history.replaceState(null,null,a)}stringifyQuery(e){let t="";var a,n;for(n in e)a=e[n],n&&(t+=(t?"&":"")+n+"="+encodeURIComponent("boolean"==typeof a?+a:a));return t?"?"+t:""}},window.Screenful={createEnvelope:function(e){},resize:function(){var e=0|$("#header").outerHeight(),t=0|$("#footer").outerHeight(),a=0|$("#statusbar").outerHeight();$("#statusbar").css("bottom",t+"px"),$("#envelope").css("top",e+"px"),$("#envelope").css("bottom",t+a+2+"px")},status:function(e,t){window.parent!=window&&window.parent.Screenful?window.parent.Screenful.status(e,t):"alert"===t?($("#statusbar .alertmessage .text").html(e),$("#statusbar .alertmessage").show()):("wait"==t&&(e="<span class='wait'></span>"+e),"warn"==t&&(e="<span class='warn'></span>"+e),$("#statusbar .statusmessage").html(e))},wycLastID:0,wycCache:{},wyc:function(t,a){Xonomy.wycLastID++;var n="screenful_wyc_"+Xonomy.wycLastID;return Xonomy.wycCache[t]?a(Xonomy.wycCache[t]):($.ajax({url:t,dataType:"json",method:"POST"}).done(function(e){$("#"+n).replaceWith(a(e)),Xonomy.wycCache[t]=e}),"<span class='wyc' id='"+n+"'></span>")},formatXml:function(e){var r="",s=(e=e.replace(/(>)(<)(\/*)/g,"$1\r\n$2$3"),0);return jQuery.each(e.split("\r\n"),function(e,t){for(var a=0,n=(t.match(/.+<\/\w[^>]*>$/)?a=0:t.match(/^<\/\w/)?0!=s&&--s:a=t.match(/^<\w[^>]*[^\/]>.*$/)?1:0,""),i=0;i<s;i++)n+="  ";r+=n+t+"\r\n",s+=a}),r},cleanupXml:function(e){return e.trim().replace(/\>[\r\n]+\s*\</g,"><")},isWellFormedXml:function(e){var t=null;try{t=$.parseXML(e)}catch(e){}return!!t},isWellFormedJson:function(e){var t=null;try{t=JSON.parse(e)}catch(e){}return!!t},formatJson:function(e){return"string"==typeof e&&(e=JSON.parse(e)),JSON.stringify(e,null,"  ")}},Screenful.Editor={start:function(){Screenful.createEnvelope(),Screenful.Editor.historyUrl&&$("#history").html("<iframe name='historyframe' frameborder='0' scrolling='auto' src='"+Screenful.Editor.historyUrl+"'/>"),Screenful.Editor.populateToolbar(),Screenful.status(Screenful.Loc.ready),Screenful.Editor.updateToolbar(),Screenful.Editor.entryID&&Screenful.Editor.open(null,Screenful.Editor.entryID),$(document).on("keydown",function(e){37==e.which&&e.altKey&&window.parent!=window&&window.parent.Screenful&&window.parent.Screenful.Navigator&&(e.preventDefault(),e.stopImmediatePropagation(),window.parent.Screenful.Navigator.focusEntryList()),84==e.which&&(e.ctrlKey||e.metaKey)&&e.shiftKey&&window.parent!=window&&window.parent.Screenful&&window.parent.Screenful.Navigator&&(e.preventDefault(),e.stopImmediatePropagation(),window.parent.$("#searchbox").focus()),69==e.which&&(e.ctrlKey||e.metaKey)&&e.shiftKey&&(e.preventDefault(),e.stopImmediatePropagation(),$("#butEdit:visible").click(),$("#butView:visible").click()),83==e.which&&(e.ctrlKey||e.metaKey)&&e.shiftKey&&(e.preventDefault(),e.stopImmediatePropagation(),$("#butSave:visible").click()),78==e.which&&(e.ctrlKey||e.metaKey)&&e.shiftKey&&(e.preventDefault(),e.stopImmediatePropagation(),$("#butNew:visible").click())}),$(document).on("click",function(e){window.parent!=window&&window.parent.Screenful&&window.parent.Screenful.User&&window.parent.$(".menu:visible").slideUp()})},populateToolbar:function(){var e=$("#toolbar");if(e.empty(),$("<span id='errorMessage' style='display: none;'></span>").appendTo(e),Screenful.Editor.singleton||(Screenful.Editor.createUrl&&($("<button id='butNew' title='Ctrl + Shift + N' class='btn btn-secondary'>"+Screenful.Loc.new+"<i class='material-icons right'>add<i></button></button>").appendTo(e).on("click",Screenful.Editor.new),$("<span class='divider'></span>").appendTo(e)),$("<span style='line-height: 30px;'>ID</span>").appendTo(e),$("<input id='idbox' type='text' style='width: 4.4rem; height:1.8rem;'/>").appendTo(e).on("keyup",function(e){27==e.which&&$("#idbox").val(Screenful.Editor.entryID),13==e.which&&(Screenful.Editor.open(e),Screenful.Editor.onEntryIdChange($("#idbox").val()))}).on("keydown",function(e){e.altKey||e.stopPropagation()}),$("<button id='butOpen' class='btn btn-secondary'><i class='material-icons'>send</i></button>").appendTo(e).on("click",Screenful.Editor.open),$("<span class='divider'></span>").appendTo(e)),$("<button id='butSave' title='Ctrl + Shift + S' class='btn btn-secondary'>"+Screenful.Loc.save+"<span class='star' style='display: none'>*</span><i class='material-icons right'>save<i></button>").appendTo(e).on("click",Screenful.Editor.save),Screenful.Editor.viewer&&($("<button id='butEdit' title='Ctrl + Shift + E' class='btn btn-secondary'>"+Screenful.Loc.edit+"<i class='material-icons right'>edit<i></button>").appendTo(e).on("click",Screenful.Editor.edit),$("<button id='butView' title='Ctrl + Shift + E' class='btn btn-secondary'>"+Screenful.Loc.cancel+"<i class='material-icons right'>cancel<i></button>").appendTo(e).on("click",Screenful.Editor.view)),Screenful.Editor.singleton||$("<button id='butNonew' class='btn btn-secondary'>"+Screenful.Loc.cancel+"</button>").appendTo(e).on("click",Screenful.Editor.nonew),Screenful.Editor.leaveUrl&&$("<button id='butLeave' class='btn btn-secondary'>"+Screenful.Loc.cancel+"</button>").appendTo(e).on("click",function(){window.location=Screenful.Editor.leaveUrl}),Screenful.Editor.singleton||Screenful.Editor.createUrl&&$("<button id='butClone' class='btn btn-secondary'>"+Screenful.Loc.clone+"<i class='material-icons right'>content_copy<i></button>").appendTo(e).on("click",Screenful.Editor.clone),!Screenful.Editor.singleton&&Screenful.Editor.deleteUrl&&$("<button id='butDelete' class='btn btn-secondary'>"+Screenful.Loc.delete+"<i class='material-icons right'>delete<i></button>").appendTo(e).on("click",Screenful.Editor.delete),Screenful.Editor.allowAutosave&&$("<label id='labAutosave'><input type='checkbox' "+(Screenful.Editor.autosaveOn?"checked":"")+" id='chkAutosave'/> "+Screenful.Loc.autosave+"</label>").appendTo(e),Screenful.Editor.toolbarLinks)for(var t=0;t<Screenful.Editor.toolbarLinks.length;t++){var a=Screenful.Editor.toolbarLinks[t];$("<a class='iconYes' style='background-image: url("+a.image+")' href='"+a.href+"'>"+a.caption+"</a>").appendTo(e)}$("<div style='margin-left:auto'></div>").appendTo(e),Screenful.Editor.allowSourceCode&&$("<button id='butSourceCode' class='btn btn-secondary right' title='"+Screenful.Loc.sourceCode+"'><i class='material-icons'>code<i></button>").appendTo(e).on("click",Screenful.Editor.sourceCode),Screenful.History&&$("<button id='butHistory' class='btn btn-flat right' title='"+Screenful.Loc.history+"'><i class='material-icons'>history<i></button>").appendTo(e).on("click",Screenful.Editor.history)},entryID:null,updateToolbar:function(){$("#butHistory").addClass("btn-flat"),$("#butSourceCode").addClass("btn-flat"),$("#container").hasClass("withHistory")?($("#butEdit").hide(),$("#butView").hide(),$("#butNonew").hide(),$("#butSave").hide(),$("#butSave .star").hide(),$("#labAutosave").hide(),$("#butDelete").hide(),$("#butSourceCode").hide(),$("#butClone").hide(),$("#butHistory").removeClass("btn-flat").show()):$("#container").hasClass("withSourceCode")?($("#butEdit").hide(),$("#butView").hide(),$("#butNonew").hide(),$("#butSave").hide(),$("#butSave .star").hide(),$("#labAutosave").hide(),$("#butDelete").hide(),Screenful.Editor.entryID?$("#butHistory").show():$("#butHistory").hide(),$("#butClone").hide(),$("#butSourceCode").removeClass("btn-flat").show()):$("#container").hasClass("empty")?($("#butEdit").hide(),$("#butView").hide(),$("#butNonew").hide(),$("#butSave").hide(),$("#butSave .star").hide(),$("#labAutosave").hide(),$("#butDelete").hide(),$("#butSourceCode").hide(),$("#butClone").hide(),$("#idbox").val()?$("#butHistory").show():$("#butHistory").hide()):Screenful.Editor.entryID?Screenful.Editor.entryID&&0<$("#viewer").length?($("#butEdit").show(),$("#butView").hide(),$("#butNonew").hide(),$("#butSave").hide(),$("#butSave .star").hide(),$("#labAutosave").hide(),$("#butDelete").show(),$("#butSourceCode").hide(),$("#butClone").show(),$("#butHistory").show()):Screenful.Editor.entryID&&0<$("#editor").length&&($("#butEdit").hide(),$("#butView").show(),$("#butNonew").hide(),$("#butSave").show(),$("#butSave .star").hide(),$("#labAutosave").show(),$("#butDelete").show(),$("#butSourceCode").show(),$("#butClone").show(),$("#butHistory").show()):($("#butEdit").hide(),$("#butView").hide(),$("#butNonew").show(),$("#butSave").show(),$("#butSave .star").hide(),$("#labAutosave").show(),$("#butDelete").hide(),$("#butClone").hide(),$("#butSourceCode").show(),$("#butHistory").hide()),0==$("#butNonew:visible").length&&0==$("#butView:visible").length?$("#butLeave").show():$("#butLeave").hide()},new:function(e,t){Screenful.Editor.needsSaving&&!confirm(Screenful.Loc.unsavedConfirm)||($("#container").css("right",""),Screenful.Editor.needsSaving=!1,Screenful.Editor.hideHistory(),id=$("#idbox").val(""),Screenful.Editor.entryID=null,$("#container").removeClass("empty").removeClass("withHistory").removeClass("withSourceCode").html("<div id='editor'></div>"),t=t?{id:null,content:t}:null,Screenful.Editor.editor(document.getElementById("editor"),t),0<$("#container #editor .xonomy .layby").length&&$("#container").remove(".withHistory").css("right","15px"),$("#container").hide().fadeIn(),Screenful.status(Screenful.Loc.ready),Screenful.Editor.updateToolbar(),window.parent!=window&&window.parent.Screenful&&window.parent.Screenful.Navigator&&window.parent.Screenful.Navigator.setEntryAsCurrent(null))},edit:function(e,t){var a;Screenful.Editor.needsSaving&&!confirm(Screenful.Loc.unsavedConfirm)||($("#container").css("right",""),Screenful.Editor.needsSaving=!1,Screenful.Editor.hideHistory(),(t=t||Screenful.Editor.entryID)&&(a=Screenful.Editor.readUrl,$("#container").html("").addClass("empty"),Screenful.Editor.entryID=null,$("#idbox").val(t),Screenful.status(Screenful.Loc.reading,"wait"),$.ajax({url:a,dataType:"json",method:"POST",data:{id:t}}).done(function(e){e.success?(Screenful.Editor.entryID=e.id,$("#idbox").val(e.id),$("#container").removeClass("empty").html("<div id='editor'></div>"),Screenful.Editor.editor(document.getElementById("editor"),e),$("#container").hide().fadeIn(),0<$("#container .xonomy .layby").length&&$("#container").css("right","15px"),Screenful.status(Screenful.Loc.ready),Screenful.Editor.updateToolbar(),window.parent!=window&&window.parent.Screenful&&window.parent.Screenful.Navigator&&window.parent.Screenful.Navigator.setEntryAsCurrent(e.id),Screenful.Editor.addLinks(a.replace("entryread","entrylinks"),$("#editor"),t)):(Screenful.status(Screenful.Loc.readingFailed,"warn"),Screenful.Editor.updateToolbar()),Screenful.Editor.onModeChange("edit")})))},view:function(e,t){var a;Screenful.Editor.needsSaving&&!confirm(Screenful.Loc.unsavedConfirm)||($("#container").css("right",""),Screenful.Editor.needsSaving=!1,Screenful.Editor.hideHistory(),Screenful.Editor.viewer?(t=t||Screenful.Editor.entryID)&&(a=Screenful.Editor.readUrl,$("#container").removeClass("withHistory").removeClass("withSourceCode").html("").addClass("empty"),Screenful.Editor.entryID=null,$("#idbox").val(t),Screenful.status(Screenful.Loc.reading,"wait"),$.ajax({url:a,dataType:"json",method:"POST",data:{id:t}}).done(function(e){e.success?(Screenful.Editor.entryID=e.id,$("#idbox").val(e.id),$("#container").removeClass("empty").html("<div id='viewer'></div>"),Screenful.Editor.viewer(document.getElementById("viewer"),e),$("#container").hide().fadeIn(),Screenful.status(Screenful.Loc.ready),Screenful.Editor.updateToolbar(),window.parent!=window&&window.parent.Screenful&&window.parent.Screenful.Navigator&&window.parent.Screenful.Navigator.setEntryAsCurrent(e.id),Screenful.Editor.addLinks(a.replace("entryread","entrylinks"),$("#viewer"),t)):(Screenful.status(Screenful.Loc.readingFailed,"warn"),Screenful.Editor.updateToolbar()),Screenful.Editor.onModeChange("view")})):Screenful.Editor.edit(e,t))},addLinks:function(s,o,l){$.ajax({url:s,method:"GET",data:{id:l}}).done(function(e){var t=e.links;if($("#outlinks").remove(),$("#inlinks").remove(),0<t.out.length)for(var a in o.append('<span id="outlinks"><h2>Outgoing links</h2></span>'),t.out){var n,i,r=(n=t.out[a]).source_id;""!=n.source_preview&&(r=n.source_preview),i=""!=n.target_hw||""!=n.target_entry?"<ul>"+r+' → <a target="_top" href="/'+n.target_dict+"/edit/entry/view"+n.target_entry+'">'+n.target_dict+" : "+n.target_el+" : "+n.target_id+"</a>":"<ul>"+r+' → <a target="_top" href="/'+n.target_dict+'">'+n.target_dict+"</a> : "+n.target_el+" : "+n.target_id,n.confidence&&""!=n.confidence&&(i+=" ("+n.confidence+")"),0<$("#editor").length&&(i+=' <span class="linkdelete" data-href="/'+n.source_dict+"/links/delete/"+n.link_id+'">×delete</span>'),i+="</ul>",$("#outlinks").append(i)}if(0<t.in.length)for(var a in o.append('<span id="inlinks"><h2>Incoming links</h2></span>'),t.in)i=""!=(n=t.in[a]).source_hw?"<ul>"+n.target_id+' ← <a target="_top" href="/'+n.source_dict+"/edit/entry/view"+n.source_entry+'">'+n.source_dict+" : "+n.source_hw+" : "+n.source_el+" : "+n.source_id+"</a>":""!=n.source_entry?"<ul>"+n.target_id+' ← <a target="_top" href="/'+n.source_dict+"/edit/entry/view"+n.source_entry+'">'+n.source_dict+" : "+n.source_el+" : "+n.source_id+"</a>":"<ul>"+n.target_id+' ← <a target="_top" href="/'+n.source_dict+'">'+n.source_dict+"</a> : "+n.source_el+" : "+n.source_id,n.confidence&&""!=n.confidence&&(i+=" ("+n.confidence+")"),0<$("#editor").length&&(i+=' <span class="linkdelete" data-href="/'+n.target_dict+"/links/delete/"+n.link_id+'">×delete</span>'),i+="</ul>",$("#inlinks").append(i);$(".linkdelete").on("click",function(){confirm("Really delete link?")&&$.ajax({url:$(this).data("href"),method:"GET"}).done(function(e){Screenful.Editor.addLinks(s,o,l)})})})},nonew:function(e){Screenful.Editor.open(e,null)},open:function(e,t){Screenful.Editor.needsSaving&&!confirm(Screenful.Loc.unsavedConfirm)||(Screenful.Editor.needsSaving=!1,Screenful.Editor.hideHistory(),$("#container").hasClass("withSourceCode")&&$("#container").removeClass("withSourceCode").html("<div id='editor'></div>"),(t=t||$.trim($("#idbox").val()))?0<$("#editor").length&&Screenful.Editor.entryID?Screenful.Editor.edit(e,t):Screenful.Editor.view(e,t):($("#container").html("").addClass("empty"),Screenful.Editor.entryID=null,Screenful.status(Screenful.Loc.ready),Screenful.Editor.updateToolbar(),window.parent!=window&&window.parent.Screenful&&window.parent.Screenful.Navigator&&window.parent.Screenful.Navigator.setEntryAsCurrent(null)))},feedbackMessage:function(e){var t=Screenful.Loc[e.type];return(t=t||e.type)?t+=e.info||"":t="Server feedback: "+JSON.stringify(e),t},save:async function(e){Screenful.Editor.hideHistory();var t=Screenful.Editor.entryID,a=Screenful.Editor.harvester(document.getElementById("editor"));(a=await Promise.resolve(a))&&($("#container").addClass("empty"),t?(Screenful.status(Screenful.Loc.saving,"wait"),Screenful.Editor.saveWaitMsg&&($("#curtain").show(),$("#waiter").html(Screenful.Editor.saveWaitMsg).show()),$.ajax({url:Screenful.Editor.updateUrl,dataType:"json",method:"POST",data:{id:t,content:a}}).done(function(e){$("#waiter").hide(),$("#curtain").hide(),e.success?(Screenful.Editor.entryID=e.id,$("#idbox").val(e.id),Screenful.Editor.viewer&&!$("#chkAutosave").prop("checked")?($("#container").removeClass("empty").html("<div id='viewer'></div>"),Screenful.Editor.viewer(document.getElementById("viewer"),e)):($("#container").removeClass("empty").html("<div id='editor'></div>"),Screenful.Editor.editor(document.getElementById("editor"),e)),$("#container").hide().fadeIn(),e.feedback&&Screenful.status(Screenful.Editor.feedbackMessage(e.feedback),"alert"),Screenful.status(Screenful.Loc.ready),Screenful.Editor.needsSaving=!1,Screenful.Editor.updateToolbar(),e.redirUrl&&(window.location=e.redirUrl),Screenful.Editor.postUpdateRedirUrl&&(window.location=Screenful.Editor.postUpdateRedirUrl),window.parent!=window&&window.parent.Screenful&&window.parent.Screenful.Navigator&&window.parent.Screenful.Navigator.refresh(t,"update"),window.parent!=window&&window.parent.Screenful&&window.parent.Screenful.Aftersave?window.parent.Screenful.Aftersave.batch():Screenful.Aftersave&&Screenful.Aftersave.batch(),Screenful.Editor.onListChange()):Screenful.status(Screenful.Loc.savingFailed,"warn")})):(Screenful.status(Screenful.Loc.saving,"wait"),Screenful.Editor.saveWaitMsg&&($("#curtain").show(),$("#waiter").html(Screenful.Editor.saveWaitMsg).show()),$.ajax({url:Screenful.Editor.createUrl,dataType:"json",method:"POST",data:{content:a}}).done(function(e){$("#waiter").hide(),$("#curtain").hide(),e.success?(Screenful.Editor.entryID=e.id,$("#idbox").val(e.id),Screenful.Editor.viewer&&!$("#chkAutosave").prop("checked")?($("#container").removeClass("empty").html("<div id='viewer'></div>"),Screenful.Editor.viewer(document.getElementById("viewer"),e)):($("#container").removeClass("empty").html("<div id='editor'></div>"),Screenful.Editor.editor(document.getElementById("editor"),e)),$("#container").hide().fadeIn(),e.feedback&&Screenful.status(Screenful.Editor.feedbackMessage(e.feedback),"alert"),Screenful.status(Screenful.Loc.ready),Screenful.Editor.updateToolbar(),Screenful.Editor.needsSaving=!1,e.redirUrl&&(window.location=e.redirUrl),Screenful.Editor.postCreateRedirUrl&&(window.location=Screenful.Editor.postCreateRedirUrl),window.parent!=window&&window.parent.Screenful&&window.parent.Screenful.Navigator&&window.parent.Screenful.Navigator.refresh(),window.parent!=window&&window.parent.Screenful&&window.parent.Screenful.Aftersave?window.parent.Screenful.Aftersave.batch():Screenful.Aftersave&&Screenful.Aftersave.batch(),Screenful.Editor.onListChange(),Screenful.Editor.onEntryIdChange(e.id)):Screenful.status(Screenful.Loc.savingFailed,"warn")})))},delete:function(e){Screenful.Editor.hideHistory();var t=Screenful.Editor.entryID;confirm(Screenful.Loc.deleteConfirm)&&(Screenful.status(Screenful.Loc.deleting,"wait"),$.ajax({url:Screenful.Editor.deleteUrl,dataType:"json",method:"POST",data:{id:t}}).done(function(e){e.success?(Screenful.Editor.historyUrl||(Screenful.Editor.entryID=null,$("#idbox").val("")),$("#container").addClass("empty deleted").html(""),Screenful.status(Screenful.Loc.ready),Screenful.Editor.updateToolbar(),Screenful.Editor.postDeleteRedirUrl&&(window.location=Screenful.Editor.postDeleteRedirUrl),window.parent!=window&&window.parent.Screenful&&window.parent.Screenful.Navigator&&window.parent.Screenful.Navigator.refresh(t,"delete"),window.parent!=window&&window.parent.Screenful&&window.parent.Screenful.Aftersave?window.parent.Screenful.Aftersave.batch():Screenful.Aftersave&&Screenful.Aftersave.batch()):Screenful.status(Screenful.Loc.deletingFailed,"warn"),Screenful.Editor.onListChange()}))},needsSaving:!1,changed:function(){Screenful.Editor.needsSaving=!0,$("#butSave .star").show(),$("#chkAutosave").prop("checked")&&Screenful.Editor.save()},resetChanged:function(){Screenful.Editor.needsSaving=!1,$("#butSave .star").hide()},history:function(){var e;Screenful.Editor.needsSaving&&!confirm(Screenful.Loc.unsavedConfirm)||($("#container").css("right",""),Screenful.Editor.needsSaving=!1,$("#container").hasClass("withHistory")?(Screenful.Editor.hideHistory(),e=Screenful.Editor.entryID||$("#idbox").val(),Screenful.Editor.view(null,e)):(e=Screenful.Editor.entryID||$("#idbox").val(),$("#container").html("").removeClass("withSourceCode").addClass("withHistory"),$("#history").show(),Screenful.Editor.updateToolbar(),$("#container .xonomy .layby").remove(),Screenful.History.go(e)))},hideHistory:function(){$("#history").hide(),$("#container").hasClass("withHistory")&&$("#container").removeClass("withHistory").html("<div id='viewer'></div>"),Screenful.Editor.updateToolbar()},clone:function(t){var e;Screenful.Editor.entryID&&0<$("#editor").length?(e=Screenful.Editor.harvester(document.getElementById("editor")),Screenful.Editor.new(t,e)):Screenful.Editor.entryID&&0<$("#viewer").length&&(e=Screenful.Editor.readUrl,Screenful.status(Screenful.Loc.reading,"wait"),$.ajax({url:e,dataType:"json",method:"POST",data:{id:Screenful.Editor.entryID}}).done(function(e){e.success?Screenful.Editor.new(t,e.content):(Screenful.status(Screenful.Loc.readingFailed,"warn"),Screenful.Editor.updateToolbar())}))},sourceCode:function(){var e;$("#container").hasClass("withSourceCode")?Screenful.Editor.hideSourceCode():(e=Screenful.Editor.harvester(document.getElementById("editor")),Screenful.Editor.formatSourceCode&&(e=Screenful.Editor.formatSourceCode(e)),$("#container").removeClass("withHistory").addClass("withSourceCode"),$("#container").removeClass("empty").html("<div id='sourceCode'><textarea spellcheck='false'>"+e.replace(/\&/g,"&amp;")+"</textarea></div>"),$("#container").hide().fadeIn(),$("#sourceCode textarea").focus().on("keydown",function(e){e.stopPropagation()}),Screenful.Editor.updateToolbar())},hideSourceCode:function(){var e=$("#sourceCode textarea").val();Screenful.Editor.validateSourceCode&&!Screenful.Editor.validateSourceCode(e)?($("#errorMessage").html(Screenful.Loc.invalidSourceCode).fadeIn(),window.setTimeout(function(){$("#errorMessage").fadeOut()},1e3)):(Screenful.Editor.cleanupSourceCode&&(e=Screenful.Editor.cleanupSourceCode(e)),e={id:Screenful.Editor.entryID,content:e},$("#container").hasClass("withSourceCode")&&$("#container").removeClass("withSourceCode").html("<div id='editor'></div>"),Screenful.Editor.editor(document.getElementById("editor"),e),Screenful.Editor.updateToolbar(),Screenful.Editor.needsSaving=!1)},abandon:function(){Screenful.Editor.needsSaving=!1,$("#idbox").val(""),Screenful.Editor.open()}},Screenful.Loc={ready:"Ready.",find:"Find",reload:"Reload",reverse:"Reverse",shownumbers:"Number lines",golast:"Show last edited entry",cancel:"Cancel",more:"More",new:"New",edit:"Edit",save:"Save",delete:"Delete",listing:"Getting list...",listingFailed:"Failed to get list.",reading:"Getting item...",readingFailed:"No such item.",saving:"Saving...",savingFailed:"Failed to save.",saveFeedbackHeadwordExists:"WARNING: another entry with this headword exists. ID=",deleting:"Deleting...",deletingFailed:"Failed to delete.",deleteConfirm:"Careful now! Are you sure?",username:"E-mail address",password:"Password",login:"Log in",loginError:"Incorrect e-mail address or password.",logout:"Log out",anonymous:"anonymous user",home:"Home",title:"Title",titleEmpty:"The title should not be be empty.",url:"URL",urlEmpty:"The URL should not be be empty.",urlShort:"The URL should be at least three characters long.",urlInvalid:"The URL should not contain characters other than a-z, A-Z, 0-9 and hyphens.",urlTaken:"This URL is already taken.",template:"Template",create:"Create",finished:"Finished",changePwd:"Change your password",userProfile:"Your profile",signup:"Get an account",forgotPwd:"Forgot your password?",signupEmail:"To get an account send an e-mail to",newPassword:"New password",change:"Change",skeApiKey:"Your Sketch Engine API Key",skeApiKeyChanged:"Your API key has been changed.",skeUserName:"Your Sketch Engine username",skeUserNameChanged:"Your Sketch Engine username has been changed.",passwordChanged:"Your password has been changed.",passwordEmpty:"The password should not be empty.",passwordShort:"The password should be at least six characters long.",passwordWhitespace:"The password should not begin or end with a space.",ok:"OK",currentUrl:"Current URL",newUrl:"New URL",upload:"Upload",uploadPurge:"Purge before upload",uploadFail:"The upload has failed.",uploadSuccess:"The upload has succeeded.",history:"History",link:"Direct link",version:"Version",clone:"Clone",sourceCode:"Source code",invalidSourceCode:"Invalid source code",unsavedConfirm:"You have unsaved changes. Are you sure you want to lose them?",doItLater:"Do it later",badEmailError:"Incorrect e-mail address.",forgotPwdEmail:"If you have forgotten your password, enter your e-mail address and we will send you instructions on how to create a new one.",recoverPwd:"Get a new password",tokenSent:"We have sent you an e-mail with instructions on how to reset your password.",recoverPwdMsg:"You can change your password now.",changePwdMsg:"You can change your password here.",invalidToken:"This password reset link is invalid. It may have expired or has been used before.",signupInfoEmail:"To get a new account, enter your e-mail address and we will send you instructions.",signupButton:"Create new account",signupTokenSent:"We have sent you an e-mail with instructions on how to create a new account.",invalidSignupToken:"This signup link is invalid. It may have expired or has been used before.",setPwdMsg:"Please set your password now.",accountCreated:"We have created your account. You can now log in with your e-mail address and password.",signupAccountExists:"You are trying to create an account for e-mail address that already has an account.",autosave:"Autosave",flagging:"Flagging...",flaggingFailed:"Failed to flag the entry.",exactMatches:"Exact matches",partialMatches:"Partial matches",termsTitle:"Terms of Use",confirm:"Confirm",termsError:"Please, confirm Terms of Use before using Lexonomy."},Screenful.History={go:function(e){Screenful.Editor.entryID=e,$("#history").html("<div></div>"),$.ajax({url:Screenful.History.historyUrl,dataType:"json",method:"POST",data:{id:e}}).done(function(e){if(e.history.length)for(var t=0;t<e.history.length;t++){var a=e.history[t],n=(Screenful.History.isDeletion(a)||(n=$("<div class='revision'></div>").appendTo($("#history")),Screenful.History.drawRevision(n,a,e.history.length-t,0==t),0==t&&Screenful.History.zoomRevision(Screenful.History.getRevisionID(a),!0)),$("<div class='interRevision'></div>").appendTo($("#history")));Screenful.History.drawInterRevision(n,a)}})},drawRevision:function(e,t,a,n){e.data("hist",t),e.on("click",function(e){Screenful.History.zoomRevision(Screenful.History.getRevisionID(t),!0)}),Screenful.Editor.viewer&&(e.append(" <span class='pretty'></span>"),e.find(".pretty").on("click",function(e){Screenful.History.zoomRevision(Screenful.History.getRevisionID(t),!1),e.stopPropagation()})),n||(e.append("<span class='revive'>Revive</span>"),e.find(".revive").on("click",function(e){Screenful.History.reviveRevision(Screenful.History.getRevisionID(t),!1),e.stopPropagation()})),e.append("<span class='label'>"+Screenful.Loc.version+" "+a+"</span>")},drawInterRevision:function(e,t){e.append("<div class='arrowTop'></div>"),e.append("<div class='arrowMiddle'></div>"),e.append("<div class='arrowBottom'></div>"),e.append(Screenful.History.printAction(t))},zoomRevision:function(t,a){$(".revision").removeClass("current").removeClass("pretty").each(function(){var e=$(this);Screenful.History.getRevisionID(e.data("hist"))==t&&(e.addClass("current"),a||e.addClass("pretty"),(e=Screenful.History.fakeEntry(e.data("hist")))&&(!a&&Screenful.Editor.viewer?($("#container").removeClass("empty").html("<div id='viewer'></div>"),Screenful.Editor.viewer(document.getElementById("viewer"),e)):($("#container").removeClass("empty").html("<div id='editor'></div>"),Screenful.Editor.editor(document.getElementById("editor"),e,!0)),$("#container").hide().fadeIn()))})},reviveRevision:function(t){$(".revision").each(function(){var e=$(this);Screenful.History.getRevisionID(e.data("hist"))==t&&(e=Screenful.History.fakeEntry(e.data("hist")))&&(Screenful.Editor.hideHistory(),$("#container").removeClass("empty").html("<div id='editor'></div>"),Screenful.Editor.editor(document.getElementById("editor"),e),$("#container").hide().fadeIn(),Screenful.Editor.updateToolbar(),Screenful.Editor.changed())})}};var rt={d:(e,t)=>{for(var a in t)rt.o(t,a)&&!rt.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},i={};{rt.d(i,{default:()=>ca});const U=Symbol("We add this to docspec and related definitions to mark they've been verified to be valid.");class da{constructor(e,t,a,n){this.name=e,this.elementName=t,this.internalParent=a,this.htmlID=n,this.type="element",this.attributes=[],this.children=[]}parent(){return this.internalParent}hasAttribute(t){return this.attributes.some(e=>e.name===t)}getAttribute(t){return this.attributes.find(e=>e.name===t)}getAttributeValue(e,t){e=this.getAttribute(e);return e?e.value:t}hasElements(){return this.children.some(e=>"element"===e.type)}hasText(){return this.children.some(e=>"text"===e.type)}hasChildElement(t){return this.children.some(e=>e.htmlID===t&&"element"===e.type)}getText(){return this.children.map(e=>"text"===e.type?e.value:e.getText()).join("")}getChildElements(t){return this.children.filter(e=>"element"===e.type&&e.name===t)}getDescendantElements(t){return this.children.flatMap(e=>"element"===e.type?[e,...e.getDescendantElements(t)]:[])}getPrecedingSibling(){if(this.internalParent){let e=null;for(const t of this.internalParent.children){if(t===this)return e;"element"===t.type&&(e=t)}}return null}getFollowingSibling(){if(this.internalParent){let e=!1;for(const t of this.internalParent.children){if(e&&"element"===t.type)return t;e=e||t===this}}return null}setAttribute(e,t){this.hasAttribute(e)?this.getAttribute(e).value=t:this.attributes.push(new _(e,t,this))}addText(e){this.children.push(new X(e))}}class _{constructor(e,t,a=null,n){this.name=e,this.value=t,this.internalParent=a,this.htmlID=n,this.type="attribute"}parent(){return this.internalParent}}class X{constructor(e,t=null,a){this.value=e,this.internalParent=t,this.htmlID=a,this.type="text"}parent(){return this.internalParent}}const B={lang:"",mode:"nerd",namespaces:{},lastIDNum:0,docSpec:{},harvestCache:{},draggingID:null,notclick:!1,lastAskerParam:null,wycLastID:0,wycCache:{},warnings:[],currentHtmlId:null,currentFocus:null,keyNav:!1,keyboardEventCatcher:null,scrollableContainer:null,notKeyUp:!1,answer:null,wrapIndex:-1,wrapWord:"",setMode(e){"nerd"!=e&&"laic"!=e||(B.mode=e),"nerd"==e&&$(".xonomy").removeClass("laic").addClass("nerd"),"laic"==e&&$(".xonomy").removeClass("nerd").addClass("laic")},jsEscape:e=>String(e).replace(/\"/g,'\\"').replace(/\'/g,"\\'"),xmlEscape:(e,t)=>(t&&(e=B.jsEscape(e)),String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),xmlUnscape:e=>String(e).replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),isNamespaceDeclaration(e){var t="xmlns"==e?!0:!1;return t=6<=e.length&&"xmlns:"==e.substring(0,6)?!0:t},xml2js(e,t){for(var a=((e="documentElement"in(e="string"==typeof e?$.parseXML(e):e)?e.documentElement:e).nodeName),t=B.docSpec.getElementId(e.nodeName,t?t.name:void 0),n=new da(t,a),i=0;i<e.attributes.length;i++){var r=e.attributes[i];B.isNamespaceDeclaration(r.nodeName)?B.namespaces[r.nodeName]=r.value:"xml:space"!=r.name&&n.attributes.push(new _(r.nodeName,r.value,n))}for(i=0;i<e.childNodes.length;i++){var s=e.childNodes[i];1==s.nodeType&&n.children.push(B.xml2js(s,n)),3==s.nodeType&&n.children.push(new X(s.nodeValue||"",n))}return n},js2xml(e){if("text"==e.type)return B.xmlEscape(e.value);if("attribute"==e.type)return e.name+"='"+B.xmlEscape(e.value)+"'";if("element"!=e.type)return"";for(var t="<"+e.elementName,a=0;a<e.attributes.length;a++){var n=e.attributes[a];t+=" "+n.name+"='"+B.xmlEscape(n.value)+"'"}if(0<e.children.length){for(var i,r=!1,a=0;a<e.children.length;a++)"text"==(i=e.children[a]).type&&(r=!0);for(r&&(t+=" xml:space='preserve'"),t+=">",a=0;a<e.children.length;a++)"text"==(i=e.children[a]).type?t+=B.xmlEscape(i.value):"element"==i.type&&(t+=B.js2xml(i));t+="</"+e.elementName+">"}else t+="/>";return t},asFunction:(e,t)=>e instanceof Function?e:typeof e==typeof t?function(){return e}:function(){return t},verifyDocSpec(){$.isPlainObject(B.docSpec)||(B.docSpec={});var e=B.docSpec;e[U]||Object.assign(e,{allowLayby:"boolean"==typeof e.allowLayby&&e.allowLayby,allowModeSwitching:"boolean"==typeof e.allowModeSwitching&&e.allowModeSwitching,elements:$.isPlainObject(e.elements)?e.elements:{},getElementId:e.getElementId instanceof Function?e.getElementId:function(e,t){return e},laybyMessage:"string"==typeof e.laybyMessage?e.laybyMessage:"",onModeSwitch:e.onModeSwitch instanceof Function?e.onModeSwitch:function(){},onchange:e.onchange instanceof Function?e.onchange:function(){},unknownAttribute:e.unknownAttribute instanceof Function||$.isPlainObject(e.unknownAttribute)?e.unknownAttribute:void 0,unknownElement:e.unknownElement instanceof Function||$.isPlainObject(e.unknownElement)?e.unknownElement:void 0,validate:e.validate instanceof Function?e.validate:function(){},[U]:!0})},verifyDocSpecElement(e){if(!$.isPlainObject(B.docSpec.elements[e])){const t=B.docSpec.unknownElement;B.docSpec.elements[e]=t instanceof Function?t(e):$.isPlainObject(t)?Object.assign({},t):{}}const t=B.docSpec.elements[e];if(!t[U]){Object.assign(t,{asker:t.asker instanceof Function?t.asker:B.askLongString,askerParameter:t.askerParameter,attributes:$.isPlainObject(t.attributes)?t.attributes:{},backgroundColour:B.asFunction(t.backgroundColour,""),canDropTo:Array.isArray(t.canDropTo)?t.canDropTo:[],caption:"caption"in t?B.asFunction(t.caption,""):void 0,collapsed:B.asFunction(t.collapsed,!1),collapsible:B.asFunction(t.collapsible,!0),collapsoid:"collapsoid"in t?B.asFunction(t.collapsoid,""):void 0,displayName:"displayName"in t?B.asFunction(t.displayName,e):void 0,displayValue:"displayValue"in t?B.asFunction(t.displayValue,""):void 0,elementName:B.asFunction(t.elementName,e),hasText:B.asFunction(t.hasText,!1),inlineMenu:Array.isArray(t.inlineMenu)?t.inlineMenu:[],isInvisible:"isInvisible"in t?B.asFunction(t.isInvisible,!1):void 0,isReadOnly:"isReadOnly"in t?B.asFunction(t.isReadOnly,!1):void 0,localDropOnly:B.asFunction(t.localDropOnly,!1),menu:Array.isArray(t.menu)?t.menu:[],mustBeAfter:"mustBeAfter"in t?B.asFunction(t.mustBeAfter,[]):void 0,mustBeBefore:"mustBeBefore"in t?B.asFunction(t.mustBeBefore,[]):void 0,oneliner:B.asFunction(t.oneliner,!1),title:"title"in t?B.asFunction(t.title,""):void 0,[U]:!0});for(var a,n=0;n<t.menu.length;n++)B.verifyDocSpecMenuItem(t.menu[n]);for(n=0;n<t.inlineMenu.length;n++)B.verifyDocSpecMenuItem(t.inlineMenu[n]);for(a in t.attributes)B.verifyDocSpecAttribute(e,a)}},verifyDocSpecAttribute(e,t){B.verifyDocSpecElement(e);const a=B.docSpec.elements[e];if(!$.isPlainObject(a.attributes[t])){const U=B.docSpec.unknownAttribute;a.attributes[t]=U instanceof Function?U(e,t):$.isPlainObject(U)?Object.assign({},U):{}}var n=a.attributes[t];if(!n[U]){Object.assign(n,{asker:n.asker instanceof Function?n.asker:B.askString,askerParameter:n.askerParameter,caption:"caption"in n?B.asFunction(n.caption,""):void 0,displayName:"displayName"in n?B.asFunction(n.displayName,t):void 0,displayValue:"displayValue"in n?B.asFunction(n.displayValue,""):void 0,title:"title"in n?B.asFunction(n.title,""):void 0,isInvisible:"isInvisible"in n?B.asFunction(n.isInvisible,!1):void 0,isReadOnly:"isReadOnly"in n?B.asFunction(n.isReadOnly,!1):void 0,menu:Array.isArray(n.menu)?n.menu:[],shy:"shy"in n?B.asFunction(n.shy,!1):void 0,[U]:!0});for(var i=0;i<n.menu.length;i++)B.verifyDocSpecMenuItem(n.menu[i])}},verifyDocSpecMenuItem(e){e[U]||(Object.assign(e,{action:e.action instanceof Function?e.action:function(){},actionParameter:e.actionParameter,caption:B.asFunction(e.caption,"?"),expanded:B.asFunction(e.expanded,!1),hideIf:B.asFunction(e.hideIf,!1),icon:"string"==typeof e.icon?e.icon:void 0,keyCaption:"string"==typeof e.keyCaption?e.keyCaption:void 0,keyTrigger:e.keyTrigger instanceof Function?e.keyTrigger:void 0,menu:Array.isArray(e.menu)?e.menu:void 0,[U]:!0}),e.caption=B.asFunction(e.caption,"?"),e.action&&"function"==typeof e.action||(e.action=function(){}),e.hideIf||(e.hideIf=function(){return!1}),"function"!=typeof e.expanded&&(e.expanded=B.asFunction(e.expanded,!1)))},nextID:()=>"xonomy"+ ++B.lastIDNum,refresh(){$(".xonomy .textnode[data-value='']").each(function(){var e=$(this),t=e.closest(".element"),a=t.data("name"),a=B.docSpec.elements[a];a&&!a.hasText(B.harvestElement(t.toArray()[0]))&&e.remove()}),$(".xonomy .children ").each(function(){0!=this.childNodes.length||$(this.parentElement).hasClass("hasText")?($(this.parentElement).removeClass("noChildren"),B.updateCollapsoid(this.parentElement.id)):$(this.parentElement).addClass("noChildren")}),$(".xonomy .element.hasText > .children > .element").each(function(){0!=$(this).prev().length&&$(this).prev().hasClass("textnode")||$(this).before(B.renderText(new X(""))),0!=$(this).next().length&&$(this).next().hasClass("textnode")||$(this).after(B.renderText(new X("")))});for(var e=!1;!e;)for(var e=!0,t=$(".xonomy .textnode").toArray(),a=0;a<t.length;a++){var n=$(t[a]);if(n.next().hasClass("textnode")){var i=B.harvestText(n.toArray()[0]),r=B.harvestText(n.next().toArray()[0]);i.value+=r.value,n.next().remove(),n.replaceWith(B.renderText(i)),e=!1;break}}$(".xonomy .attribute ").each(function(){var e=this.getAttribute("data-name"),t=this.parentElement.parentElement.parentElement.getAttribute("data-name"),t=B.docSpec.elements[t],a=[];for(n in t.attributes){if(n==e)break;a.push(n)}var n,i=[],r=!1;for(n in t.attributes)n==e?r=!0:r&&i.push(n);if(0<i.length){var s=$(this);do{for(var o=!0,l=0;l<i.length;l++)0<s.prevAll("*[data-name='"+i[l]+"']").toArray().length&&(s.prev().before(s),o=!1)}while(!o)}if(0<a.length){var o,s=$(this);do{for(o=!0,l=0;l<a.length;l++)0<s.nextAll("*[data-name='"+a[l]+"']").toArray().length&&(s.next().after(s),o=!1)}while(!o)}}),$(".xonomy .attributes").each(function(){0==$(this).children(".shy").toArray().length?($(this.parentElement).children(".rollouter").hide().removeClass("rolledout"),$(this).removeClass("rolledout").css("display","")):$(this.parentElement).children(".rollouter").show()}),$(".xonomy .element").each(function(){var e,t=B.docSpec.elements[this.getAttribute("data-name")];t.displayName&&$(this).children(".tag").children(".name").html(B.textByLang(t.displayName(B.harvestElement(this)))),t.caption&&(e=B.harvestElement(this),$(this).children(".inlinecaption").html(B.textByLang(t.caption(e)))),t.displayValue&&!(e=B.harvestElement(this)).hasElements()&&$(this).children(".children").html(B.textByLang(B.renderDisplayText(e.getText(),t.displayValue(e)))),$(this).children(".tag.opening").children(".attributes").children(".attribute").each(function(){var e=t.attributes[this.getAttribute("data-name")];e.displayName&&$(this).children(".name").html(B.textByLang(e.displayName(B.harvestAttribute(this)))),e.displayValue&&$(this).children(".value").html(B.textByLang(e.displayValue(B.harvestAttribute(this)))),e.caption&&$(this).children(".inlinecaption").html("&nbsp;"+B.textByLang(e.caption(B.harvestAttribute(this)))+"&nbsp;")})})},harvest(){var e,t=$(".xonomy .element").first().toArray()[0],a=B.harvestElement(t);for(e in B.namespaces)a.hasAttribute(e)||a.attributes.push(new _(e,B.namespaces[e],a));return B.js2xml(a)},harvestElement(e,t){var a=e.id;if(!B.harvestCache[a]){const d=e.getAttribute("data-name"),c=B.docSpec.elements[d];for(var n=new da(d,c.elementName(),t,e.id),i=$(e).find(".tag.opening > .attributes").toArray()[0],r=0;r<i.children.length;r++){var s=i.children[r];$(s).hasClass("attribute")&&n.attributes.push(B.harvestAttribute(s,n))}for(var o=$(e).children(".children").toArray()[0],r=0;r<o.children.length;r++){var l=o.children[r];$(l).hasClass("element")?n.children.push(B.harvestElement(l,n)):$(l).hasClass("textnode")&&n.children.push(B.harvestText(l,n))}B.harvestCache[a]=n}return B.harvestCache[a]},harvestAttribute(e,t){var a=e.id;return B.harvestCache[a]||(B.harvestCache[a]=new _(e.getAttribute("data-name"),e.getAttribute("data-value"),t,e.id)),B.harvestCache[a]},harvestText(e,t){var a=e.id;return B.harvestCache[a]||(B.harvestCache[a]=new X(e.getAttribute("data-value"),t,e.id)),B.harvestCache[a]},harvestParentOf(e){var t=null,a=$("#"+e.htmlID).parent().closest(".element");if(1==a.toArray().length){for(var t=B.harvestElement(a.toArray()[0]),n=0;n<t.attributes.length;n++)t.attributes[n].htmlID==e.htmlID&&"attribute"===e.type&&(t.attributes[n]=e);for(n=0;n<t.children.length;n++)t.children[n].htmlID==e.htmlID&&"element"===e.type&&(t.children[n]=e)}return t},render(a,e,t){if(B.docSpec=t,B.verifyDocSpec(),B.namespaces={},"string"==typeof a){[...a.matchAll(/ ([a-zA-Z]+):[^=]+=/g)].forEach(function(e){var e=e[1],t=new RegExp("xmlns:"+e+"=");"xmlns"!=e&&"lxnm"!=e&&"xml"!=e&&null==a.match(t)&&(a=a.replace(" xmlns:lxnm"," xmlns:"+e+'="'+e+'" xmlns:lxnm'))});try{a=$.parseXML(a)}catch(e){$(".alertmessage .text",parent.document).html("Error parsing entry XML."),$(".alertmessage",parent.document).show(),a=$.parseXML("<entry/>")}}var n;a instanceof Document&&(a=B.xml2js(a)),"string"==typeof e&&(e=document.getElementById(e)),$(e).hasClass("xonomy")||$(e).addClass("xonomy"),$(e).addClass(B.mode),$(e).hide(),e.innerHTML=B.renderElement(a),$(e).show(),t.allowLayby&&(n="<div class='layby closed empty' onclick='if($(this).hasClass(\"closed\")) Xonomy.openLayby()' ondragover='Xonomy.dragOver(event)' ondragleave='Xonomy.dragOut(event)' ondrop='Xonomy.drop(event)''>",n=(n+="<span class='button closer' onclick='Xonomy.closeLayby();'>&nbsp;</span><span class='button purger' onclick='Xonomy.emptyLayby()'>&nbsp;</span><div class='content'></div>")+"<div class='message'>"+B.textByLang(t.laybyMessage)+"</div></div>",$(n).appendTo($(e))),t.allowModeSwitching&&$("<div class='modeSwitcher'><span class='nerd'></span><span class='laic'></span></div>").appendTo($(e)).on("click",function(e){"nerd"==B.mode?B.setMode("laic"):B.setMode("nerd"),t.onModeSwitch&&t.onModeSwitch(B.mode)}),$(document.body).off("click",B.clickoff),$(document.body).on("click",B.clickoff),$(document.body).off("dragend",B.dragend),$(document.body).on("dragend",B.dragend),B.refresh(),B.validate()},renderElement(e){for(var t=B.nextID(),a=(B.verifyDocSpecElement(e.name),B.docSpec.elements[e.name]),n="element",i=(a.canDropTo&&0<a.canDropTo.length&&(n+=" draggable"),a.hasText(e)),r=(i&&(n+=" hasText"),a.inlineMenu&&0<a.inlineMenu.length&&(n+=" hasInlineMenu"),a.oneliner(e)&&(n+=" oneliner"),a.collapsible(e)?a.collapsed(e)&&0<e.children.length&&(n+=" collapsed"):n+=" uncollapsible",a.isInvisible&&a.isInvisible(e)&&(n+=" invisible"),a.isReadOnly&&a.isReadOnly(e)&&(n+=" readonly"),0<a.menu.length&&(n+=" hasMenu"),e.elementName),s=(a.displayName&&(r=B.textByLang(a.displayName(e))),""),o=(a.title&&(s=B.textByLang(a.title(e))),""),o=(o=(o=(o=(o=(o+='<div data-name="'+e.name+'" id="'+t+'" class="'+n+'">')+'<span class="connector">'+('<span class="plusminus" onclick="Xonomy.plusminus(\''+t+"')\"></span>"))+'<span class="draghandle" draggable="true" ondragstart="Xonomy.drag(event)"></span>'+"</span>")+('<span class="tag opening focusable" style="background-color: '+a.backgroundColour(e)+';">'))+'<span class="punc">&lt;</span>'+('<span class="warner"><span class="inside" onclick="Xonomy.click(\''+t+"', 'warner')\"></span></span>"))+('<span class="name" title="'+s+'" onclick="Xonomy.click(\''+t+"', 'openingTagName')\">"+r+"</span>")+'<span class="attributes">',l=0;l<e.attributes.length;l++)B.verifyDocSpecAttribute(e.name,e.attributes[l].name),o+=B.renderAttribute(e.attributes[l],e.name);if(o=(o=(o+="</span>")+('<span class="rollouter focusable" onclick="Xonomy.click(\''+t+"', 'rollouter')\"></span>")+'<span class="punc slash">/</span>')+'<span class="punc">&gt;</span>'+"</span>",a.caption&&!a.oneliner(e)&&(o+="<span class='inlinecaption'>"+B.textByLang(a.caption(e))+"</span>"),o=o+('<span class="childrenCollapsed focusable" onclick="Xonomy.plusminus(\''+t+"', true)\">&middot;&middot;&middot;</span>")+'<div class="children">',a.displayValue&&!e.hasElements())o+=B.renderDisplayText(e.getText(),a.displayValue(e));else{var d="";for(!i||0!=e.children.length&&"element"!=e.children[0].type||(o+=B.renderText(new X(""))),l=0;l<e.children.length;l++){var c=e.children[l];i&&"element"==d&&"element"==c.type&&(o+=B.renderText(new X(""))),"text"==c.type?o+=B.renderText(c):"element"==c.type&&(o+=B.renderElement(c)),d=c.type}i&&1<e.children.length&&"element"==e.children[e.children.length-1].type&&(o+=B.renderText(new X("")))}return o=(o=(o=(o+="</div>")+('<span class="tag closing focusable" style="background-color: '+a.backgroundColour(e)+';">')+'<span class="punc">&lt;</span>')+'<span class="punc">/</span>'+('<span class="name" onclick="Xonomy.click(\''+t+"', 'closingTagName')\">"+r+"</span>"))+'<span class="punc">&gt;</span>'+"</span>",a.caption&&a.oneliner(e)&&(o+="<span class='inlinecaption'>"+B.textByLang(a.caption(e))+"</span>"),o+="</div>",e.htmlID=t,o},renderAttribute(e,t){var a=B.nextID(),n="attribute",i=!1,r=e.name,s=B.xmlEscape(e.value),o="",l="",t=(!t||(t=B.docSpec.elements[t].attributes[e.name])&&(t.displayName&&(r=B.textByLang(t.displayName(e))),t.displayValue&&(s=B.textByLang(t.displayValue(e))),t.title&&(l=B.textByLang(t.title(e))),t.caption&&(o=B.textByLang(t.caption(e))),t.isReadOnly&&t.isReadOnly(e)&&(i=!0,n+=" readonly"),t.isInvisible&&t.isInvisible(e)&&(n+=" invisible"),t.shy&&t.shy(e)&&(n+=" shy")),!1);(s.startsWith("https://")||s.startsWith("http://"))&&(t=!0);var d="",c=(c=(c=(c=(c="")+'<span data-name="'+e.name+'" data-value="'+B.xmlEscape(e.value)+'" id="'+a+'" class="'+n+'"><span class="punc"> </span>')+'<span class="warner"><span class="inside" onclick="Xonomy.click(\''+a+'\', \'warner\')"></span></span><span class="name attributeName focusable" title="'+l+'"'+(d=i?d:" onclick=\"Xonomy.click('"+a+"', 'attributeName')\"")+">"+r+"</span>")+'<span class="punc">=</span><span class="valueContainer attributeValue focusable"'+(d=i?"":" onclick=\"Xonomy.click('"+a+"', 'attributeValue')\"")+">")+'<span class="punc">"</span>'+(t?'<span class="value" title="'+s+'">URL</span>':'<span class="value">'+s+"</span>")+'<span class="punc">"</span></span>';return(o=t?'<a href="'+s+'" target='+e.name+">🔗</a> "+o:o)&&(c+="<span class='inlinecaption'>"+o+"</span>"),c+="</span>",e.htmlID=a,c},renderText(e){var t=B.nextID(),a="textnode focusable";""==$.trim(e.value)&&(a+=" whitespace"),""==e.value&&(a+=" empty");var n=(n=(n="")+'<div id="'+t+'" data-value="'+B.xmlEscape(e.value)+'" class="'+a+'"><span class="connector"></span>')+'<span class="value" onclick="Xonomy.click(\''+t+'\', \'text\')"><span class="insertionPoint"><span class="inside"></span></span><span class="dots"></span>'+B.chewText(e.value)+"</span></div>";return e.htmlID=t,n},renderDisplayText(e,t){var a=B.nextID(),n="textnode",i=(""==$.trim(t)&&(n+=" whitespace"),""==t&&(n+=" empty"),"");return(i=i+('<div id="'+a+'" data-value="'+B.xmlEscape(e)+'" class="'+n+'">')+'<span class="connector"></span>')+('<span class="value" onclick="Xonomy.click(\''+a+'\', \'text\')"><span class="insertionPoint"><span class="inside"></span></span><span class="dots"></span>'+B.textByLang(t))+"</span></div>"},chewText:e=>e.split(" ").map((e,t)=>`
			<span 
				data-index="${t}" 
				data-word="${e}" 
				class="word focusable" 
				onclick="if((event.ctrlKey||event.metaKey) && $(this).closest('.element').hasClass('hasInlineMenu')) Xonomy.wordClick(this)"
			>
				${e}
			</span>`).join(" "),wordClick(e){var t=$(e);B.clickoff(),0<t.closest(".readonly").length||(B.notclick=!0,t=t.attr("id"),t=B.inlineMenu(t),B.wrapIndex=$(e).data("index"),B.wrapWord=$(e).data("word"),t&&"<div class='menu'></div>"!=t&&(document.body.appendChild(B.makeBubble(t)),B.showBubble($(e).last())))},wrap(e,t){if(B.clickoff(),B.destroyBubble(),0<$("#"+e+" .children .element").length){$("#"+e+" .children .element").each(function(){B.unwrap(this.id)});const t=B.harvestElement(document.getElementById(e)).getText().split(" ");B.wrapIndex=t.indexOf(B.wrapWord)}let a=t.template;const n=t.placeholder,i=B.harvestElement(document.getElementById(e)),r=i.getText();let s="";if(0<B.wrapIndex){var t=r.split(" "),o=(s+=B.renderText(new X(t.slice(0,B.wrapIndex).join(" "))),a=a.replace(n,t[B.wrapIndex]),B.xml2js(a,i));s=(s+=" ")+B.renderElement(o);const e=o.htmlID;s=(s+=" ")+B.renderText(new X(t.slice(B.wrapIndex+1).join(" "))),window.setTimeout(function(){B.setFocus(e,"openingTagName")},100)}else a=a.replace(n,r),o=B.xml2js(a,i),s=B.renderElement(o);$("#"+e+" .children div").replaceWith(s),B.wrapIndex=-1,B.wrapWord="",B.changed()},unwrap(e){const t=$("#"+e)[0].parentElement.parentElement.id,a=(B.clickoff(),B.harvestElement(document.getElementById(e)));$("#"+e).replaceWith(B.renderText(new X(" "+a.getText()+" "))),B.changed(),window.setTimeout(function(){B.setFocus(t,"openingTagName")},100)},plusminus(e,t){var a=$("#"+e),n=a.children(".children");a.hasClass("collapsed")?(n.hide(),a.removeClass("collapsed"),a.hasClass("oneliner")?n.fadeIn("fast"):n.slideDown("fast")):t||(B.updateCollapsoid(e),a.hasClass("oneliner")?n.fadeOut("fast",function(){a.addClass("collapsed")}):n.slideUp("fast",function(){a.addClass("collapsed")})),window.setTimeout(function(){0<$("#"+B.currentHtmlId+" .opening:visible").length?B.setFocus(B.currentHtmlId,"openingTagName"):B.setFocus(B.currentHtmlId,"childrenCollapsed")},300)},updateCollapsoid(e){var a,e=$("#"+e),n="",t=e.data("name"),t=B.docSpec.elements[t];t.collapsoid?n=t.collapsoid(B.harvestElement(e.toArray()[0])):(a=!1,e.find(".textnode").each(function(){for(var e=B.harvestText(this).value,t=0;t<e.length;t++)n.length<35?n+=e[t]:a=!0;n+=" "}),n=n.replace(/  +/g," ").replace(/ +$/g,""),a&&!e.hasClass("oneliner")&&"..."!=n&&(n+="...")),""!=n&&n||(n="..."),e.children(".childrenCollapsed").html(n)},click(n,i){if(!B.notclick){B.clickoff(),B.currentHtmlId=n,B.currentFocus=i;var e,t=$("#"+n).hasClass("readonly")||0<$("#"+n).closest(".readonly").toArray().length;if(t||"openingTagName"!=i&&"closingTagName"!=i||($("#"+n).addClass("current"),""!=(o=B.elementMenu(n))&&"<div class='menu'></div>"!=o&&(document.body.appendChild(B.makeBubble(o)),"openingTagName"==i&&B.showBubble($("#"+n+" > .tag.opening > .name")),"closingTagName"==i&&B.showBubble($("#"+n+" > .tag.closing > .name"))),e=B.harvestElement(document.getElementById(n)),$("#"+n).trigger("xonomy-click-element",[e])),t||"attributeName"!=i||($("#"+n).addClass("current"),""!=(o=B.attributeMenu(n))&&"<div class='menu'></div>"!=o&&(document.body.appendChild(B.makeBubble(o)),B.showBubble($("#"+n+" > .name"))),e=B.harvestAttribute(document.getElementById(n)),$("#"+n).trigger("xonomy-click-attribute",[e])),!t&&"attributeValue"==i){$("#"+n+" > .valueContainer").addClass("current");var r=$("#"+n).attr("data-name"),a=$("#"+n).attr("data-value"),s=$("#"+n).closest(".element").attr("data-name");B.verifyDocSpecAttribute(s,r);const t=B.docSpec.elements[s].attributes[r];""!=(o=t.asker(a,t.askerParameter,B.harvestAttribute(document.getElementById(n))))&&"<div class='menu'></div>"!=o&&(document.body.appendChild(B.makeBubble(o)),B.showBubble($("#"+n+" > .valueContainer > .value")),B.answer=function(e){var t=document.getElementById(n),a=B.renderAttribute(new _(r,e),s);$(t).replaceWith(a),B.changed(),window.setTimeout(function(){B.clickoff(),B.setFocus($(a).prop("id"),i)},100)})}if(!t&&"text"==i){$("#"+n).addClass("current"),a=$("#"+n).attr("data-value"),s=$("#"+n).closest(".element").attr("data-name");const t=B.docSpec.elements[s],e=B.harvestElement(document.getElementById(n));""!=(o=t.asker(a,t.askerParameter,e))&&"<div class='menu'></div>"!=o&&(document.body.appendChild(B.makeBubble(o)),B.showBubble($("#"+n+" > .value")),B.answer=function(e){var t=document.getElementById(n),e=new X(e),a=B.renderText(e);$(t).replaceWith(a),B.changed(B.harvestText(document.getElementById(e.htmlID))),window.setTimeout(function(){B.clickoff(),B.setFocus($(a).prop("id"),i)},100)})}if("warner"==i){for(var o="",l=0;l<B.warnings.length;l++){var d=B.warnings[l];d.htmlID==n&&(o+="<div class='warning'>"+B.formatCaption(B.textByLang(d.text))+"</div>")}document.body.appendChild(B.makeBubble(o)),B.showBubble($("#"+n+" .warner .inside").first())}"rollouter"==i&&0<$("#"+n+" > .tag.opening > .attributes").children(".shy").toArray().length&&($("#"+n).children(".tag.opening").children(".rollouter").hasClass("rolledout")?($("#"+n).children(".tag.opening").children(".rollouter").removeClass("rolledout"),$("#"+n).children(".tag.opening").children(".attributes").slideUp("fast",function(){$(this).removeClass("rolledout").css("display","")})):($("#"+n).children(".tag.opening").children(".rollouter").addClass("rolledout"),$("#"+n).children(".tag.opening").children(".attributes").addClass("rolledout").hide().slideDown("fast")),window.setTimeout(function(){B.setFocus(n,"rollouter")},100)),B.notclick=!0}},clickoff(e){B.notclick||(B.currentHtmlId=null,B.currentFocus=null,B.destroyBubble(),$(".xonomy .current").removeClass("current"),$(".xonomy .focused").removeClass("focused")),B.notclick=!1},destroyBubble(){var e;document.getElementById("xonomyBubble")&&(e=document.getElementById("xonomyBubble"),$(e).find(":focus").blur(),e.parentElement.removeChild(e),B.keyboardEventCatcher&&B.keyboardEventCatcher.focus())},makeBubble(e){B.destroyBubble();var t=document.createElement("div");return t.id="xonomyBubble",t.className=B.mode,t.innerHTML="<div class='inside' onclick='Xonomy.notclick=true;'><div id='xonomyBubbleContent'>"+e+"</div></div>",t},showBubble(e){var n=$("#xonomyBubble"),t=e.offset(),a=$("body").width(),i=$(document).height(),r=n.outerHeight(),s=e.width(),e=(40<s&&(s=40),e.height());25<e&&(e=25),"laic"==B.mode&&(s-=25,e+=10);l=o="",t.top+e+r<=i?o=t.top+e+"px":0<i-t.top+5+r?l=i-t.top+5+"px":o=(i-r)/2+"px";var o,l,e={top:o,bottom:l};t.left<a/2?e.left=t.left+s-15+"px":(n.addClass("rightAnchored"),e.right=a-t.left+"px"),n.css(e),n.slideDown("fast",function(){(B.keyNav?n.find(".focusme"):n.find("input.focusme, select.focusme, textarea.focusme")).first().focus()}),n.on("keyup",function(e){27==e.which&&B.destroyBubble()}),B.keyNav&&n.find("div.focusme").on("keyup",function(e){var t,a;40==e.which&&(t=$(e.delegateTarget),(a=n.find(".focusme:visible")).eq(a.index(t[0])+1).focus()),38==e.which&&(t=$(e.delegateTarget),(a=n.find("div.focusme:visible")).eq(a.index(t[0])-1).focus()),13==e.which&&($(e.delegateTarget).click(),B.notclick=!1)})},askString(e,t,a){var n="";return(n=(n+="<form onsubmit='Xonomy.answer(this.val.value); return false'>")+("<input name='val' class='textbox focusme' style='width: "+(.5*$("body").width()-75)+"px;' value='"+B.xmlEscape(e)+"' onkeyup='Xonomy.notKeyUp=true'/>"))+" <input type='submit' value='OK'></form>"},askLongString(e,t,a){var n="";return(n=(n+="<form onsubmit='Xonomy.answer(this.val.value); return false'>")+("<textarea name='val' class='textbox focusme' spellcheck='false' style='width: "+(.5*$("body").width()-75)+"px; height: 150px;'>"+B.xmlEscape(e)+"</textarea>"))+"<div class='submitline'><input type='submit' value='OK'></div></form>"},askPicklist:(e,t,a)=>""+B.pickerMenu(t,e),askOpenPicklist(e,t){var a="";return(a=(a=a+B.pickerMenu(t,e)+"<form class='undermenu' onsubmit='Xonomy.answer(this.val.value); return false'>")+("<input name='val' class='textbox focusme' value='"+B.xmlEscape(e)+"' onkeyup='Xonomy.notKeyUp=true'/>"))+" <input type='submit' value='OK'></form>"},askRemote(a,n,e){var t="";return(n.searchUrl||n.createUrl)&&(t=t+("<form class='overmenu' onsubmit='return Xonomy.remoteSearch(\""+B.xmlEscape(n.searchUrl,!0)+'", "'+B.xmlEscape(n.urlPlaceholder,!0)+'", "'+B.xmlEscape(B.jsEscape(a))+"\")'>")+"<input name='val' class='textbox focusme' value=''/>",n.searchUrl&&(t+=" <button class='buttonSearch' onclick='return Xonomy.remoteSearch(\""+B.xmlEscape(n.searchUrl,!0)+'", "'+B.xmlEscape(n.urlPlaceholder,!0)+'", "'+B.xmlEscape(B.jsEscape(a))+"\")'>&nbsp;</button>"),n.createUrl&&(t+=" <button class='buttonCreate' onclick='return Xonomy.remoteCreate(\""+B.xmlEscape(n.createUrl,!0)+'", "'+B.xmlEscape(n.searchUrl||n.url,!0)+'", "'+B.xmlEscape(n.urlPlaceholder,!0)+'", "'+B.xmlEscape(B.jsEscape(a))+"\")'>&nbsp;</button>"),t+="</form>"),t+=B.wyc(n.url,function(e){if(n.add)for(var t=0;t<n.add.length;t++)e.push(n.add[t]);return B.pickerMenu(e,a)}),B.lastAskerParam=n,t},remoteSearch(e,t,n){var i=$("#xonomyBubble input.textbox").val();return e=e.replace(t,encodeURIComponent(i)),$("#xonomyBubble .menu").replaceWith(B.wyc(e,function(e){var t=[];if(""==i&&B.lastAskerParam.add)for(var a=0;a<B.lastAskerParam.add.length;a++)t.push(B.lastAskerParam.add[a]);for(a=0;a<e.length;a++)t.push(e[a]);return B.pickerMenu(t,n)})),!1},remoteCreate(e,t,a,n){var i=$.trim($("#xonomyBubble input.textbox").val());return""!=i&&(e=e.replace(a,encodeURIComponent(i)),t=t.replace(a,encodeURIComponent(i)),$.ajax({url:e,dataType:"text",method:"POST"}).done(function(e){B.wycCache[t]&&delete B.wycCache[t],$("#xonomyBubble .menu").replaceWith(B.wyc(t,function(e){return B.pickerMenu(e,n)}))})),!1},pickerMenu(e,t){var a="";a+="<div class='menu'>";for(var n=0;n<e.length;n++){var i=e[n],r=!0,a=a+("<div class='menuItem focusme techno"+((i="string"==typeof i?{value:i,caption:""}:i).value==t?" current":"")+"' tabindex='1' onclick='Xonomy.answer(\""+B.xmlEscape(i.value)+"\")'>")+"<span class='punc'>\"</span>";i.displayValue?(a+=B.textByLang(i.displayValue),r=!1):(a+=B.xmlEscape(i.value),i.value&&(r=!1)),a+="<span class='punc'>\"</span>",""!=i.caption&&(a+=" <span class='explainer "+(r?"alone":"")+"'>"+B.xmlEscape(B.textByLang(i.caption))+"</span>"),a+="</div>"}return a+"</div>"},wyc(t,a){B.wycLastID++;var n="xonomy_wyc_"+B.wycLastID;return B.wycCache[t]?a(B.wycCache[t]):($.ajax({url:t,dataType:"json",method:"POST"}).done(function(e){$("#"+n).replaceWith(a(e)),B.wycCache[t]=e}),"<span class='wyc' id='"+n+"'></span>")},toggleSubmenu(e){var t=$(e);t.hasClass("expanded")?t.find(".submenu").first().slideUp("fast",function(){t.removeClass("expanded")}):t.find(".submenu").first().slideDown("fast",function(){t.addClass("expanded")})},internalMenu(r,e,s,o,l=[]){B.harvestCache={};var d=s(document.getElementById(r)),e=e.map(function(e,t){B.verifyDocSpecMenuItem(e);var a,n,i="";return e.hideIf(d)||(l.push(t),t="",e.icon&&(t="<span class='icon'><img src='"+e.icon+"'/></span> "),a="",e.keyTrigger&&e.keyCaption&&(a="<span class='keyCaption'>"+B.textByLang(e.keyCaption)+"</span>"),e.menu?"<div class='submenu'></div>"!=(n=B.internalMenu(r,e.menu,s,o,l))&&(i=(i=(i+="<div class='menuItem"+(e.expanded(d)?" expanded":"")+"'>")+("<div class='menuLabel focusme' tabindex='0' onkeydown='if(Xonomy.keyNav && [37, 39].indexOf(event.which)>-1) Xonomy.toggleSubmenu(this.parentNode)' onclick='Xonomy.toggleSubmenu(this.parentNode)'>"+t+B.formatCaption(B.textByLang(e.caption(d)))+"</div>"))+n+"</div>"):i=(i+="<div class='menuItem focusme' tabindex='0' onclick='Xonomy.callMenuFunction("+o(l)+', "'+r+"\")'>")+(a+t+B.formatCaption(B.textByLang(e.caption(d))))+"</div>",l.pop()),i}),t=l.length?"submenu":"menu";return e.length?"<div class='"+t+"'>"+e.join("")+"</div>":""},attributeMenu(e){B.harvestCache={};var t=$("#"+e).attr("data-name"),a=$("#"+e).closest(".element").attr("data-name"),n=(B.verifyDocSpecAttribute(a,t),B.docSpec.elements[a].attributes[t]);return B.internalMenu(e,n.menu,B.harvestAttribute,function(e){return'Xonomy.docSpec.elements["'+a+'"].attributes["'+t+'"].menu['+e.join("].menu[")+"]"})},elementMenu(e){B.harvestCache={};var t=$("#"+e).attr("data-name"),a=B.docSpec.elements[t];return B.internalMenu(e,a.menu,B.harvestElement,function(e){return'Xonomy.docSpec.elements["'+t+'"].menu['+e.join("].menu[")+"]"})},inlineMenu(e){B.harvestCache={};var t=$("#"+e).attr("data-name"),a=B.docSpec.elements[t];return B.internalMenu(e,a.inlineMenu,B.harvestElement,function(e){return'Xonomy.docSpec.elements["'+t+'"].inlineMenu['+e.join("].menu[")+"]"})},callMenuFunction(e,t){e.action(t,e.actionParameter)},formatCaption:e=>(e=(e=(e=(e=e.replace(/\<(\/?)([^\>\/]+)(\/?)\>/g,"<span class='techno'><span class='punc'>&lt;$1</span><span class='elName'>$2</span><span class='punc'>$3&gt;</span></span>")).replace(/\@"([^\"]+)"/g,"<span class='techno'><span class='punc'>\"</span><span class='atValue'>$1</span><span class='punc'>\"</span></span>")).replace(/\@([^ =]+)=""/g,"<span class='techno'><span class='atName'>$1</span><span class='punc'>=\"</span><span class='punc'>\"</span></span>")).replace(/\@([^ =]+)="([^\"]+)"/g,"<span class='techno'><span class='atName'>$1</span><span class='punc'>=\"</span><span class='atValue'>$2</span><span class='punc'>\"</span></span>")).replace(/\@([^ =]+)/g,"<span class='techno'><span class='atName'>$1</span></span>"),deleteAttribute(e,t){B.clickoff();var e=document.getElementById(e),a=e.parentElement.parentElement.parentElement.id;e.parentElement.removeChild(e),B.changed(),window.setTimeout(function(){B.setFocus(a,"openingTagName")},100)},deleteElement(e,t){B.clickoff();var a=document.getElementById(e),n=a.parentElement.parentElement.id;$(a).fadeOut(function(){var e=a.parentElement;e.removeChild(a),B.changed(),0==$(e).closest(".layby").length&&window.setTimeout(function(){B.setFocus(n,"openingTagName")},100)})},newAttribute(e,t){B.clickoff();var a=$("#"+e),a=B.renderAttribute(new _(t.name,t.value),a.data("name"));$("#"+e+" > .tag.opening > .attributes").append(a),B.changed(),0<$("#"+e+" > .tag.opening > .attributes").children("[data-name='"+t.name+"'].shy").toArray().length&&($("#"+e).children(".tag.opening").children(".rollouter").hasClass("rolledout")||($("#"+e).children(".tag.opening").children(".rollouter").addClass("rolledout"),$("#"+e).children(".tag.opening").children(".attributes").addClass("rolledout").hide().slideDown("fast"))),""==t.value?B.click($(a).prop("id"),"attributeValue"):B.setFocus($(a).prop("id"),"attributeValue")},newElementChild(e,t){B.clickoff();var a=B.harvestElement(document.getElementById(e)),t=B.renderElement(B.xml2js(t,a)),n=$(t).hide();$("#"+e+" > .children").append(n),B.plusminus(e,!0),B.elementReorder(n.attr("id")),B.changed(),n.fadeIn(),window.setTimeout(function(){B.setFocus(n.prop("id"),"openingTagName")},100)},elementReorder(e){var e=document.getElementById(e),t=B.docSpec.elements[e.getAttribute("data-name")];if(t.mustBeBefore){var a=$(e),n=B.harvestElement(e),i=t.mustBeBefore(n);do{for(var r=!0,s=0;s<i.length;s++)0<a.prevAll("*[data-name='"+i[s]+"']").toArray().length&&(a.prev().before(a),r=!1)}while(!r)}if(t.mustBeAfter){var r,a=$(e),n=B.harvestElement(e),o=t.mustBeAfter(n);do{for(r=!0,s=0;s<o.length;s++)0<a.nextAll("*[data-name='"+o[s]+"']").toArray().length&&(a.next().after(a),r=!1)}while(!r)}},newElementBefore(e,t){B.clickoff();var a=B.harvestElement(document.getElementById(e)),t=B.renderElement(B.xml2js(t,a.parent())),n=$(t).hide();$("#"+e).before(n),B.elementReorder(n.prop("id")),B.changed(),n.fadeIn(),window.setTimeout(function(){B.setFocus(n.prop("id"),"openingTagName")},100)},newElementAfter(e,t){B.clickoff();var a=B.harvestElement(document.getElementById(e)),t=B.renderElement(B.xml2js(t,a.parent())),n=$(t).hide();$("#"+e).after(n),B.elementReorder(n.prop("id")),B.changed(),n.fadeIn(),window.setTimeout(function(){B.setFocus(n.prop("id"),"openingTagName")},100)},replace(e,t){var a=B.currentFocus,n=(B.clickoff(),"");"element"==t.type&&(n=B.renderElement(t)),"attribute"==t.type&&(n=B.renderAttribute(t)),"text"==t.type&&(n=B.renderText(t)),$("#"+e).replaceWith(n),B.changed(),window.setTimeout(function(){B.setFocus($(n).prop("id"),a)},100)},editRaw(n,i){var e=document.getElementById(n),r=B.harvestElement(e),t=i.fromJs?i.fromJs(r):i.fromXml?i.fromXml(B.js2xml(r)):B.js2xml(r);document.body.appendChild(B.makeBubble(B.askLongString(t))),B.showBubble($(e)),B.answer=function(e){var e=i.toJs?i.toJs(e,r):i.toXml?B.xml2js(i.toXml(e,r),r.parent()):B.xml2js(e,r.parent()),t=document.getElementById(n),a=B.renderElement(e);$(t).replaceWith(a),B.clickoff(),B.changed(),window.setTimeout(function(){B.setFocus($(a).prop("id"),"openingTagName")},100)}},duplicateElement(e){B.clickoff();var t=(t=(t=(t=document.getElementById(e).outerHTML).replace(/ id=['"]/g,function(e){return e+"d_"})).replace(/Xonomy\.click\(['"]/g,function(e){return e+"d_"})).replace(/Xonomy\.plusminus\(['"]/g,function(e){return e+"d_"}),a=$(t).hide();$("#"+e).after(a),B.changed(),a.fadeIn(),window.setTimeout(function(){B.setFocus(a.prop("id"),"openingTagName")},100)},moveElementUp(e){B.clickoff();var t,a,n=$("#"+e);0==n.closest(".layby > .content").length&&(B.insertDropTargets(e),0<=(a=(t=$(".xonomy .elementDropper").add(n)).index(n[0])-1)&&($(t[a]).replaceWith(n),B.changed(),n.hide().fadeIn()),B.dragend()),window.setTimeout(function(){B.setFocus(e,"openingTagName")},100)},moveElementDown(e){B.clickoff();var t,a,n=$("#"+e);0==n.closest(".layby > .content").length&&(B.insertDropTargets(e),(a=(t=$(".xonomy .elementDropper").add(n)).index(n[0])+1)<t.length&&($(t[a]).replaceWith(n),B.changed(),n.hide().fadeIn()),B.dragend()),window.setTimeout(function(){B.setFocus(e,"openingTagName")},100)},canMoveElementUp(e){var t=!1,a=$("#"+e);return 0==a.closest(".layby > .content").length&&(B.insertDropTargets(e),0<=$(".xonomy .elementDropper").add(a).index(a[0])-1&&(t=!0),B.dragend()),t},canMoveElementDown(e){var t=!1,a=$("#"+e);return 0==a.closest(".layby > .content").length&&(B.insertDropTargets(e),(e=$(".xonomy .elementDropper").add(a)).index(a[0])+1<e.length&&(t=!0),B.dragend()),t},mergeWithPrevious(e,t){var e=document.getElementById(e),e=B.harvestElement(e),a=e.getPrecedingSibling();a&&B.mergeElements(e,a)},mergeWithNext(e,t){var e=document.getElementById(e),e=B.harvestElement(e),a=e.getFollowingSibling();a&&B.mergeElements(e,a)},mergeElements(e,t){B.clickoff();var a=document.getElementById(e.htmlID);if(t&&"element"==t.type){for(var n=0;n<e.attributes.length;n++){var i=e.attributes[n];t.hasAttribute(i.name)&&""!=t.getAttributeValue(i.name)||(t.setAttribute(i.name,i.value),t.hasAttribute(i.name)&&$("#"+t.getAttribute(i.name).htmlID).remove(),$("#"+t.htmlID).find(".attributes").first().append($("#"+e.attributes[n].htmlID)))}var r=B.docSpec.elements[e.name],s=B.docSpec.elements[t.name];if(r.hasText(e)||s.hasText(t))for(""!=t.getText()&&""!=e.getText()&&(t.addText(" "),$("#"+t.htmlID).find(".children").first().append(B.renderText(new X(" ")))),n=0;n<e.children.length;n++)t.children.push(e.children[n]),$("#"+t.htmlID).find(".children").first().append($("#"+e.children[n].htmlID));else for(const a of e.children){var o=B.js2xml(a),l=!1;for(const e of t.children)if(o==B.js2xml(e)){l=!0;break}l||(t.children.push(a),$("#"+t.htmlID).find(".children").first().append($("#"+a.htmlID)),B.elementReorder(a.htmlID))}a.parentElement.removeChild(a),B.changed(),window.setTimeout(function(){B.setFocus(t.htmlID,"openingTagName")},100)}else window.setTimeout(function(){B.setFocus(e.htmlID,"openingTagName")},100)},deleteEponymousSiblings(e,t){var a=B.currentFocus;B.clickoff();for(var n=document.getElementById(e),i=n.parentElement.parentElement,r=$(i).children(".children").toArray()[0].children,s=[],o=0;o<r.length;o++)s.push(r[o]);for(o=0;o<s.length;o++){var l=s[o];$(l).hasClass("element")&&$(l).attr("data-name")==$(n).attr("data-name")&&l!=n&&l.parentElement.removeChild(l)}B.changed(),window.setTimeout(function(){B.setFocus(e,a)},100)},insertDropTargets(e){function t(e){var t=$(e).prop("id");return i[t]||(i[t]=B.harvestElement(e)),i[t]}var a=$("#"+e),e=(a.addClass("dragging"),a.attr("data-name")),n=B.docSpec.elements[e],i=($(".xonomy .element:visible > .children").append("<div class='elementDropper' ondragover='Xonomy.dragOver(event)' ondragleave='Xonomy.dragOut(event)' ondrop='Xonomy.drop(event)'><div class='inside'></div></div>"),$(".xonomy .element:visible > .children > .element").before("<div class='elementDropper' ondragover='Xonomy.dragOver(event)' ondragleave='Xonomy.dragOut(event)' ondrop='Xonomy.drop(event)'><div class='inside'></div></div>"),$(".xonomy .element:visible > .children > .text").before("<div class='elementDropper' ondragover='Xonomy.dragOver(event)' ondragleave='Xonomy.dragOut(event)' ondrop='Xonomy.drop(event)'><div class='inside'></div></div>"),$(".xonomy .dragging .children:visible > .elementDropper").remove(),$(".xonomy .dragging").prev(".elementDropper").remove(),$(".xonomy .dragging").next(".elementDropper").remove(),$(".xonomy .children:visible > .element.readonly .elementDropper").remove(),{});if(n.localDropOnly(t(a.toArray()[0]))&&n.canDropTo)for(var r=$(".xonomy .elementDropper").toArray(),s=0;s<r.length;s++)(d=r[s]).parentNode!=a.get(0).parentElement.parentElement.parentElement&&d.parentElement.removeChild(d);if(n.canDropTo)for(r=$(".xonomy .elementDropper").toArray(),s=0;s<r.length;s++){var o=(d=r[s]).parentElement.parentElement.getAttribute("data-name");$.inArray(o,n.canDropTo)<0&&d.parentElement.removeChild(d)}if(n.mustBeBefore)for(var l=t(a.toArray()[0]),r=$(".xonomy .elementDropper").toArray(),s=0;s<r.length;s++){var d=r[s];l.internalParent=t(d.parentElement.parentElement);for(var c=n.mustBeBefore(l),p=0;p<c.length;p++)0<$(d).prevAll("*[data-name='"+c[p]+"']").toArray().length&&d.parentElement.removeChild(d)}if(n.mustBeAfter)for(l=t(a.toArray()[0]),r=$(".xonomy .elementDropper").toArray(),s=0;s<r.length;s++){d=r[s],l.internalParent=t(d.parentElement.parentElement);for(var u=n.mustBeAfter(l),p=0;p<u.length;p++)0<$(d).nextAll("*[data-name='"+u[p]+"']").toArray().length&&d.parentElement.removeChild(d)}},drag(e){e.dataTransfer.effectAllowed="move";var t=e.target.parentElement.parentElement.id;e.dataTransfer.setData("text",t),setTimeout(function(){B.clickoff(),B.insertDropTargets(t),B.draggingID=t,B.refresh()},10)},dragOver(e){e.preventDefault(),e.dataTransfer.dropEffect="move",($(e.currentTarget).hasClass("layby")?$(e.currentTarget):$(e.target.parentElement)).addClass("activeDropper")},dragOut(e){e.preventDefault(),($(e.currentTarget).hasClass("layby")?$(e.currentTarget):$(".xonomy .activeDropper")).removeClass("activeDropper")},drop(e){e.preventDefault();var t=document.getElementById(B.draggingID);$(e.currentTarget).hasClass("layby")?($(t).hide(),$(".xonomy .layby > .content").append(t)):($(t).hide(),$(e.target.parentElement).replaceWith(t)),$(t).fadeIn(function(){B.changed()}),B.openCloseLayby(),B.recomputeLayby()},dragend(e){$(".xonomy .attributeDropper").remove(),$(".xonomy .elementDropper").remove(),$(".xonomy .dragging").removeClass("dragging"),B.refresh(),$(".xonomy .layby").removeClass("activeDropper")},openCloseLayby(){0<$(".xonomy .layby > .content > *").length?$(".xonomy .layby").removeClass("closed").addClass("open"):$(".xonomy .layby").removeClass("open").addClass("closed")},openLayby(){$(".xonomy .layby").removeClass("closed").addClass("open")},closeLayby(){window.setTimeout(function(){$(".xonomy .layby").removeClass("open").addClass("closed")},10)},emptyLayby(){$(".xonomy .layby .content").html(""),$(".xonomy .layby").removeClass("nonempty").addClass("empty")},recomputeLayby(){0<$(".xonomy .layby > .content > *").length?$(".xonomy .layby").removeClass("empty").addClass("nonempty"):$(".xonomy .layby").removeClass("nonempty").addClass("empty")},newElementLayby(e){B.clickoff();e=B.renderElement(B.xml2js(e)),e=$(e).hide();$(".xonomy .layby > .content").append(e),B.refresh(),e.fadeIn(),B.openCloseLayby(),B.recomputeLayby()},changed(e){B.harvestCache={},B.refresh(),B.validate(),B.docSpec.onchange(e)},validate(){var e=B.harvestElement($(".xonomy .element").toArray()[0]);$(".xonomy .invalid").removeClass("invalid"),B.warnings=[],B.docSpec.validate(e);for(var t=0;t<B.warnings.length;t++){var a=B.warnings[t];$("#"+a.htmlID).addClass("invalid")}},textByLang(e){for(var t=e=e||"",a=e.split("|"),n=0;n<a.length;n++){var i=$.trim(a[n]);0==i.indexOf(B.lang+":")&&(t=i.substring((B.lang+":").length,t.length))}return $.trim(t)},startKeyNav(e,t){B.keyNav=!0;var a=$(e),e=(e||(a=$(".xonomy")),$(t));t||(e=a),a.attr("tabindex","0"),a.on("keydown",B.key),$(document).on("keydown",function(e){-1<[32,37,38,39,40].indexOf(e.keyCode)&&0==$("input:focus, select:focus, textarea:focus").length&&e.preventDefault()}),B.keyboardEventCatcher=a,B.scrollableContainer=e},setFocus(e,t){B.keyNav&&($(".xonomy .current").removeClass("current"),$(".xonomy .focused").removeClass("focused"),("attributeValue"==t?$("#"+e+" > .valueContainer"):$("#"+e)).addClass("current").addClass("focused"),B.currentHtmlId=e,B.currentFocus=t,"openingTagName"==B.currentFocus&&$("#"+e+" > .tag.opening").first().addClass("focused"),"closingTagName"==B.currentFocus&&$("#"+e+" > .tag.closing").last().addClass("focused"),"childrenCollapsed"==B.currentFocus&&$("#"+e+" > .childrenCollapsed").last().addClass("focused"),"rollouter"==B.currentFocus&&$("#"+e+" > .tag.opening > .rollouter").last().addClass("focused"))},key(e){var t;B.notKeyUp||(e.shiftKey||$("#xonomyBubble").length?$("#xonomyBubble").length?13==e.which&&e.ctrlKey&&(e.preventDefault(),e.stopImmediatePropagation(),$("#xonomyBubble form").trigger("submit")):B.keyboardMenu(e):27==e.which?(e.preventDefault(),e.stopImmediatePropagation(),B.destroyBubble()):13==e.which?(e.preventDefault(),e.stopImmediatePropagation(),"childrenCollapsed"==B.currentFocus?B.plusminus(B.currentHtmlId,!0):(B.click(B.currentHtmlId,B.currentFocus),B.clickoff())):(e.ctrlKey||e.metaKey)&&40==e.which?(e.preventDefault(),e.stopImmediatePropagation(),B.scrollableContainer.scrollTop(B.scrollableContainer.scrollTop()+60)):(e.ctrlKey||e.metaKey)&&38==e.which?(e.preventDefault(),e.stopImmediatePropagation(),B.scrollableContainer.scrollTop(B.scrollableContainer.scrollTop()-60)):(e.ctrlKey||e.metaKey)&&-1<[37,39].indexOf(e.which)?(e.preventDefault(),e.stopImmediatePropagation(),(t=$("#"+B.currentHtmlId)).hasClass("element")&&!t.hasClass("uncollapsible")&&(39==e.which&&t.hasClass("collapsed")&&B.plusminus(B.currentHtmlId),37!=e.which||t.hasClass("collapsed")||B.plusminus(B.currentHtmlId))):-1<[37,38,39,40].indexOf(e.which)&&!e.altKey&&(e.preventDefault(),e.stopImmediatePropagation(),B.currentHtmlId?0==$(".xonomy .focused").length?B.setFocus(B.currentHtmlId,B.currentFocus):(40==e.which&&B.goDown(),38==e.which&&B.goUp(),39==e.which&&B.goRight(),37==e.which&&B.goLeft()):B.setFocus($(".xonomy .element").first().prop("id"),"openingTagName"))),B.notKeyUp=!1},keyboardMenu(n){B.harvestCache={};var e,t,a=$("#"+B.currentHtmlId),i=null,r=null;if(a.hasClass("element")?(i=B.harvestElement(a[0]),t=a.attr("data-name"),r=B.docSpec.elements[t].menu):a.hasClass("attribute")&&(i=B.harvestAttribute(a[0]),e=a.attr("data-name"),t=a.closest(".element").attr("data-name"),r=B.docSpec.elements[t].attributes[e].menu),r){B.harvestCache={};function s(e){var t=null;for(const a of e)if(a.menu?t=s(a.menu):a.keyTrigger&&!a.hideIf(i)&&a.keyTrigger(n)&&(t=a),t)break;return t}a=s(r);if(a)return B.callMenuFunction(a,B.currentHtmlId),B.clickoff(),!0}return!1},goDown(){var e,t,a;"openingTagName"!=B.currentFocus&&"closingTagName"!=B.currentFocus&&"text"!=B.currentFocus?B.goRight():(e=a=$("#"+B.currentHtmlId),"openingTagName"==B.currentFocus&&(e=a.find(".tag.opening").first()),"closingTagName"==B.currentFocus&&(e=a.find(".tag.closing").last()),t=(t=$(".xonomy .focusable:visible").not(".attributeName").not(".attributeValue").not(".childrenCollapsed").not(".rollouter")).add(a),"openingTagName"==B.currentFocus&&a.hasClass("oneliner")&&(t=t.not("#"+B.currentHtmlId+" .tag.closing").not("#"+B.currentHtmlId+" .children *")),"openingTagName"==B.currentFocus&&a.hasClass("oneliner")&&(t=t.not("#"+B.currentHtmlId+" .textnode")),a.hasClass("collapsed")&&(t=t.not("#"+B.currentHtmlId+" .tag.closing")),a.hasClass("textnode")&&$(".xonomy").hasClass("nerd")&&(t=a.closest(".element").find(".tag.closing").last()),(a=(t=a.hasClass("textnode")&&$(".xonomy").hasClass("laic")?a.closest(".element").next().find(".focusable:visible").first():t).eq(t.index(e[0])+1)).hasClass("opening")&&B.setFocus(a.closest(".element").prop("id"),"openingTagName"),a.hasClass("closing")&&B.setFocus(a.closest(".element").prop("id"),"closingTagName"),a.hasClass("textnode")&&B.setFocus(a.prop("id"),"text"))},goUp(){var e,t,a;"openingTagName"!=B.currentFocus&&"closingTagName"!=B.currentFocus&&"text"!=B.currentFocus?B.goLeft():(e=a=$("#"+B.currentHtmlId),"openingTagName"==B.currentFocus&&(e=a.find(".tag.opening").first()),"closingTagName"==B.currentFocus&&(e=a.find(".tag.closing").last()),t=(t=(t=(t=$(".xonomy .focusable:visible").not(".attributeName").not(".attributeValue").not(".childrenCollapsed").not(".rollouter")).not(".element .oneliner .tag.closing")).not(".element .oneliner .textnode")).not(".element .collapsed .tag.closing"),a.hasClass("textnode")&&(t=a.closest(".element").find(".tag.opening").first().add(a)),e.hasClass("closing")&&a.hasClass("hasText")&&(t=t.not("#"+B.currentHtmlId+" .children *:not(:first-child)")),e.hasClass("opening")&&a.closest(".element").prev().hasClass("hasText")&&(a=a.closest(".element").prev().prop("id"),t=t.not("#"+a+" .children *:not(:first-child)")),0<t.index(e[0])&&((a=t.eq(t.index(e[0])-1)).hasClass("opening")&&B.setFocus(a.closest(".element").prop("id"),"openingTagName"),a.hasClass("closing")&&B.setFocus(a.closest(".element").prop("id"),"closingTagName"),a.hasClass("textnode")&&B.setFocus(a.prop("id"),"text")))},goRight(){var e=$("#"+B.currentHtmlId),t=e,e=("openingTagName"==B.currentFocus&&(t=e.find(".tag.opening").first()),"closingTagName"==B.currentFocus&&(t=e.find(".tag.closing").last()),"attributeName"==B.currentFocus&&(t=e.find(".attributeName").first()),"attributeValue"==B.currentFocus&&(t=e.find(".attributeValue").first()),"childrenCollapsed"==B.currentFocus&&(t=e.find(".childrenCollapsed").first()),"rollouter"==B.currentFocus&&(t=e.find(".rollouter").first()),$(".xonomy .focusable:visible")),e=e.eq(e.index(t[0])+1);e.hasClass("attributeName")&&B.setFocus(e.closest(".attribute").prop("id"),"attributeName"),e.hasClass("attributeValue")&&B.setFocus(e.closest(".attribute").prop("id"),"attributeValue"),e.hasClass("opening")&&B.setFocus(e.closest(".element").prop("id"),"openingTagName"),e.hasClass("closing")&&B.setFocus(e.closest(".element").prop("id"),"closingTagName"),e.hasClass("textnode")&&B.setFocus(e.prop("id"),"text"),e.hasClass("childrenCollapsed")&&B.setFocus(e.closest(".element").prop("id"),"childrenCollapsed"),e.hasClass("rollouter")&&B.setFocus(e.closest(".element").prop("id"),"rollouter")},goLeft(){var e=$("#"+B.currentHtmlId),t=e,e=("openingTagName"==B.currentFocus&&(t=e.find(".tag.opening").first()),"closingTagName"==B.currentFocus&&(t=e.find(".tag.closing").last()),"attributeName"==B.currentFocus&&(t=e.find(".attributeName").first()),"attributeValue"==B.currentFocus&&(t=e.find(".attributeValue").first()),"childrenCollapsed"==B.currentFocus&&(t=e.find(".childrenCollapsed").first()),"rollouter"==B.currentFocus&&(t=e.find(".rollouter").first()),$(".xonomy .focusable:visible")),e=e.eq(e.index(t[0])-1);e.hasClass("attributeName")&&B.setFocus(e.closest(".attribute").prop("id"),"attributeName"),e.hasClass("attributeValue")&&B.setFocus(e.closest(".attribute").prop("id"),"attributeValue"),e.hasClass("opening")&&B.setFocus(e.closest(".element").prop("id"),"openingTagName"),e.hasClass("closing")&&B.setFocus(e.closest(".element").prop("id"),"closingTagName"),e.hasClass("textnode")&&B.setFocus(e.prop("id"),"text"),e.hasClass("childrenCollapsed")&&B.setFocus(e.closest(".element").prop("id"),"childrenCollapsed"),e.hasClass("rollouter")&&B.setFocus(e.closest(".element").prop("id"),"rollouter")}},ca=(B.verifyDocSpec(),B)}S=!(i=function(){function x(){for(var e=0,t={};e<arguments.length;e++){var a,n=arguments[e];for(a in n)t[a]=n[a]}return t}return function e(h){function m(e,t,a){var n,i;if("undefined"!=typeof document){if(1<arguments.length){"number"==typeof(a=x({path:"/"},m.defaults,a)).expires&&((i=new Date).setMilliseconds(i.getMilliseconds()+864e5*a.expires),a.expires=i),a.expires=a.expires?a.expires.toUTCString():"";try{n=JSON.stringify(t),/^[\{\[]/.test(n)&&(t=n)}catch(e){}t=h.write?h.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var r,s="";for(r in a)a[r]&&(s+="; "+r,!0!==a[r]&&(s+="="+a[r]));return document.cookie=e+"="+t+s}e||(n={});for(var o=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,d=0;d<o.length;d++){var c=o[d].split("=");'"'===(u=c.slice(1).join("=")).charAt(0)&&(u=u.slice(1,-1));try{var p=c[0].replace(l,decodeURIComponent),u=h.read?h.read(u,p):h(u,p)||u.replace(l,decodeURIComponent);if(this.json)try{u=JSON.parse(u)}catch(e){}if(e===p){n=u;break}e||(n[p]=u)}catch(e){}}return n}}return(m.set=m).get=function(e){return m.call(m,e)},m.getJSON=function(){return m.apply({json:!0},[].slice.call(arguments))},m.defaults={},m.remove=function(e,t){m(e,"",x(t,{expires:-1}))},m.withConverter=e,m}(function(){})}),"function"==typeof define&&define.amd&&(define(i),S=!0),"object"==typeof exports&&(module.exports=i(),S=!0),S||(Oe=window.Cookies,(Ve=window.Cookies=i()).noConflict=function(){return window.Cookies=Oe,Ve});var S="[:A-Z_a-z][:A-Z_a-z.\\-0-9]*",st="\\s*("+S+")\\s+(CDATA|ID|IDREF|ENTITY|ENTITIES|NMTOKEN|NMTOKENS|[|\\(\\)\\S]+)\\s+(#REQUIRED|#IMPLIED|#FIXED ['\"\\S]+|['\"\\S]+)",ot="<!ELEMENT\\s+("+S+")\\s+(ANY|EMPTY|\\([:A-Z_a-z.\\-0-9#\\%;|?,\\s+*()]*\\)[+*?]?)\\s*>",lt="<!ATTLIST\\s+("+S+")\\s+(("+st+")+)\\s*>",C=new Array,dt=new Array,ct=new Array,pt={};function ut(e){e=new RegExp(ot,"g").exec(e);if(null==e)return null;var t=e[1],a=e[2],e=(Object.entries(pt).forEach(function(e,t){a=a.replace("%"+e[0]+";",e[1])}),!1),n=null;return{name:t,hasText:e="ANY"!=a&&!a.includes("#PCDATA")?e:!0,children:n=a.startsWith("(")&&"(#PCDATA)"!=a.substring(0,9)?function t(e){var a=new Array;e=e.replace(/#PCDATA\s*\|/,"").trim();var n,i=null;switch(e.slice(-1)){case"?":n=0,i=1,e=e.substr(0,e.length-1);break;case"*":n=0,i=null,e=e.substr(0,e.length-1);break;case"+":n=1,i=null,e=e.substr(0,e.length-1);break;default:i=n=1}"("==e.charAt(0)&&(e=e.substr(1,e.length-2));var r="element";1<D(e,"\\|").length?(r="choice",D(e,"\\|").forEach(function(e){a.push(t(e.trim()))})):1<D(e,",").length||"*"==e.slice(-1)||"?"==e.slice(-1)||"+"==e.slice(-1)?(r="sequence",D(e,",").forEach(function(e){a.push(t(e.trim()))})):(a.push(e),ct.push(e));r={minRepeat:n,maxRepeat:i,type:r,children:a};return r}(a):n}}function D(e,t,a,n,i,r){var t="([\\s\\S]*?)(e)?(?:(o)|(c)|(t)|(sp)|$)".replace("sp",t).replace("o",a||"[\\(\\{\\[]").replace("c",n||"[\\)\\}\\]]").replace("t",i||"['\"]").replace("e",r||"[\\\\]"),a=new RegExp(t,"gi"),l=[],d=[],c=[];return e.replace(a,function(e,t,a,n,i,r,s,o){if(a)d.push(t,s||n||i||r);else{if(n)l.push(n);else if(i)l.pop();else if(r)l[l.length-1]!==r?l.push(r):l.pop();else if(s?!l.length:!t)return d.push(t),c.push(d.join("")),void(d=[]);d.push(e)}}),c}function ht(e){C=new Array,dt=new Array,ct=new Array,pt={};var t=new RegExp('(<!ENTITY\\s+%\\s+[a-zA-Z0-9]*\\s+"[^^"]*"[^^>]*>)',"gm"),t=e.match(t),a=(null!=t&&t.forEach(function(e){e=(e=e.replace(/(\r\n|\n|\r)/gm," ")).match(/<!ENTITY\s+%\s+([a-zA-Z0-9]*)\s+"([^"]*)"[^>]*>/);null!=e&&(pt[e[1]]=e[2])}),new RegExp("("+ot+")","gm")),a=(null!=(t=e.match(a))&&t.forEach(function(e){e=ut(e);null!=e&&C.push(e)}),new RegExp("("+lt+")","gm")),n=(null!=(t=e.match(a))&&t.forEach(function(e){var s,t;e=e,null!=(e=new RegExp(lt,"gm").exec(e))&&(s=e[1],e=e[2],t=new RegExp("("+st+")","mg"),null!=(e=e.match(t))&&e.forEach(function(e){var t=new RegExp(st,"m"),e=e.match(t),t=e[1],a=!1,n=!1,i=null,r=null;e[3].includes("#FIXED")&&(a=!0),e[3].includes("#REQUIRED")&&(n=!0),e[2].startsWith("(")&&(i=e[2].substr(1,e[2].length-2).split("|")),e[3].startsWith("#")||(r=e[3].substr(1,e[3].length-2)),dt.push({element:s,name:t,defaultValue:r,required:n,readOnly:a,options:i})}))}),null);return C.forEach(function(e){ct.includes(e.name)||(n=e.name)}),{elements:C,attributes:dt,root:n}}function mt(i){var t={elements:{},unknownElement:function(e){return 0==e.indexOf("lxnm:")?{isReadOnly:!0,isInvisible:!0}:{oneliner:function(e){return!e.hasElements()},menu:[{caption:"Delete",action:Xonomy.deleteElement,hideIf:function(e){return!e.parent()}}]}},unknownAttribute:function(e,t){return 0==t.indexOf("lxnm:")?{isReadOnly:!0,isInvisible:!0}:{menu:[{caption:"Delete",action:Xonomy.deleteAttribute}]}},validate:function(e){}};return i.elements.forEach(function(a){var n={menu:[],inlineMenu:[],collapsible:!1};t.elements[a.name]=n;(e=[]).push({caption:"Unwrap <"+a.name+">",action:Xonomy.unwrap,hideIf:function(t){return null==t.parent()||0==i.elements.find(function(e){return e.name==t.parent().name}).hasText},keyTrigger:function(e){return(e.ctrlKey||e.metaKey)&&e.shiftKey&&88==e.which},keyCaption:"Ctrl + Shift + X"}),e.push({caption:"Remove <"+a.name+">",action:Xonomy.deleteElement,hideIf:function(t){return null==t.parent()||1==i.elements.find(function(e){return e.name==t.parent().name}).hasText},keyTrigger:function(e){return(e.ctrlKey||e.metaKey)&&e.shiftKey&&88==e.which},keyCaption:"Ctrl + Shift + X"}),e.push({caption:"Duplicate <"+a.name+">",action:Xonomy.duplicateElement,hideIf:function(t){return null==t.parent()||1==i.elements.find(function(e){return e.name==t.parent().name}).hasText},keyTrigger:function(e){return(e.ctrlKey||e.metaKey)&&e.shiftKey&&68==e.which},keyCaption:"Ctrl + Shift + D"}),e.push({caption:"Move <"+a.name+"> up",action:Xonomy.moveElementUp,hideIf:function(t){return null==t.parent()||1==i.elements.find(function(e){return e.name==t.parent().name}).hasText||!Xonomy.canMoveElementUp(t.htmlID)},keyTrigger:function(e){return(e.ctrlKey||e.metaKey)&&e.shiftKey&&38==e.which},keyCaption:"Ctrl + Shift + Up"}),e.push({caption:"Move <"+a.name+"> down",action:Xonomy.moveElementDown,hideIf:function(t){return null==t.parent()||1==i.elements.find(function(e){return e.name==t.parent().name}).hasText||!Xonomy.canMoveElementDown(t.htmlID)},keyTrigger:function(e){return(e.ctrlKey||e.metaKey)&&e.shiftKey&&40==e.which},keyCaption:"Ctrl + Shift + Down"}),e.push({caption:"Merge <"+a.name+"> with previous",action:Xonomy.mergeWithPrevious,hideIf:function(t){return null==t.parent()||1==i.elements.find(function(e){return e.name==t.parent().name}).hasText||!t.getPrecedingSibling()||t.getPrecedingSibling().name!=a.name},keyTrigger:function(e){return e.altKey&&e.shiftKey&&38==e.which},keyCaption:"Alt + Shift + Up"}),e.push({caption:"Merge <"+a.name+"> with next",action:Xonomy.mergeWithNext,hideIf:function(t){return null==t.parent()||1==i.elements.find(function(e){return e.name==t.parent().name}).hasText||!t.getFollowingSibling()||t.getFollowingSibling().name!=a.name},keyTrigger:function(e){return e.altKey&&e.shiftKey&&40==e.which},keyCaption:"Alt + Shift + Down"}),0<e.length&&n.menu.push({caption:"This element",menu:e,expanded:!0}),a.hasText&&null==a.children&&(n.hasText=!0,n.oneliner=!0,n.asker=Xonomy.askLongString),n.attributes={};var e=[];i.attributes.filter(e=>e.element==a.name).forEach(function(t){var a={menu:[]};n.attributes[t.name]=a,null==t.options?a.asker=Xonomy.askLongString:(a.asker=Xonomy.askPicklist,a.askerParameter=[],t.options.forEach(function(e){a.askerParameter.push({value:e,caption:e})})),e.push({caption:"Add @"+t.name,action:Xonomy.newAttribute,actionParameter:{name:t.name,value:""},hideIf:function(e){return e.hasAttribute(t.name)}}),a.menu.push({caption:"Remove @"+t.name,action:Xonomy.deleteAttribute,keyTrigger:function(e){return(e.ctrlKey||e.metaKey)&&e.shiftKey&&88==e.which},keyCaption:"Ctrl + Shift + X"})}),0<e.length&&n.menu.push({caption:"Attributes",menu:e}),null!=a.children&&(e=[],L(a).forEach(function(t){e.push({caption:"Add <"+t.name+">",action:Xonomy.newElementChild,actionParameter:function(e){if(null==e)return"";var t="<"+e.name+">";return null!=e.children&&L(e).forEach(function(e){0<e.min&&(t+="<"+e.name+"/>")}),t+="</"+e.name+">"}(i.elements.find(function(e){return e.name==t.name}))})}),0<e.length&&n.menu.push({caption:"Child elements",menu:e}),n.collapsible=function(e){return!!e.internalParent},n.collapsed=!0),a.hasText&&null!=a.children&&(n.hasText=!0,n.oneliner=!0,n.asker=Xonomy.askLongString,L(a).forEach(function(e){n.inlineMenu.push({caption:"Wrap with <"+e.name+">",action:Xonomy.wrap,actionParameter:{template:"<"+e.name+">$</"+e.name+">",placeholder:"$"}})}))}),t}function xt(e){var n={root:e.root,elements:{}};return e.elements.forEach(function(t){var a={filling:"",values:[],children:[],attributes:{}};t.hasText?null!=t.children?a.filling="inl":a.filling="txt":null!=t.children?a.filling="chd":a.filling="emp",null!=t.children&&(a.children=L(t)),e.attributes.filter(function(e){return e.element==t.name}).forEach(function(e){var t={optionality:"optional",filling:"txt"};e.required&&(t.optionality="obligatory"),null!=e.options&&(t.filling="lst",t.values=new Array,e.options.forEach(function(e){t.values.push({value:e,caption:e})})),a.attributes[e.name]=t}),n.elements[t.name]=a}),n}function L(e){var t=new Array;return function t(a,n,i,r){null==i&&(i=null==a.minRepeat?0:a.minRepeat);null==r&&(r=null==a.maxRepeat?0:a.maxRepeat);{var e,s,o;"element"==a.type?(s=e=0,null!=a.minRepeat&&0!=i&&(e=a.minRepeat),null!=a.maxRepeat&&0!=r&&(s=a.maxRepeat),null!=(o=n.find(function(e){return e.name==a.children[0]}))&&0!=o.length||n.push({name:a.children[0],min:e,max:s})):a.children.forEach(function(e){n=t(e,n,i,r)})}return n}(e.children,t)}try{module.exports={dtd2xonomy:function(e){e=ht(e);mt(e),xt(e)},struct2Xema:xt}}catch(e){}window.Xematron={},Xematron.xema2docspec=function(s,o){var e,l={elements:{},unknownElement:function(e){return 0==e.indexOf("lxnm:")?{isReadOnly:!0,isInvisible:!0}:{oneliner:function(e){return!e.hasElements()},menu:[{caption:"Delete",action:Xonomy.deleteElement,hideIf:function(e){return!e.parent()}}]}},unknownAttribute:function(e,t){return 0==t.indexOf("lxnm:")?{isReadOnly:!0,isInvisible:!0}:{menu:[{caption:"Delete",action:Xonomy.deleteAttribute}]}},validate:function(e){Xematron.validate(s,e)}},t=[];for(e in s.elements)t.push(e);return t.forEach(function(t){var n=s.elements[t],i={};(l.elements[t]=i).menu=[],i.inlineMenu=[],i.collapsible=!1;(r=[]).push({caption:"Unwrap <"+t+">",action:Xonomy.unwrap,hideIf:function(e){return null==e.parent()||"inl"!=s.elements[e.parent().name].filling},keyTrigger:function(e){return(e.ctrlKey||e.metaKey)&&e.shiftKey&&88==e.which},keyCaption:"Ctrl + Shift + X"}),r.push({caption:"Remove <"+t+">",action:Xonomy.deleteElement,hideIf:function(e){return null==e.parent()||"inl"==s.elements[e.parent().name].filling},keyTrigger:function(e){return(e.ctrlKey||e.metaKey)&&e.shiftKey&&88==e.which},keyCaption:"Ctrl + Shift + X"}),r.push({caption:"Duplicate <"+t+">",action:Xonomy.duplicateElement,hideIf:function(e){return null==e.parent()||"inl"==s.elements[e.parent().name].filling},keyTrigger:function(e){return(e.ctrlKey||e.metaKey)&&e.shiftKey&&68==e.which},keyCaption:"Ctrl + Shift + D"}),r.push({caption:"Move <"+t+"> up",action:Xonomy.moveElementUp,hideIf:function(e){return null==e.parent()||"inl"==s.elements[e.parent().name].filling||!Xonomy.canMoveElementUp(e.htmlID)},keyTrigger:function(e){return(e.ctrlKey||e.metaKey)&&e.shiftKey&&38==e.which},keyCaption:"Ctrl + Shift + Up"}),r.push({caption:"Move <"+t+"> down",action:Xonomy.moveElementDown,hideIf:function(e){return null==e.parent()||"inl"==s.elements[e.parent().name].filling||!Xonomy.canMoveElementDown(e.htmlID)},keyTrigger:function(e){return(e.ctrlKey||e.metaKey)&&e.shiftKey&&40==e.which},keyCaption:"Ctrl + Shift + Down"}),r.push({caption:"Merge <"+t+"> with previous",action:Xonomy.mergeWithPrevious,hideIf:function(e){return null==e.parent()||"inl"==s.elements[e.parent().name].filling||!e.getPrecedingSibling()||e.getPrecedingSibling().name!=t},keyTrigger:function(e){return e.altKey&&e.shiftKey&&38==e.which},keyCaption:"Alt + Shift + Up"}),r.push({caption:"Merge <"+t+"> with next",action:Xonomy.mergeWithNext,hideIf:function(e){return null==e.parent()||"inl"==s.elements[e.parent().name].filling||!e.getFollowingSibling()||e.getFollowingSibling().name!=t},keyTrigger:function(e){return e.altKey&&e.shiftKey&&40==e.which},keyCaption:"Alt + Shift + Down"}),0<r.length&&i.menu.push({caption:"This element",menu:r,expanded:!0}),"txt"==n.filling&&(i.hasText=!0,i.oneliner=!0,i.asker=Xonomy[o]||Xonomy.askLongString),"lst"==n.filling&&(i.hasText=!0,i.oneliner=!0,i.asker=Xonomy.askPicklist,i.askerParameter=[],n.values.forEach(function(e){i.askerParameter.push({value:e.value,caption:e.caption})})),"med"==n.filling&&(i.hasText=!0,i.oneliner=!0,i.asker=Xonomy[o]||Xonomy.askLongString),i.attributes={};var e,r=[],a=[];for(e in n.attributes)a.push(e);a.forEach(function(t){var e=n.attributes[t],a={};(i.attributes[t]=a).menu=[],"txt"==e.filling&&(a.asker=Xonomy[o]||Xonomy.askLongString),"lst"==e.filling&&(a.asker=Xonomy.askPicklist,a.askerParameter=[],e.values.forEach(function(e){a.askerParameter.push({value:e.value,caption:e.caption})})),r.push({caption:"Add @"+t,action:Xonomy.newAttribute,actionParameter:{name:t,value:""},hideIf:function(e){return e.hasAttribute(t)}}),a.menu.push({caption:"Remove @"+t,action:Xonomy.deleteAttribute,keyTrigger:function(e){return(e.ctrlKey||e.metaKey)&&e.shiftKey&&88==e.which},keyCaption:"Ctrl + Shift + X"})}),0<r.length&&i.menu.push({caption:"Attributes",menu:r}),"chd"==n.filling&&(n.children||(n.children=[]),r=[],n.children.forEach(function(e){r.push({caption:"Add <"+e.name+">",action:Xonomy.newElementChild,actionParameter:Xematron.initialElement(s,e.name)})}),0<r.length&&i.menu.push({caption:"Child elements",menu:r}),i.collapsible=!0,i.collapsed=function(e){return!!e.internalParent}),"inl"==n.filling&&(i.hasText=!0,i.oneliner=!0,i.asker=Xonomy[o]||Xonomy.askLongString,n.children||(n.children=[]),n.children.forEach(function(e){i.inlineMenu.push({caption:"Wrap with <"+e.name+">",action:Xonomy.wrap,actionParameter:{template:"<"+e.name+Xematron.initialAttributes(s,e.name)+">$</"+e.name+">",placeholder:"$"}})})),i.canDropTo=Xematron.listParents(s,t),i.mustBeAfter=Xematron.listPrecedingSiblings(s,t),i.mustBeBefore=Xematron.listFollowingSiblings(s,t);r=[];Xematron.listElements(s).forEach(function(t){r.push({caption:"Add <"+t+">",action:Xonomy.newElementBefore,actionParameter:Xematron.initialElement(s,t),hideIf:function(e){return!e.parent()||"inl"==s.elements[e.parent().name].filling||e.parent().hasChildElement(t)||e.getPrecedingSibling()&&e.getPrecedingSibling().name==e.name||-1==i.mustBeAfter(e).indexOf(t)}})}),r.push({caption:"Add another <"+t+"> before",action:Xonomy.newElementBefore,actionParameter:Xematron.initialElement(s,t),hideIf:function(e){return!e.parent()||"inl"==s.elements[e.parent().name].filling}}),r.push({caption:"Add another <"+t+"> after",action:Xonomy.newElementAfter,actionParameter:Xematron.initialElement(s,t),hideIf:function(e){return!e.parent()||"inl"==s.elements[e.parent().name].filling}}),Xematron.listElements(s).forEach(function(t){r.push({caption:"Add <"+t+">",action:Xonomy.newElementAfter,actionParameter:Xematron.initialElement(s,t),hideIf:function(e){return!e.parent()||"inl"==s.elements[e.parent().name].filling||e.parent().hasChildElement(t)||e.getFollowingSibling()&&e.getFollowingSibling().name==e.name||-1==i.mustBeBefore(e).indexOf(t)}})}),r.push({caption:"Remove all <"+t+"> siblings",action:Xonomy.deleteEponymousSiblings,hideIf:function(e){return!e.parent()||"inl"==s.elements[e.parent().name].filling||e.parent().getChildElements(e.name).length<2},keyTrigger:function(e){return(e.ctrlKey||e.metaKey)&&e.shiftKey&&90==e.which},keyCaption:"Ctrl + Shift + Z"}),0<r.length&&i.menu.push({caption:"Sibling elements",menu:r})}),l},Xematron.xema2xml=function(e){return e.newXml||Xematron.initialElement(e,e.root)},Xematron.listParents=function(e,t){var a,n=[];for(a in e.elements){var i=e.elements[a];if("chd"==i.filling){i.children||(i.children=[]);for(var r=0;r<i.children.length;r++)if(i.children[r].name==t){n.push(a);break}}}return n},Xematron.listPrecedingSiblings=function(e,t){var a,n={};for(a in e.elements){var i=e.elements[a];if("chd"==i.filling)for(var r=[],s=0;s<i.children.length;s++)if(i.children[s].name!=t)r.push(i.children[s].name);else if(i.children[s].name==t){n[a]=r;break}}return function(e){if(e)for(var t in n)if(e.parent()&&t==e.parent().name)return n[t];return[]}},Xematron.listFollowingSiblings=function(e,t){var a,n={};for(a in e.elements){var i=e.elements[a];if("chd"==i.filling){for(var r=[],s=!1,o=0;o<i.children.length;o++)i.children[o].name!=t&&s?r.push(i.children[o].name):i.children[o].name==t&&(s=!0);n[a]=r}}return function(e){if(e)for(var t in n)if(e.parent()&&t==e.parent().name)return n[t];return[]}},Xematron.initialAttributes=function(e,t){var a="";if(null!=e.elements[t])for(var n in e.elements[t].attributes)"obligatory"==e.elements[t].attributes[n].optionality&&(a+=" "+n+"='"+Xonomy.xmlEscape("")+"'");return a},Xematron.initialElement=function(a,e,n){n=n||0;var t=a.elements[e],i="<"+e+Xematron.initialAttributes(a,e)+">";return null!=t&&"chd"==t.filling&&t.children&&n<10&&t.children.forEach(function(e){for(var t=0;t<e.min;t++)i+=Xematron.initialElement(a,e.name,n+1)}),i+="</"+e+">"},Xematron.valuesHave=function(e,t){for(var a=!1,n=0;n<e.length;n++)if(e[n].value==t){a=!0;break}return a},Xematron.childrenHave=function(e,t){for(var a=!1,n=0;n<e.length;n++)if(e[n].name==t){a=!0;break}return a},Xematron.validate=function(e,t){var a=e.elements[t.name];if(a){for(var n in a.attributes)"obligatory"!=a.attributes[n].optionality||t.getAttribute(n)||Xonomy.warnings.push({htmlID:t.htmlID,text:"The <"+t.name+"> element is missing the @"+n+" attribute."});for(var i=0;i<t.attributes.length;i++){var r=t.attributes[i],s=a.attributes[r.name];s?""==r.value?Xonomy.warnings.push({htmlID:r.htmlID,text:"The @"+r.name+" attribute should not be empty."}):"lst"!=s.filling||Xematron.valuesHave(s.values,r.value)||Xonomy.warnings.push({htmlID:r.htmlID,text:"The @"+r.name+' attribute should not have the value @"'+r.value+'".'}):Xonomy.warnings.push({htmlID:r.htmlID,text:"The <"+t.name+"> element should not have an attribute called @"+r.name+"."})}if("emp"==a.filling&&0<t.children.length&&Xonomy.warnings.push({htmlID:t.htmlID,text:"The <"+t.name+"> element should be empty."}),"lst"==a.filling&&(""==t.getText()?Xonomy.warnings.push({htmlID:t.htmlID,text:"The <"+t.name+"> element should not be empty."}):Xematron.valuesHave(a.values,t.getText())||Xonomy.warnings.push({htmlID:t.htmlID,text:"The <"+t.name+'> element should not have the value @"'+t.getText()+'".'})),"txt"==a.filling&&""==t.getText()&&Xonomy.warnings.push({htmlID:t.htmlID,text:"The <"+t.name+"> element should have some text."}),"inl"==a.filling&&""==t.getText()&&Xonomy.warnings.push({htmlID:t.htmlID,text:"The <"+t.name+"> element should have some text."}),"chd"==a.filling){for(var o=!1,i=0;i<t.children.length;i++)if("text"==t.children[i].type){o=!0;break}o&&Xonomy.warnings.push({htmlID:t.htmlID,text:"The <"+t.name+"> element should not have any text."})}if("inl"==a.filling||"chd"==a.filling)for(i=0;i<a.children.length;i++){xchild=a.children[i];var l,d=t.getChildElements(xchild.name);(0<xchild.min&&d.length<xchild.min||0<xchild.max&&d.length>xchild.max)&&(l="Should have ",0<xchild.min&&(l+="at least "+xchild.min),0<xchild.min&&0<xchild.max&&(l+=", "),0<xchild.max&&(l+="at most "+xchild.max),l+=".",0<d.length?d.forEach(function(e){Xonomy.warnings.push({htmlID:e.htmlID,text:"The <"+t.name+"> element does not have the correct number of <"+xchild.name+"> child elements. "+l})}):Xonomy.warnings.push({htmlID:t.htmlID,text:"The <"+t.name+"> element does not have the correct number of <"+xchild.name+"> child elements. "+l}))}for(i=0;i<t.children.length;i++){var c=t.children[i];"element"==c.type&&(Xematron.childrenHave(a.children,c.name)?Xematron.validate(e,c):Xonomy.warnings.push({htmlID:c.htmlID,text:"The <"+t.name+"> element should not have a child element called <"+c.name+">."}))}if(t.parent())for(var p=t.parent(),u="before",i=0;i<p.children.length;i++){var h=p.children[i];h==t?u="after":("after"==u&&-1<Xonomy.docSpec.elements[t.name].mustBeAfter(t).indexOf(h.name)&&Xonomy.warnings.push({htmlID:t.htmlID,text:"The <"+t.name+"> element should appear after the <"+h.name+"> element, not before it."}),"before"==u&&-1<Xonomy.docSpec.elements[t.name].mustBeBefore(t).indexOf(h.name)&&Xonomy.warnings.push({htmlID:t.htmlID,text:"The <"+t.name+"> element should appear before the <"+h.name+"> element, not after it."}))}}else Xonomy.warnings.push({htmlID:t.htmlID,text:"The top element should be <"+e.root+">."})},Xematron.listElements=function(a){function n(e){if(a.elements[e]&&-1==i.indexOf(e)&&(i.push(e),r.push(e),("chd"==a.elements[e].filling||"inl"==a.elements[e].filling)&&a.elements[e].children))for(var t=0;t<a.elements[e].children.length;t++)n(a.elements[e].children[t].name)}var e,i=[],r=[];for(e in n(a.root),a.elements)-1==r.indexOf(e)&&i.push(e);return i},window.Xemplatron={},Xemplatron.xema=null,Xemplatron.xemplate=null,Xemplatron.xml2html=function(e,t,a){return Xemplatron.xema=a,Xemplatron.xemplate=t,"string"==typeof e&&(e=$.parseXML(e)),Xemplatron.el2html(e.documentElement,!0,!0)},Xemplatron.el2html=function(e,t,a){if(!Xemplatron.getXemplate(e).shown)return"";var n,i="",r="",s=Xemplatron.xema.elements[e.nodeName];if(s&&"lst"==s.filling){if(i=e.textContent,s.values)for(var o=0;o<s.values.length;o++)if(s.values[o].value==e.textContent){r=s.values[o].caption;break}}else if(s&&"med"==s.filling){var l=Xemplatron.detectFileType(e.textContent);switch(console.log(l),l){case"image":i='<img src="'+e.textContent+'" class="media_image"/>';break;case"video":i='<video controls class="media_video"><source src="'+e.textContent+'"/></video>';break;case"audio":i='<audio controls class="media_audio" src="'+e.textContent+'"/>';break;default:i=e.textContent}}else{for(var d=[],c=0;c<e.attributes.length;c++)0!=(u=e.attributes[c]).nodeName.indexOf("xml:")&&0!=u.nodeName.indexOf("lxnm:")&&"before"==(p=Xemplatron.getXemplate(u)).order&&p.shown&&d.push(u);for(c=0;c<e.childNodes.length;c++)0!=(u=e.childNodes[c]).nodeName.indexOf("xml:")&&0!=u.nodeName.indexOf("lxnm:")&&(3==u.nodeType&&d.push(u),1==u.nodeType&&(p=Xemplatron.getXemplate(u)).shown&&d.push(u));for(var p,c=0;c<e.attributes.length;c++)0!=(u=e.attributes[c]).nodeName.indexOf("xml:")&&"after"==(p=Xemplatron.getXemplate(u)).order&&p.shown&&d.push(u);for(c=0;c<d.length;c++){var u=d[c],h=0==c,m=c==d.length-1;m||3==d[c+1].nodeType||(m="block"==Xemplatron.getXemplate(d[c+1]).layout),1==u.nodeType&&(i+=Xemplatron.el2html(u,h,m)),2==u.nodeType&&(i+=Xemplatron.at2html(u,h,m)),3==u.nodeType&&(i+=Xemplatron.tn2html(u))}}for(n in(p=Xemplatron.getXemplate(e)).label&&(i="<span class='label'>"+p.label+"</span>&nbsp;"+i),Xemplatron.styles)p[n]&&(i=Xemplatron.getStyle(n,p[n]).toHtml(p.layout,i,e,t,a,r));l=!0;return e.parentNode&&Xemplatron.xema.elements[e.parentNode.nodeName]&&"inl"==Xemplatron.xema.elements[e.parentNode.nodeName].filling&&(l=!1),"<"+("block"==p.layout?"div":"span")+" "+(l?"class='clearFont'":"")+">"+i+"</"+("block"==p.layout?"div":"span")+">"},Xemplatron.at2html=function(e,t,a){var n,i=Xemplatron.getXemplate(e),r="",s="",o=Xemplatron.xema.elements[e.ownerElement.nodeName];if((o=o?o.attributes[e.nodeName]:null)&&"lst"==o.filling){if(r=Xemplatron.xmlEscape(e.nodeValue),o.values)for(var l=0;l<o.values.length;l++)if(o.values[l].value==e.nodeValue){s=o.values[l].caption;break}}else r+=Xemplatron.xmlEscape(e.nodeValue);for(n in i.label&&(r="<span class='label'>"+i.label+"</span>&nbsp;"+r),Xemplatron.styles)i[n]&&(r=Xemplatron.getStyle(n,i[n]).toHtml(i.layout,r,e,t,a,s));return"block"==i.layout?"<div class='clearFont'>"+r+"</div>":"<span class='clearFont'>"+r+"</span>"},Xemplatron.tn2html=function(e){var t="";return t+=Xemplatron.xmlEscape(e.nodeValue)},Xemplatron.xmlEscape=function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},Xemplatron.getXemplate=function(e){var t,a=null;return 1==e.nodeType?a=Xemplatron.xemplate[e.nodeName]||{shown:!0,layout:"block"}:2==e.nodeType&&(t=e.ownerElement.nodeName,a=Xemplatron.xemplate[t]&&Xemplatron.xemplate[t].attributes&&Xemplatron.xemplate[t].attributes[e.nodeName]?Xemplatron.xemplate[t].attributes[e.nodeName]:{order:"after",shown:!1,layout:"inline"}),a&&"false"==a.shown&&(a.shown=!1),a},Xemplatron.getStyle=function(e,t){return Xemplatron.styles[e][t]||Xemplatron.defaultStyle},Xemplatron.defaultStyle={toHtml:function(e,t,a,n,i){return t}},Xemplatron.styles={captioning:{title:"Caption display",replace:{toHtml:function(e,t,a,n,i,r){return"<span>"+(r||t)+"</span>"},title:"Show caption instead of value"},mouseover:{toHtml:function(e,t,a,n,i,r){return"<span class='caption' title='"+r.replace("'","&apos;")+"'>"+t+"</span>"},title:"Show caption on mouse-over"}},interactivity:{title:"Interactivity",xref:{toHtml:function(e,t,a,n,i){return"<a class='xref' href=\""+window.location.hash.split("?")[0]+"?s="+encodeURIComponent(a.textContent)+'&m=substring">'+t+"</a>"},title:"Clickable cross-reference"},xlink:{toHtml:function(e,t,a,n,i){return"<a class='xlink' target='_blank' href='"+a.textContent.replace("'","&apos;")+"'>"+a.textContent+"</a>"},title:"External URL link"}},innerPunc:{title:"Inner punctuation",roundBrackets:{toHtml:function(e,t,a,n,i){return"("+t+")"},title:"Round brackets"},squareBrackets:{toHtml:function(e,t,a,n,i){return"["+t+"]"},title:"Square brackets"},curlyBrackets:{toHtml:function(e,t,a,n,i){return"{"+t+"}"},title:"Curly brackets"},comma:{toHtml:function(e,t,a,n,i){return t+(i?"":", ")},title:"Comma"},semicolon:{toHtml:function(e,t,a,n,i){return t+(i?"":"; ")},title:"Semicolon"},colon:{toHtml:function(e,t,a,n,i){return t+(i?"":": ")},title:"Colon"}},textsize:{title:"Text size",smaller:{toHtml:function(e,t,a,n,i){return"<span class='smaller'>"+t+"</span>"},title:"Smaller"},bigger:{toHtml:function(e,t,a,n,i){return"<span class='bigger'>"+t+"</span>"},title:"Bigger"}},weight:{title:"Text weight",bold:{toHtml:function(e,t,a,n,i){return"<span class='bold'>"+t+"</span>"},title:"Bold"}},slant:{title:"Text slant",italic:{toHtml:function(e,t,a,n,i){return"<span class='italic'>"+t+"</span>"},title:"Italic"}},colour:{title:"Text colour",red:{toHtml:function(e,t,a,n,i){return"<span class='xema_red'>"+t+"</span>"},title:"Red"},blue:{toHtml:function(e,t,a,n,i){return"<span class='xema_blue'>"+t+"</span>"},title:"Blue"},green:{toHtml:function(e,t,a,n,i){return"<span class='xema_green'>"+t+"</span>"},title:"Green"},grey:{toHtml:function(e,t,a,n,i){return"<span class='xema_grey'>"+t+"</span>"},title:"Grey"}},outerPunc:{title:"Outer punctuation",roundBrackets:{toHtml:function(e,t,a,n,i){return"("+t+")"},title:"Round brackets"},squareBrackets:{toHtml:function(e,t,a,n,i){return"["+t+"]"},title:"Square brackets"},curlyBrackets:{toHtml:function(e,t,a,n,i){return"{"+t+"}"},title:"Curly brackets"},comma:{toHtml:function(e,t,a,n,i){return t+(i?"":", ")},title:"Comma"},semicolon:{toHtml:function(e,t,a,n,i){return t+(i?"":"; ")},title:"Semicolon"},colon:{toHtml:function(e,t,a,n,i){return t+(i?"":": ")},title:"Colon"}},background:{title:"Background colour",yellow:{toHtml:function(e,t,a,n,i){return"<"+("block"==e?"div":"span")+" class='background xema_yellow'>"+t+"</"+("block"==e?"div":"span")+">"},title:"Yellow"},blue:{toHtml:function(e,t,a,n,i){return"<"+("block"==e?"div":"span")+" class='background xema_blue'>"+t+"</"+("block"==e?"div":"span")+">"},title:"Blue"},grey:{toHtml:function(e,t,a,n,i){return"<"+("block"==e?"div":"span")+" class='background xema_grey'>"+t+"</"+("block"==e?"div":"span")+">"},title:"Grey"}},border:{title:"Box border",dotted:{toHtml:function(e,t,a,n,i){return"<"+("block"==e?"div":"span")+" class='border dotted'>"+t+"</"+("block"==e?"div":"span")+">"},title:"Dotted"},solid:{toHtml:function(e,t,a,n,i){return"<"+("block"==e?"div":"span")+" class='border solid'>"+t+"</"+("block"==e?"div":"span")+">"},title:"Thin"},thick:{toHtml:function(e,t,a,n,i){return"<"+("block"==e?"div":"span")+" class='border thick'>"+t+"</"+("block"==e?"div":"span")+">"},title:"Thick"}},gutter:{title:"Indentation and bulleting",disk:{toHtml:function(e,t,a,n,i){return Xemplatron._bullet(e,"disk",t)},title:"Round bullet"},square:{toHtml:function(e,t,a,n,i){return Xemplatron._bullet(e,"square",t)},title:"Square bullet"},diamond:{toHtml:function(e,t,a,n,i){return Xemplatron._bullet(e,"diamond",t)},title:"Diamond bullet"},arrow:{toHtml:function(e,t,a,n,i){return Xemplatron._bullet(e,"arrow",t)},title:"Arrow bullet"},indent:{toHtml:function(e,t,a,n,i){return"<"+("block"==e?"div":"span")+" class='indented'>"+t+"</"+("block"==e?"div":"span")+">"},title:"Indent"},hanging:{toHtml:function(e,t,a,n,i){return"<"+("block"==e?"div":"span")+" class='hanging'>"+t+"</"+("block"==e?"div":"span")+">"},title:"Hanging indent"},sensenum0:{title:"Sense number I, II, III...",toHtml:function(e,t,a,n,i){return Xemplatron._senseNum(e,t,a,0)}},sensenum1:{title:"Sense number 1, 2, 3...",toHtml:function(e,t,a,n,i){return Xemplatron._senseNum(e,t,a,1)}},sensenum2:{title:"Sense number a, b, c...",toHtml:function(e,t,a,n,i){return Xemplatron._senseNum(e,t,a,2)}},sensenum3:{title:"Sense number i, ii, iii...",toHtml:function(e,t,a,n,i){return Xemplatron._senseNum(e,t,a,3)}}},separation:{title:"Separation from other content",space:{toHtml:function(e,t,a,n,i){return"block"==e?"<div class='space'>"+t+"</div>":"inline"==e?(n?"":" ")+t+(i?"":" "):void 0},title:"Whitespace"}}},Xemplatron._getNumberingSymbol=function(e,t){var a="&nbsp;";return 0==t&&(a=Xemplatron._getRoman(e)),1==t&&(a=e.toString()),2==t&&(a=Xemplatron._getAbc(e)),"<span class='numberingSymbol'>"+(a=3<=t?Xemplatron._getRoman(e).toLowerCase():a)+"</span>"},Xemplatron._getAbc=function(e){var t="abcdefghijklmnopqrstuvwxyz";return((e-=1)<t.length?t[e]:t[t.length-1]).toString()},Xemplatron._getRoman=function(e){var t=["I","II","III","IV","V","VI","VII","VIII","IX","X"];return(e-=1)<t.length?t[e]:t[t.length-1]},Xemplatron._hasEponymousSiblings=function(e){for(var t=0,a=e.previousSibling;a;)a.nodeName==e.nodeName&&t++,a=a.previousSibling;for(a=e.nextSibling;a;)a.nodeName==e.nodeName&&t++,a=a.nextSibling;return t},Xemplatron._senseNum=function(e,t,a,n){var i="&mdash;";if(Xemplatron._hasEponymousSiblings(a)){for(var r=0,s=a;s;)s.nodeName==a.nodeName&&r++,s=s.previousSibling;if(r){for(var o=n-1,l=a;l;)l.nodeName==a.nodeName&&o++,l=l.parentNode;i=Xemplatron._getNumberingSymbol(r,o)}}return Xemplatron._bullet(e,i,t)},Xemplatron._bullet=function(e,t,a){var n="",i="";return"square"==t?(n="⯀",i=t):"diamond"==t?(n="⯁",i=t):"arrow"==t?(n="⯈",i=t):"disk"==t?(n="⏺",i=t):n=t,"block"==e?"<div class='bulleted "+i+"'><div class='bullet'>"+n+"</div> <div class='inside'>"+a+"</div><div class='clear'></div></div>":"inline"==e?"<span class='bulleted "+i+"'>"+n+"</span>&nbsp;"+a:void 0},Xemplatron.detectFileType=function(e){e=e.split(".").pop().split(/\#|\?/)[0].toLowerCase();return console.log("FE"+e),["jpg","jpeg","png","gif"].includes(e)?"image":["avi","mp4","webm"].includes(e)?"video":["wav","ogg","weba"].includes(e)?"audio":""};var N=N||{},i=(N.exports={xml2html:Xemplatron.xml2html},window.Xrefs={},Xrefs.extendDocspec=function(e,t){if(Object.keys(linking).length)for(var a in t.elements)null!=linking[a]&&(e.elements[a].caption=function(e){var t="",t="<button class='btn btn-secondary lexonomyXrefsCaption' onclick='Xonomy.notclick=true; Xrefs.linkBox(\""+e.htmlID+"\")'>▼</button>";return"function"==typeof incaption&&(t=incaption(e)+t),t="string"==typeof incaption?incaption+t:t})},Xrefs.linkBox=function(e){var t,a="";for(t in a=(a="<div class='xrefsbox'>")+"Link this element to<br/>dictionary: "+"<select name='xrefdict' class='browser-default' style='display: inline-block; width: auto;' onchange='Xrefs.refreshLinks()'>",userDicts)userDicts[t].id!=dictId&&userDicts[t].hasLinks&&(a+="<option value='"+userDicts[t].id+"'>"+userDicts[t].title+"</option>");a=(a+="</select><br/> target: <div class='input-field'><input id='xreftarget' name='xreftarget' class='autocomplete'/></div>")+'<button class="btn"onclick=\'Xrefs.makeLink("'+e+"\")'>Link</button></div>",document.body.appendChild(Xonomy.makeBubble(a)),Xonomy.showBubble($("#"+e+" > .inlinecaption")),document.cookie.split("; ").find(e=>e.startsWith("linkPref="))&&$("[name=xrefdict]").val(document.cookie.split("; ").find(e=>e.startsWith("linkPref=")).split("=")[1]),Xrefs.refreshLinks()},Xrefs.refreshLinks=function(){var t,a,n,e=$("[name=xrefdict]").val();$("[name=xreftarget]").empty(),e&&(t=$("#xreftarget"),a={},n={},$.get(Xonomy.baseUrl+e+"/linkablelist.json",e=>{e.links.forEach(e=>{var t=e.element+": "+e.link+(""!=e.preview?" ("+e.preview+")":"");a[t]=e,n[t]=null}),t.autocomplete({data:n,limit:10,onAutocomplete:function(e){e=a[e];e&&($("#xreftarget").data("element",e.element),$("#xreftarget").data("link",e.link))}})}))},Xrefs.makeLink=function(e){var t,a=$("[name=xrefdict]").val(),n=$("#xreftarget").data("element"),i=$("#xreftarget").data("link"),r=$("#"+e+" > .tag.opening > .attributes").children("[data-name='lxnm:linkable']").data("value"),s=$("#"+e).data("name");null!=n&&null!=i&&""!=n&&""!=i&&""!=a&&null!=r&&null!=s&&(t=dictId,document.cookie="linkPref="+a+"; path=/"+t,$("#"+e+" > .tag.opening > .attributes"),$.get(Xonomy.baseUrl+dictId+"/links/add",{source_el:s,source_id:r,target_dict:a,target_el:n,target_id:i},function(e){e.success?Screenful.status("Link created successfully."):Screenful.status("Error while creating link: "+e.error)})),Xonomy.destroyBubble(),Screenful.Editor.addLinks(Screenful.Editor.readUrl.replace("entryread","entrylinks"),$("#editor"),Screenful.Editor.entryID)},window.Ske={},Ske.htmID="",Ske.settings={headwordElement:"",examples:{containerElement:"",textElement:"",markupElement:""}},Ske.makeSettings=function(){for(var e in rollo)rollo[e].headword&&!Ske.settings.headwordElement&&(Ske.settings.headwordElement=e),rollo[e].exampleContainer&&!Ske.settings.examples.containerElement&&(Ske.settings.examples.containerElement=e),rollo[e].exampleText&&!Ske.settings.examples.textElement&&(Ske.settings.examples.textElement=e),rollo[e].exampleHeadwordMarkup&&!Ske.settings.examples.markupElement&&(Ske.settings.examples.markupElement=e)},Ske.getHeadword=function(){return $($.parseXML(Xonomy.harvest())).find(titling.headword).html().replace(/(<([^>]+)>)/gi,"")||""},Ske.getSearchword=function(e){return Xonomy.harvestElement(document.getElementById(e)).getText()},Ske.getCQL=function(e){var t=$($.parseXML(Xonomy.harvest()));return e.replace(/%\([^)]+\)/g,function(e){return t.find(e.substring(2,e.length-1)).html()})},Ske.getConcordance=function(e){var t,a=[];return e?(t=Ske.getSearchword(e),a.push({name:"iquery",arg:t,active:!0,query:{queryselector:"iqueryrow",iquery:t}})):0<kex.concquery.length?(e=Ske.getCQL(kex.concquery),a.push({name:"cql",arg:e,active:!0,query:{queryselector:"cqlrow",cql:e}})):(t=Ske.getHeadword(),a.push({name:"iquery",arg:t,active:!0,query:{queryselector:"iqueryrow",iquery:t}})),0<kex.concsampling&&a.push({name:"sample",arg:kex.concsampling,query:{q:"r"+kex.concsampling},active:!0}),JSON.stringify(a)},Ske.extendDocspec=function(e,t){var a,n;if(kex.corpus&&!subbing[t.root]&&(a=e.elements[t.root],n=a.caption,a.caption=function(e){var t="",t="<span class='lexonomySkeCaption' onclick='Xonomy.notclick=true; Ske.menuRoot(\""+e.htmlID+"\")'>▼</span>";return"function"==typeof n&&(t=n(e)+t),t="string"==typeof n?n+t:t}),kex.apiurl&&kex.corpus&&ske_username&&ske_apiKey&&""!=ske_username&&""!=ske_apiKey)for(var i in t.elements)if(-1!=kex.searchElements.indexOf(i)&&(e.elements[i].caption=function(e){var t="",t="<span class='lexonomySkeCaption' onclick='Xonomy.notclick=true; Ske.menuRoot(\""+e.htmlID+"\", true)'>▼</span>";return"function"==typeof n&&(t=n(e)+t),t="string"==typeof n?n+t:t}),t.elements[i].children){canHaveExamples=!1;for(var r=0;r<t.elements[i].children.length;r++)if(t.elements[i].children[r].name==xampl.container){canHaveExamples=!0;break}canHaveExamples&&e.elements[i]&&(e.elements[i].menu||(e.elements[i].menu=[]),e.elements[i].menu.push({icon:"/furniture/ske.png",caption:"Find examples <"+xampl.container+">",action:Ske.menuExamples})),canHaveCollx=!1;for(r=0;r<t.elements[i].children.length;r++)if(t.elements[i].children[r].name==collx.container){canHaveCollx=!0;break}canHaveCollx&&e.elements[i]&&(e.elements[i].menu||(e.elements[i].menu=[]),e.elements[i].menu.push({icon:"/furniture/ske.png",caption:"Find collocations <"+collx.container+">",action:Ske.menuCollx})),canHaveThes=!1;for(r=0;r<t.elements[i].children.length;r++)if(t.elements[i].children[r].name==thes.container){canHaveThes=!0;break}canHaveThes&&e.elements[i]&&(e.elements[i].menu||(e.elements[i].menu=[]),e.elements[i].menu.push({icon:"/furniture/ske.png",caption:"Find thesaurus items <"+thes.container+">",action:Ske.menuThes})),canHaveDefo=!1;for(r=0;r<t.elements[i].children.length;r++)if(t.elements[i].children[r].name==defo.container){canHaveDefo=!0;break}canHaveDefo&&e.elements[i]&&(e.elements[i].menu||(e.elements[i].menu=[]),e.elements[i].menu.push({icon:"/furniture/ske.png",caption:"Find definitions <"+defo.container+">",action:Ske.menuDefo}))}},Ske.menuRoot=function(e,t=!1){var a,n="<div class='menu'>",i=(t||(xampl.container&&(n=(n=n+"<div class='menuItem' onclick='Ske.menuExamples(\""+e+"\", \"layby\")'><span class='icon'><img src='../../../furniture/ske.png'/></span> ")+"Find examples <span class='techno'><span class='punc'>&lt;</span><span class='elName'>"+xampl.container+"</span><span class='punc'>&gt;</span></span></div>"),collx.container&&(n=(n=n+"<div class='menuItem' onclick='Ske.menuCollx(\""+e+"\", \"layby\")'><span class='icon'><img src='../../../furniture/ske.png'/></span> ")+"Find collocations <span class='techno'><span class='punc'>&lt;</span><span class='elName'>"+collx.container+"</span><span class='punc'>&gt;</span></span></div>"),thes.container&&(n=(n=n+"<div class='menuItem' onclick='Ske.menuThes(\""+e+"\", \"layby\")'><span class='icon'><img src='../../../furniture/ske.png'/></span> ")+"Find thesaurus items <span class='techno'><span class='punc'>&lt;</span><span class='elName'>"+thes.container+"</span><span class='punc'>&gt;</span></span></div>"),defo.container&&(n=(n=n+"<div class='menuItem' onclick='Ske.menuDefo(\""+e+"\", \"layby\")'><span class='icon'><img src='../../../furniture/ske.png'/></span> ")+"Find definitions items <span class='techno'><span class='punc'>&lt;</span><span class='elName'>"+defo.container+"</span><span class='punc'>&gt;</span></span></div>")),t=t?(a=encodeURIComponent(Ske.getSearchword(e)),encodeURIComponent(Ske.getConcordance(e))):(a=encodeURIComponent(Ske.getHeadword()),encodeURIComponent(Ske.getConcordance())),encodeURIComponent(kex.corpus));a&&(n=(n=(n=(n+="<div class='menuItem')'>")+"<a target='ske' href='"+kex.url+"/#wordsketch?corpname="+i+"&lemma="+a+"&showresults=1'><span class='icon'><img src='../../../furniture/ske.png'/></span> Show word sketch</a></div><div class='menuItem')'>")+"<a target='ske' href='"+kex.url+"/#concordance?corpname="+i+"&showresults=1&operations="+t+"'><span class='icon'><img src='../../../furniture/ske.png'/></span> Show concordance</a></div><div class='menuItem')'>")+"<a target='ske' href='"+kex.url+"/#thesaurus?corpname="+i+"&lemma="+a+"&showresults=1'><span class='icon'><img src='../../../furniture/ske.png'/></span> Show thesaurus</a></div>"),n+="</div>",document.body.appendChild(Xonomy.makeBubble(n)),Xonomy.showBubble($("#"+e+" > .inlinecaption"))},Ske.menuExamples=function(e,t){Ske.htmlID="layby"==t?null:e,document.body.appendChild(Xonomy.makeBubble(Ske.boxExamples())),$("input[name=skesearchtype]").on("click",function(){var e="skesimple"==$(this).val();$("#skesimple").nextAll("input").first().prop("disabled",!e),$("#skecql").nextAll("input").first().prop("disabled",e)}),"openingTagName"==Xonomy.lastClickWhat?Xonomy.showBubble($("#"+e+" > .tag.opening > .name")):"closingTagName"==Xonomy.lastClickWhat?Xonomy.showBubble($("#"+e+" > .tag.closing > .name")):Xonomy.showBubble($("#"+e)),Ske.getHeadword()?Ske.searchExamples():$(".skebox .waiter").hide()},Ske.boxExamples=function(){var e="",e="<div class='skebox'>";return e+="<form class='topbar' onsubmit='Ske.searchExamples(); return false'>",e=(e=(e=(e=(e=(e=0<kex.concquery.length?(e=(e+="<input id='skesimple' type='radio' name='skesearchtype' value='skesimple'/><label for='skesimple'>Simple search: </label>")+"<input disabled name='val' class='textbox simple' value='"+Ske.getHeadword()+"'/> <input id='skecql' type='radio' name='skesearchtype' checked value='skecql'/><label for='skecql'>CQL: </label>")+"<input name='val' class='textbox cql focusme' value='"+Ske.getCQL(kex.concquery)+"'/> ":(e+="<input id='skesimple' type='radio' name='skesearchtype' checked value='skesimple'/><label for='skesimple'>Simple search: </label>")+"<input name='val' class='textbox simple focusme' value='"+Ske.getHeadword()+"'/> <input id='skecql' type='radio' name='skesearchtype' value='skecql'/><label for='skecql'>CQL: </label><input name='val' class='textbox cql' disabled/> ")+"<input type='submit' class='button ske' value='&nbsp;'/>"+"</form>")+"<div class='waiter'></div>"+"<div class='choices' style='display: none'></div>")+"<div class='bottombar' style='display: none;'>"+"<button class='prevnext' id='butSkeNext'>More »</button>")+"<button class='prevnext' id='butSkePrev'>«</button>"+"<button class='insert' onclick='Ske.insertExamples()'>Insert</button>")+"</div>"+"</div>"},Ske.toggleExample=function(e){$(e).prop("checked")?$(e.parentNode).addClass("selected"):$(e.parentNode).removeClass("selected")},Ske.searchExamples=function(e){$("#butSkePrev").hide(),$("#butSkeNext").hide(),$(".skebox .choices").hide(),$(".skebox .bottombar").hide(),$(".skebox .waiter").show();var t=$.trim($(".skebox input.textbox:enabled").val()),a=$("input[name=skesearchtype]:checked").val();""!=t&&$.get("/"+dictId+"/skeget/xampl/",{url:kex.apiurl,corpus:kex.corpus,username:ske_username,apikey:ske_apiKey,querytype:a,query:t,fromp:e},function(e){if($(".skebox .choices").html(""),e.error&&"Empty result"==e.error)$(".skebox .choices").html("<div class='error'>No results found.</div>"),$(".skebox .waiter").hide(),$(".skebox .choices").fadeIn();else if(e.Lines){e.prevlink&&$("#butSkePrev").show().on("click",function(){Ske.searchExamples(e.prevlink),$("div.skebox button.prevnext").off("click")}),e.nextlink&&$("#butSkeNext").show().on("click",function(){Ske.searchExamples(e.nextlink),$("div.skebox button.prevnext").off("click")});for(var t=0;t<e.Lines.length;t++){for(var a=e.Lines[t],n="",i=0;i<a.Left.length;i++)n+=a.Left[i].str;for(var n=n.replace(/\<[^\<\>]+\>/g,""),r="",i=0;i<a.Kwic.length;i++)r+=a.Kwic[i].str;for(var r=r.replace(/<[^\<\>]+\>/g,""),s="",i=0;i<a.Right.length;i++)s+=a.Right[i].str;var o=n+"<b>"+r+"</b>"+(s=s.replace(/<[^\<\>]+\>/g,""));o=(o=o.replace("<b> "," <b>")).replace(" </b>","</b> "),$(".skebox .choices").append("<label><input type='checkbox' onchange='Ske.toggleExample(this)'/><span class='inside'>"+o+"</span></label>"),$(".skebox .waiter").hide(),$(".skebox .choices").fadeIn(),$(".skebox .bottombar").show()}}else $(".skebox .choices").html("<div class='error'>There has been an error getting data from Sketch Engine.</div>"),$(".skebox .waiter").hide(),$(".skebox .choices").fadeIn()})},Ske.insertExamples=function(){$(".skebox div.choices label").each(function(){var e=$(this);e.hasClass("selected")&&(e=e.find("span.inside").html(),e=xampl.markup?(e=e.replace("<b>","<"+xampl.markup+">")).replace("</b>","</"+xampl.markup+">"):(e=e.replace("<b>","")).replace("</b>",""),e=xampl.template.replace("$text",e),Ske.htmlID?Xonomy.newElementChild(Ske.htmlID,e):Xonomy.newElementLayby(e))})},Ske.menuThes=function(e,t){Ske.htmlID="layby"==t?null:e,document.body.appendChild(Xonomy.makeBubble(Ske.boxThes())),"openingTagName"==Xonomy.lastClickWhat?Xonomy.showBubble($("#"+e+" > .tag.opening > .name")):"closingTagName"==Xonomy.lastClickWhat?Xonomy.showBubble($("#"+e+" > .tag.closing > .name")):Xonomy.showBubble($("#"+e)),Ske.getHeadword()?Ske.searchThes():$(".skebox .waiter").hide()},Ske.boxThes=function(){var e="<div class='skebox'>";return(e+="<form class='topbar' onsubmit='Ske.searchThes(); return false'>")+("<input name='val' class='textbox focusme' value='"+Ske.getHeadword()+"'/> ")+"<input type='submit' class='button ske' value='&nbsp;'/>"+"</form>"+"<div class='waiter'></div>"+"<div class='choices' style='display: none'></div>"+"<div class='bottombar' style='display: none;'>"+"<button class='prevnext' id='butSkeNext'>More »</button>"+"<button class='prevnext' id='butSkePrev'>«</button>"+"<button class='insert' onclick='Ske.insertThes()'>Insert</button>"+"</div>"+"</div>"},Ske.toggleThes=function(e){$(e).prop("checked")?$(e.parentNode).addClass("selected"):$(e.parentNode).removeClass("selected")},Ske.searchThes=function(e){$("#butSkePrev").hide(),$("#butSkeNext").hide(),$(".skebox .choices").hide(),$(".skebox .bottombar").hide(),$(".skebox .waiter").show();var t=$.trim($(".skebox .textbox").val());""!=t&&$.get("/"+dictId+"/skeget/thes/",{url:kex.apiurl,corpus:kex.corpus,username:ske_username,apikey:ske_apiKey,lemma:t,fromp:e},function(e){if($(".skebox .choices").html(""),e.error&&"Empty result"==e.error)$(".skebox .choices").html("<div class='error'>No results found.</div>"),$(".skebox .waiter").hide(),$(".skebox .choices").fadeIn();else if(e.Words)for(var t=0;t<e.Words.length;t++){var a=e.Words[t].word;$(".skebox .choices").append("<label><input type='checkbox' onchange='Ske.toggleThes(this)'/><span class='inside'>"+a+"</span></label>"),$(".skebox .waiter").hide(),$(".skebox .choices").fadeIn(),$(".skebox .bottombar").show()}else $(".skebox .choices").html("<div class='error'>There has been an error getting data from Sketch Engine.</div>"),$(".skebox .waiter").hide(),$(".skebox .choices").fadeIn()})},Ske.insertThes=function(){$(".skebox div.choices label").each(function(){var e=$(this);e.hasClass("selected")&&(e=e.find("span.inside").html(),e=thes.template.replace("$text",e),Ske.htmlID?Xonomy.newElementChild(Ske.htmlID,e):Xonomy.newElementLayby(e))})},Ske.menuCollx=function(e,t){Ske.htmlID="layby"==t?null:e,document.body.appendChild(Xonomy.makeBubble(Ske.boxCollx())),"openingTagName"==Xonomy.lastClickWhat?Xonomy.showBubble($("#"+e+" > .tag.opening > .name")):"closingTagName"==Xonomy.lastClickWhat?Xonomy.showBubble($("#"+e+" > .tag.closing > .name")):Xonomy.showBubble($("#"+e)),Ske.getHeadword()?Ske.searchCollx():$(".skebox .waiter").hide()},Ske.boxCollx=function(){var e="<div class='skebox'>";return(e+="<form class='topbar' onsubmit='Ske.searchCollx(); return false'>")+("<input name='val' class='textbox focusme' value='"+Ske.getHeadword()+"'/> ")+"<input type='submit' class='button ske' value='&nbsp;'/>"+"</form>"+"<div class='waiter'></div>"+"<div class='choices' style='display: none'></div>"+"<div class='bottombar' style='display: none;'>"+"<button class='prevnext' id='butSkeNext'>More »</button>"+"<button class='prevnext' id='butSkePrev'>«</button>"+"<button class='insert' onclick='Ske.insertCollx()'>Insert</button>"+"</div>"+"</div>"},Ske.toggleCollx=function(e){$(e).prop("checked")?$(e.parentNode).addClass("selected"):$(e.parentNode).removeClass("selected")},Ske.searchCollx=function(e){$("#butSkePrev").hide(),$("#butSkeNext").hide(),$(".skebox .choices").hide(),$(".skebox .bottombar").hide(),$(".skebox .waiter").show();var t=$.trim($(".skebox .textbox").val());""!=t&&$.get("/"+dictId+"/skeget/collx/",{url:kex.apiurl,corpus:kex.corpus,username:ske_username,apikey:ske_apiKey,lemma:t,fromp:e},function(e){if($(".skebox .choices").html(""),e.error&&"Empty result"==e.error)$(".skebox .choices").html("<div class='error'>No results found.</div>"),$(".skebox .waiter").hide(),$(".skebox .choices").fadeIn();else if(e.Items)for(var t=0;t<e.Items.length;t++){var a=e.Items[t].word;$(".skebox .choices").append("<label><input type='checkbox' onchange='Ske.toggleCollx(this)'/><span class='inside'>"+a+"</span></label>"),$(".skebox .waiter").hide(),$(".skebox .choices").fadeIn(),$(".skebox .bottombar").show()}else $(".skebox .choices").html("<div class='error'>There has been an error getting data from Sketch Engine.</div>"),$(".skebox .waiter").hide(),$(".skebox .choices").fadeIn()})},Ske.insertCollx=function(){$(".skebox div.choices label").each(function(){var e=$(this);e.hasClass("selected")&&(e=e.find("span.inside").html(),e=collx.template.replace("$text",e),Ske.htmlID?Xonomy.newElementChild(Ske.htmlID,e):Xonomy.newElementLayby(e))})},Ske.menuDefo=function(e,t){Ske.htmlID="layby"==t?null:e,document.body.appendChild(Xonomy.makeBubble(Ske.boxDefo())),"openingTagName"==Xonomy.lastClickWhat?Xonomy.showBubble($("#"+e+" > .tag.opening > .name")):"closingTagName"==Xonomy.lastClickWhat?Xonomy.showBubble($("#"+e+" > .tag.closing > .name")):Xonomy.showBubble($("#"+e)),Ske.getHeadword()?Ske.searchDefo():$(".skebox .waiter").hide()},Ske.boxDefo=function(){var e="<div class='skebox'>";return(e+="<form class='topbar' onsubmit='Ske.searchDefo(); return false'>")+("<input name='val' class='textbox focusme' value='"+Ske.getHeadword()+"'/> ")+"<input type='submit' class='button ske' value='&nbsp;'/>"+"</form>"+"<div class='waiter'></div>"+"<div class='choices' style='display: none'></div>"+"<div class='bottombar' style='display: none;'>"+"<button class='prevnext' id='butSkeNext'>More »</button>"+"<button class='prevnext' id='butSkePrev'>«</button>"+"<button class='insert' onclick='Ske.insertDefo()'>Insert</button>"+"</div>"+"</div>"},Ske.toggleDefo=function(e){$(e).prop("checked")?$(e.parentNode).addClass("selected"):$(e.parentNode).removeClass("selected")},Ske.searchDefo=function(e){$("#butSkePrev").hide(),$("#butSkeNext").hide(),$(".skebox .choices").hide(),$(".skebox .bottombar").hide(),$(".skebox .waiter").show();var t=$.trim($(".skebox .textbox").val());""!=t&&$.get("/"+dictId+"/skeget/defo/",{url:kex.apiurl,corpus:kex.corpus,username:ske_username,apikey:ske_apiKey,lemma:t,fromp:e},function(e){if($(".skebox .choices").html(""),e.error&&"Empty result"==e.error)$(".skebox .choices").html("<div class='error'>No results found.</div>"),$(".skebox .waiter").hide(),$(".skebox .choices").fadeIn();else if(e.Lines){e.prevlink&&$("#butSkePrev").show().on("click",function(){Ske.searchExamples(e.prevlink),$("div.skebox button.prevnext").off("click")}),e.nextlink&&$("#butSkeNext").show().on("click",function(){Ske.searchExamples(e.nextlink),$("div.skebox button.prevnext").off("click")});for(var t=0;t<e.Lines.length;t++){for(var a=e.Lines[t],n="",i=0;i<a.Left.length;i++)n+=a.Left[i].str;for(var n=n.replace(/\<[^\<\>]+\>/g,""),r="",i=0;i<a.Kwic.length;i++)r+=a.Kwic[i].str;for(var r=r.replace(/<[^\<\>]+\>/g,""),s="",i=0;i<a.Right.length;i++)s+=a.Right[i].str;var o=n+r+(s=s.replace(/<[^\<\>]+\>/g,""));$(".skebox .choices").append("<label><input type='checkbox' onchange='Ske.toggleDefo(this)'/><span class='inside'>"+o+"</span></label>"),$(".skebox .waiter").hide(),$(".skebox .choices").fadeIn(),$(".skebox .bottombar").show()}}else $(".skebox .choices").html("<div class='error'>There has been an error getting data from Sketch Engine.</div>"),$(".skebox .waiter").hide(),$(".skebox .choices").fadeIn()})},Ske.insertDefo=function(){$(".skebox div.choices label").each(function(){var e=$(this);e.hasClass("selected")&&(e=e.find("span.inside").html(),e=defo.template.replace("$text",e),Ske.htmlID?Xonomy.newElementChild(Ske.htmlID,e):Xonomy.newElementLayby(e))})},window.Kontext={},Kontext.change=function(){},Kontext.settings={defaultURL:"https://www.clarin.si/kontext/"},Kontext.ifchange=function(e){e=$(e.delegateTarget);e.val()!=e.data("origval")&&Kontext.change()},Kontext.render=function(e,t){$(e).append("<div id='pagebody' class='notop'><div class='pillarform'></div></div>");for(var e=$(e).find("div.pillarform"),a=(e.append("<div class='title'>KonText URL</div>"),e.append("<input class='textbox' id='kontext_url'/>"),""!=t.url&&null!=t.url||(t.url=Kontext.settings.defaultURL),e.find("#kontext_url").val(t.url).data("origval",t.url).on("change keyup",Kontext.ifchange),e.append("<div class='instro'>The URL of the KonText installation where external links should point. Defaults to <code>https://www.clarin.si/kontext/</code>. </div>"),e.append("<div class='title'>Corpus name</div>"),e.append("<input class='textbox' id='kontext_corpus' value='Retrieving available corpora from KonText, please wait...' disabled/>"),$("#kontext_corpus")),n=(a.data("corpname",t.corpus),$.get({url:"/"+dictID+"/kontext/corpora"}).done(function(e){Kontext.corpora=e.corpus_list,a.easyAutocomplete({theme:"blue-light",data:Kontext.corpora,getValue:"name",list:{maxNumberOfElements:20,match:{enabled:!0,method:function(e,t){return-1!==e.indexOf(t)}},onSelectItemEvent:function(){var e=a.getSelectedItemData().corpus_id;t.corpus!=e&&(a.data("corpus_id",e),Kontext.change())}},placeholder:"Type to search in the list of corpora",template:{type:"custom",method:function(e,t){return t.name+" ("+t.desc+"; "+t.size_info+")"}}}),a.prop("disabled",!1),t.corpus?(e=e.corpus_list.find(function(e){return e.corpus_id==t.corpus}))?(a.val(e.name),$("<div class='instro'>Currently selected corpus: "+e.name+"</div>").insertAfter($("#kontext_corpus").parent())):a.val("Your current corpus is no longer available, please select a new one."):a.val("")}),e.append("<div class='instro'>Select a KonText corpus from the list of corpora available to you.</div>"),e.append("<div class='title'>Concordance query</div>"),e.append("<input class='textbox' id='kontext_concquery'/>"),e.find("#kontext_concquery").val(t.concquery).data("origval",t.concquery).on("change keyup",Kontext.ifchange),e.append("<div class='instro'>The CQL query that will be used to obtain concordance from KonText. You can use placeholders for elements in the form of '%(element)', e.g. '[lemma=\"%(headword)\"]'. If left empty the 'simple' query type will be used as configured for the respective corpus. Please note that you cannot use CQL syntax with default attribute because it is not specified.</div>"),t.searchElements||(t.searchElements=[]),e.append("<div class='title'>Additional search elements</div>"),e.append("<div class='scrollbox'>"),e.find(".scrollbox")),i=Xematron.listElements(xema),r=0;r<i.length;r++){var s=-1!=["txt","lst"].indexOf(xema.elements[i[r]].filling);n.append("<div><label class='radio' data-name='"+i[r]+"'>          <input type='checkbox' data-name='"+i[r]+"' "+(-1<t.searchElements.indexOf(i[r])?"checked":"")+" "+(s?"":"disabled")+"/>           "+i[r]+"</label></div>")}n.find("label").on("click",Kontext.change),n.parent().append("<div class='instro'>You can select any textual elements here whose content you would like to search for in KonText. A menu will be displayed next to all these elements like for the root entry element.</div>"),(o=$("<div class='block container'></div>").appendTo(e)).append("<div class='title'>Example container</div>"),o.append("<select></select>"),o.find("select").append("<option value=''>(not set)</option>");for(var o,r=0;r<i.length;r++)o.find("select").append("<option "+(t.container==i[r]?"selected='selected'":"")+" value='"+i[r]+"'>"+i[r]+"</option>");o.find("select").on("change",function(e){Kontext.containerChanged()}),o.append("<div class='instro'>Select the element which should wrap each individual example. When you pull example sentences automatically from a corpus, Lexonomy will insert one of these elements for each example sentence.</div>"),(o=$("<div class='block template'></div>").appendTo(e)).append("<div class='title'>XML template</div>"),o.append("<textarea class='textbox' spellcheck='false'></textarea>"),o.find("textarea").val(t.template).data("origval",t.template).on("change keyup",function(e){Kontext.validateTemplate()}),o.append("<div class='instro'>This is the XML that will be inserted into your entries with each corpus example. The actual text will be where the placeholder <code>$text</code> is.</div>"),o.append("<div class='error' style='display: none;'></div>"),Kontext.validateTemplate(),(o=$("<div class='block markup'></div>").appendTo(e)).append("<div class='title'>Headword mark-up</div>"),o.append("<select></select>"),o.find("select").append("<option value=''>(none)</option>");for(r=0;r<i.length;r++)o.find("select").append("<option "+(t.markup==i[r]?"selected='selected'":"")+" value='"+i[r]+"'>"+i[r]+"</option>");o.append("<div class='instro'>Select the element which should mark up the headword in inserted corpus examples. This setting is optional: if you make no selection, corpus examples will be inserted without mark-up.</div>")},Kontext.containerChanged=function(){var e=$(".pillarform .block.container select").val(),t=$.trim($(".pillarform .block.template textarea").val());if(!t&&e)$(".pillarform .block.template textarea").val(Kontext.composeTemplate(e));else{try{var a=$.parseXML(t)}catch(e){}e&&a.documentElement.localName!=e&&$(".pillarform .block.template textarea").val(Kontext.composeTemplate(e))}Kontext.validateTemplate()},Kontext.validateTemplate=function(){var e=$(".pillarform .block.container select").val(),t=$.trim($(".pillarform .block.template textarea").val());if(e&&t)try{var a=$.parseXML(t);$(".pillarform .block.template .error").hide(),e&&a.documentElement.localName!=e?$(".pillarform .block.template .error").html("The top-level element should be <code>"+e+"</code>.").show():/\$text/.test(t)||$(".pillarform .block.template .error").html("The <code>$text</code> symbol is missing.").show()}catch(e){$(".pillarform .block.template .error").html("The XML is invalid.").show()}},Kontext.composeTemplate=function(e){for(var e=$.parseXML(Xematron.initialElement(xema,e)),t=e.getElementsByTagName("*"),a=0;a<t.length;a++){var n=t[a];if("txt"==xema.elements[n.localName].filling||"inl"==xema.elements[n.localName].filling){n.innerHTML="$text";break}}return e.documentElement.outerHTML},Kontext.harvest=function(e){var e=$(e),t={};return t.url=$.trim(e.find("#kontext_url").val())||Kontext.settings.defaultURL,t.corpus=$("#kontext_corpus").data("corpus_id")||"",t.concquery=$.trim(e.find("#kontext_concquery").val()),t.searchElements=[],$(".pillarform .scrollbox label input").each(function(){var e=$(this);e.prop("checked")&&t.searchElements.push(e.attr("data-name"))}),t.container=$(".pillarform .block.container select").val(),t.template=$(".pillarform .block.template textarea").val(),t.markup=$(".pillarform .block.markup select").val(),t},Kontext.extendDocspec=function(e,t){var a;kontext.corpus&&!subbing[t.root]&&(e=e.elements[t.root],a=e.caption,e.caption=function(e){var t="",t="<span class='lexonomyKontextCaption' onclick='Xonomy.notclick=true; Kontext.menuRoot(\""+e.htmlID+"\")'>▼</span>";return"function"==typeof a&&(t=a(e)+t),t="string"==typeof a?a+t:t})},Kontext.menuRoot=function(e,t=!1){var a="<div class='menu'>";t||kontext.container&&(a=(a=a+"<div class='menuItem' onclick='Kontext.menuExamples(\""+e+"\", \"layby\")'><span class='icon'><img src='../../../furniture/kontext.png'/></span> ")+"Find examples <span class='techno'><span class='punc'>&lt;</span><span class='elName'>"+kontext.container+"</span><span class='punc'>&gt;</span></span></div>"),(t=t?encodeURIComponent(Kontext.getSearchword(e)):encodeURIComponent(Kontext.getHeadword()))&&(a=(a+="<div class='menuItem')'>")+"<a target='kontext' href='/"+dictID+"/kontext/conc?lemma="+t+"&redir=1'><span class='icon'><img src='../../../furniture/kontext.png'/></span> Show concordance</a></div>"),a+="</div>",document.body.appendChild(Xonomy.makeBubble(a)),Xonomy.showBubble($("#"+e+" > .inlinecaption"))},Kontext.getHeadword=function(){return $($.parseXML(Xonomy.harvest())).find(titling.headword).html()||""},Kontext.getSearchword=function(e){return Xonomy.harvestElement(document.getElementById(e)).getText()},Kontext.menuExamples=function(e,t){Kontext.htmlID="layby"==t?null:e,document.body.appendChild(Xonomy.makeBubble(Kontext.boxExamples())),$("input[name=kontextsearchtype]").on("click",function(){var e="kontextsimple"==$(this).val();$("#kontextsimple").nextAll("input").first().prop("disabled",!e),$("#kontextcql").nextAll("input").first().prop("disabled",e)}),"openingTagName"==Xonomy.lastClickWhat?Xonomy.showBubble($("#"+e+" > .tag.opening > .name")):"closingTagName"==Xonomy.lastClickWhat?Xonomy.showBubble($("#"+e+" > .tag.closing > .name")):Xonomy.showBubble($("#"+e)),Kontext.getHeadword()?Kontext.searchExamples():$(".kontextbox .waiter").hide()},Kontext.boxExamples=function(){var e="",e="<div class='kontextbox'>";return e+="<form class='topbar' onsubmit='Kontext.searchExamples(); return false'>",e=(e=(e=(e=(e=(e=0<kontext.concquery.length?(e=(e+="<input id='kontextsimple' type='radio' name='kontextsearchtype' value='kontextsimple'/><label for='kontextsimple'>Simple search: </label>")+"<input disabled name='val' class='textbox simple' value='"+Kontext.getHeadword()+"'/> <input id='kontextcql' type='radio' name='kontextsearchtype' checked value='kontextcql'/><label for='kontextcql'>CQL: </label>")+"<input name='val' class='textbox cql focusme' value='"+Kontext.getCQL(kontext.concquery)+"'/> ":(e+="<input id='kontextsimple' type='radio' name='kontextsearchtype' checked value='kontextsimple'/><label for='kontextsimple'>Simple search: </label>")+"<input name='val' class='textbox simple focusme' value='"+Kontext.getHeadword()+"'/> <input id='kontextcql' type='radio' name='kontextsearchtype' value='kontextcql'/><label for='kontextcql'>CQL: </label><input name='val' class='textbox cql' disabled/> ")+"<input type='submit' class='button kontext' value='&nbsp;'/>"+"</form>")+"<div class='waiter'></div>"+"<div class='choices' style='display: none'></div>")+"<div class='bottombar' style='display: none;'>"+"<button class='prevnext' id='butKontextNext'>More »</button>")+"<button class='prevnext' id='butKontextPrev'>«</button>"+"<button class='insert' onclick='Kontext.insertExamples()'>Insert</button>")+"</div>"+"</div>"},Kontext.toggleExample=function(e){$(e).prop("checked")?$(e.parentNode).addClass("selected"):$(e.parentNode).removeClass("selected")},Kontext.searchExamples=function(e){$("#butKontextPrev").hide(),$("#butKontextNext").hide(),$(".kontextbox .choices").hide(),$(".kontextbox .bottombar").hide(),$(".kontextbox .waiter").show();var t=$.trim($(".kontextbox input.textbox:enabled").val()),a=$("input[name=kontextsearchtype]:checked").val();""!=t&&$.get(rootPath+dictID+"/kontext/conc/",{querytype:a,query:t,fromp:e},function(e){if($(".kontextbox .choices").html(""),e.error&&"Empty result"==e.error)$(".kontextbox .choices").html("<div class='error'>No results found.</div>"),$(".kontextbox .waiter").hide(),$(".kontextbox .choices").fadeIn();else if(e.Lines){e.pagination.prevPage&&$("#butKontextPrev").show().on("click",function(){Kontext.searchExamples(e.pagination.prevPage),$("div.kontextbox button.prevnext").off("click")}),e.pagination.nextPage&&$("#butKontextNext").show().on("click",function(){Kontext.searchExamples(e.pagination.nextPage),$("div.kontextbox button.prevnext").off("click")});for(var t=0;t<e.Lines.length;t++){for(var a=e.Lines[t],n="",i=0;i<a.Left.length;i++)n+=a.Left[i].str;for(var n=n.replace(/\<[^\<\>]+\>/g,""),r="",i=0;i<a.Kwic.length;i++)r+=a.Kwic[i].str;for(var r=r.replace(/<[^\<\>]+\>/g,""),s="",i=0;i<a.Right.length;i++)s+=a.Right[i].str;var o=n+"<b>"+r+"</b>"+(s=s.replace(/<[^\<\>]+\>/g,""));o=(o=o.replace("<b> "," <b>")).replace(" </b>","</b> "),$(".kontextbox .choices").append("<label><input type='checkbox' onchange='Kontext.toggleExample(this)'/><span class='inside'>"+o+"</span></label>"),$(".kontextbox .waiter").hide(),$(".kontextbox .choices").fadeIn(),$(".kontextbox .bottombar").show()}}else $(".kontextbox .choices").html("<div class='error'>There has been an error getting data from KonText.</div>"),$(".kontextbox .waiter").hide(),$(".kontextbox .choices").fadeIn()})},Kontext.getCQL=function(e){var t=$($.parseXML(Xonomy.harvest()));return e.replace(/%\([^)]+\)/g,function(e){return t.find(e.substring(2,e.length-1)).html()})},Kontext.insertExamples=function(){$(".kontextbox div.choices label").each(function(){var e=$(this);e.hasClass("selected")&&(e=e.find("span.inside").html(),e=kontext.markup?(e=e.replace("<b>","<"+kontext.markup+">")).replace("</b>","</"+kontext.markup+">"):(e=e.replace("<b>","")).replace("</b>",""),e=kontext.template.replace("$text",e),Kontext.htmlID?Xonomy.newElementChild(Kontext.htmlID,e):Xonomy.newElementLayby(e))})},window.Gmedia={},Gmedia.extendDocspec=function(e,t){if(gapi.apikey&&gapi.cx)for(var a in t.elements){var n;"med"==t.elements[a].filling&&(a=e.elements[a],n=a.caption,a.caption=function(e){var t="",t="<span class='lexonomyGmediaCaption' onclick='Xonomy.notclick=true; Gmedia.menuRoot(\""+e.htmlID+"\")'>▼</span>";return"function"==typeof n&&(t=n(e)+t),t="string"==typeof n?n+t:t})}},Gmedia.getHeadword=function(){return $($.parseXML(Xonomy.harvest())).find(titling.headword).html()||""},Gmedia.addLink=function(e,t){$("#"+e+" .children div").attr("data-value",t.getAttribute("data-url")),$("#"+e+" .children div").removeClass("empty"),$("#"+e+" .children div").removeClass("whitespace"),$("#"+e+" .children div .value .word").html(t.getAttribute("data-url")),Xonomy.changed()},Gmedia.menuRoot=function(a){var e="<div class='menu'>",t=Gmedia.getHeadword();""!=t?(e+="searching for: "+t,t="/"+dictID+"/getmedia/"+t,$.get(t,function(e){e.images&&0<e.images.length?($("#xonomyBubbleContent .menu").html(""),e.images.forEach(e=>{var t=(t="<i>"+e.title+"</i><br/>")+("<img onclick=\"Gmedia.addLink('"+a+'\', this)" data-url="'+e.url+'" src="'+e.thumb+'" class="Gmediathumb">')+"</br>";$("#xonomyBubbleContent .menu").append(t)})):$("#xonomyBubbleContent .menu").html("no results found")})):e+="no headword set",e+="</div>",document.body.appendChild(Xonomy.makeBubble(e)),Xonomy.showBubble($("#"+a+" > .inlinecaption"))},Gmedia.addVoice=function(e){gapi.voicekey&&""!=gapi.voicekey&&""!=gapi.voicelang&&""!=(e=(e?$($.parseXML(e.content)):$($.parseXML(Xonomy.harvest()))).find(titling.headword).html())&&($("#viewer").append('<div id="voicetts"><audio controls src="https://api.voicerss.org/?key='+gapi.voicekey+"&hl="+gapi.voicelang+"&src="+e+'"/></div>'),$("#editor").append('<div id="voicetts"><audio controls src="https://api.voicerss.org/?key='+gapi.voicekey+"&hl="+gapi.voicelang+"&src="+e+'"/></div>'))},Gmedia.addVoicePublic=function(e,t,a){e=$($.parseXML(e.content)).find(a.headword).html();""!=e&&t.voicekey&&""!=t.voicekey&&""!=t.voicelang&&$("#viewer div:first span:first").after('<span class="voicetts"><audio id="voiceplayer" src="https://api.voicerss.org/?key='+t.voicekey+"&hl="+t.voicelang+"&src="+e+'"/><span class="voicetts-icon"><img src="./furniture/speaker.png" onclick="document.getElementById(\'voiceplayer\').play()"></span></span>')},window.Sub={},Sub.htmID="",Sub.extendDocspec=function(e,t){for(var a in t.elements){var i;subbing[a]&&(e.elements[a].backgroundColour=function(e){var t=e.getAttributeValue("lxnm:subentryID",0),a=[];return e.getChildElements("lxnm:subentryParent").map(function(e){e.getAttributeValue("id")!=Screenful.Editor.entryID&&a.push(e)}),t&&0<a.length?"#e6e6e6":""},i=e.elements[a].caption,e.elements[a].caption=function(e){var t="",a=e.getAttributeValue("lxnm:subentryID",0),n=[];return e.getChildElements("lxnm:subentryParent").map(function(e){e.getAttributeValue("id")!=Screenful.Editor.entryID&&n.push(e)}),a&&0<n.length&&(t+=+n.length+" ▼",t="<span class='lexonomySubentryCaption' onclick='Xonomy.notclick=true; Sub.menuSubentry(\""+e.htmlID+"\")'>"+t+"</span>"),"function"==typeof i&&(t=i(e)+t),t="string"==typeof i?i+t:t})}for(var n in t.elements)for(var a in subbing)if(t.elements[n].children){canHaveSubs=!1;for(var r=0;r<t.elements[n].children.length;r++)if(t.elements[n].children[r].name==a){canHaveSubs=!0;break}canHaveSubs&&e.elements[n]&&(e.elements[n].menu||(e.elements[n].menu=[]),e.elements[n].menu.push({icon:"/furniture/favicon.png",caption:"Find subentries <"+a+">",action:Sub.menuSubentries,actionParameter:{elName:a}}))}},Sub.menuSubentry=function(e){var t=Xonomy.harvestElement($("#"+e)[0]),a=t.getAttributeValue("lxnm:subentryID",0),n=[],i=(t.getChildElements("lxnm:subentryParent").map(function(e){e.getAttributeValue("id")!=Screenful.Editor.entryID&&n.push(e)}),"<div class='subinfobox'>");t.parent()||0<$("#"+e).closest(".xonomy .layby").length?0==n.length?i+="<div class='topline'><span class='opener' onclick='Xonomy.clickoff(); Screenful.Editor.open(null, "+a+")'>This subentry</span> is not shared with any other entry.</div>":1==n.length?i+="<div class='topline'><span class='opener' onclick='Xonomy.clickoff(); Screenful.Editor.open(null, "+a+")'>This subentry</span> is shared with one other entry.</div>":i+="<div class='topline'><span class='opener' onclick='Xonomy.clickoff(); Screenful.Editor.open(null, "+a+")'>This subentry</span> is shared with "+n.length+" other entries.</div>":0==n.length?i+="<div class='topline'>This subentry is not embedded in any entries.</div>":1==n.length?i+="<div class='topline'>This subentry is embedded in one entry.</div>":i+="<div class='topline'>This subentry is shared by "+n.length+" entries.</div>",0<n.length&&(i+="<div class='entrylines'>",n.map(function(e){var t=e.getAttributeValue("id",0),e=e.getAttributeValue("title",t);i+="<div class='entryline' onclick='Xonomy.clickoff(); Screenful.Editor.open(null, "+t+")'>"+e+"</div>"}),i+="</div>"),i+="</div>",document.body.appendChild(Xonomy.makeBubble(i)),Xonomy.showBubble($("#"+e+" > .inlinecaption"))},Sub.getHeadword=function(){return $($.parseXML(Xonomy.harvest())).find(titling.headword).html().replace(/(<([^>]+)>)/gi,"")||""},Sub.menuSubentries=function(e,t){Sub.htmlID=e,document.body.appendChild(Xonomy.makeBubble(Sub.boxSubentries(t.elName))),"openingTagName"==Xonomy.lastClickWhat?Xonomy.showBubble($("#"+e+" > .tag.opening > .name")):"closingTagName"==Xonomy.lastClickWhat?Xonomy.showBubble($("#"+e+" > .tag.closing > .name")):Xonomy.showBubble($("#"+e)),Sub.getHeadword()?Sub.searchSubentries():$(".subbox .waiter").hide()},Sub.boxSubentries=function(e){var t="<div class='subbox'>";return(t+="<form class='topbar' onsubmit='Sub.searchSubentries(); return false'>")+("<input name='val' class='textbox focusme' value='"+Sub.getHeadword()+"'/> ")+("<input name='doctype' type='hidden' value='"+e+"'/> ")+"<input type='submit' class='button sub' value='&nbsp;'/>"+("<button class='creator' onclick='Sub.newSubentry(\""+e+"\"); return false;'>New</button>")+"</form>"+"<div class='waiter'></div>"+"<div class='choices' style='display: none'></div>"+"<div class='bottombar' style='display: none;'>"+"<button class='insert' onclick='Sub.insertSubentries()'>Insert</button>"+"</div>"+"</div>"},Sub.newSubentry=function(e){e=Xematron.initialElement(xema,e);Xonomy.newElementChild(Sub.htmlID,e),Xonomy.clickoff()},Sub.toggleSubentry=function(e){$(e).prop("checked")?$(e.parentNode).addClass("selected"):$(e.parentNode).removeClass("selected")},Sub.searchSubentries=function(){$(".subbox .choices").hide(),$(".subbox .bottombar").hide(),$(".subbox .waiter").show();var e=$.trim($(".subbox .textbox").val()),t=$.trim($('input[name="doctype"]').val());""!=e&&$.get("/"+dictId+"/subget/",{lemma:e,doctype:t},function(e){if($(".subbox .choices").html(""),e.success)if(0==e.total)$(".subbox .choices").html("<div class='error'>No matches found.</div>"),$(".subbox .waiter").hide(),$(".subbox .choices").fadeIn();else for(var t=0;t<e.entries.length;t++){var a=e.entries[t];$(".subbox .choices").append("<label><input type='checkbox' onchange='Sub.toggleSubentry(this)'/><span class='inside'>"+a.title+"</span></label>"),$(".subbox .choices label").last().data("xml",a.xml),$(".subbox .waiter").hide(),$(".subbox .choices").fadeIn(),$(".subbox .bottombar").show()}else $(".subbox .choices").html("<div class='error'>There has been an error getting data from Lexonomy.</div>"),$(".subbox .waiter").hide(),$(".subbox .choices").fadeIn()})},{css:'main .contentWrapper,[is="main"] .contentWrapper{ position: relative; } main .content,[is="main"] .content{ padding-left: 10px; min-height: 50vh; } main .wideContainer,[is="main"] .wideContainer{ max-width: 1600px; width: 90vw; }',exports:{state:{content:"",subPage:"login",token:""},bindings:[["auth","authChanged","update"],["auth","checkingAuthChanged","onCheckingAuthChange"],["store","dictionaryChanged","update"]],onCheckingAuthChange(){this.update(),this.authData.authorized&&this.store.loadDictionaryList(),route.start(!0)},goTo(e,t,a,n){!this.authData.authorized&&this.needAuthorization(e,t)?this.update({subPage:"login",content:"main-page"}):(a&&this.store.open(...a),a=route.query(),this.store.changeSearchParams({searchtext:decodeURIComponent(a.s||""),modifier:a.m}),this.update(Object.assign({content:e,subPage:t||""},n||{})))},needAuthorization(e,t){return!(["e404","open-dict-list","dict-public","dict-public-entry","docs-intro"].includes(e)||"main-page"==e&&!["new","userprofile"].includes(t))},onBeforeMount(){$.ajaxSetup({xhrFields:{withCredentials:!0}}),this.auth.checkAuthCookie(),this.store.loadSiteconfig().always(this.update.bind(this)),new window.AppUpdaterClass({url:window.window.API_URL+"version.txt",windowVersionKey:"LEXONOMY_VERSION"}),route("/api",()=>{this.goTo.bind(this,"api")}),route("/e404",()=>{this.goTo("e404")}),route("/opendictionaries",()=>{this.goTo("open-dict-list")}),route("/docs/intro",()=>{this.goTo("docs-intro")}),route("/createaccount/*",e=>{this.goTo("main-page","registerPassword","",{token:e})}),route("/recoverpwd/*",e=>{this.goTo("main-page","forgotPassword","",{token:e})}),route("/register",()=>{this.goTo("main-page","register")}),route("/forgot",()=>{this.goTo("main-page","forgot")}),route("/userprofile",()=>{this.goTo("main-page","userprofile")}),route("/make",()=>{this.goTo("main-page","new")}),route("/*/edit(?*){0,1}",e=>{this.goTo("dict-edit","",[e])}),route("/*/edit/*(?*){0,1}",(e,t)=>{this.goTo("dict-edit","",[e,t])}),route("/*/edit/*/*/*(?*){0,1}",(e,t,a,n)=>{this.goTo("dict-edit","",[e,t,a,n])}),route("/*/([0-9]+)(?*){0,1}",(e,t)=>{this.goTo("dict-public-entry","",[e,null,t])}),route("/*/config/*",(e,t)=>{this.goTo("dict-config-"+t,"",[e])}),route("/*/config",e=>{this.goTo("dict-config","",[e])}),route("/*/links",e=>{this.goTo("dict-links","",[e])}),route("/*/download",e=>{this.goTo("dict-download","",[e])}),route("/*/upload",e=>{this.goTo("dict-upload","",[e])}),route("/*",e=>{this.goTo("dict-public","",[e])}),route("/",()=>{this.goTo("main-page","login")})}},template:(e,t,a,n)=>e('<loading-overlay expr1220="expr1220" fullscreen="1"></loading-overlay><app-header expr1221="expr1221"></app-header><div class="contentWrapper"><div expr1222="expr1222"></div></div><app-footer expr1223="expr1223"></app-footer>',[{expressions:[{type:t.ATTRIBUTE,name:"class",evaluate:e=>"main"}]},{type:a.IF,evaluate:e=>e.authData.isCheckingAuth||e.dictData.isSiteconfigLoading,redundantAttribute:"expr1220",selector:"[expr1220]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.TAG,getComponent:n,evaluate:e=>"app-header",slots:[],attributes:[],redundantAttribute:"expr1221",selector:"[expr1221]"},{type:a.IF,evaluate:e=>!e.authData.isCheckingAuth&&!e.dictData.isSiteconfigLoading,redundantAttribute:"expr1222",selector:"[expr1222]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>e.state.content,slots:[],attributes:[{type:t.ATTRIBUTE,name:"class",evaluate:e=>["container content row ",["dict-edit","dict-public-entry","dict-public"].includes(e.state.content)?"wideContainer":""].join("")},{type:t.ATTRIBUTE,name:"token",evaluate:e=>e.state.token},{type:t.ATTRIBUTE,name:"main-sub-page",evaluate:e=>e.state.subPage}]}])},{type:a.TAG,getComponent:n,evaluate:e=>"app-footer",slots:[],attributes:[],redundantAttribute:"expr1223",selector:"[expr1223]"}]),name:"main"}),S={css:null,exports:{listLang(){var e=$("#input_listLang").val();$.ajax("/api/listLang",{method:"POST",contentType:"application/json",data:e,processData:!1,dataType:"json"}).done(function(e){console.log(e)})},listDict(){var e=$("#input_listDict").val();$.ajax("/api/listDict",{method:"POST",contentType:"application/json",data:e,processData:!1,dataType:"json"}).done(function(e){console.log(e)})},listDict2(){var e=$("#input_listDict2").val();$.ajax("/api/listDict",{method:"POST",contentType:"application/json",data:e,processData:!1,dataType:"json"}).done(function(e){console.log(e)})},listDict3(){var e=$("#input_listDict3").val();$.ajax("/api/listDict",{method:"POST",contentType:"application/json",data:e,processData:!1,dataType:"json"}).done(function(e){console.log(e)})},listLinks1(){var e=$("#input_listLinks1").val();$.ajax("/api/listLinks",{method:"POST",contentType:"application/json",data:e,processData:!1,dataType:"json"}).done(function(e){console.log(e)})},listLinks2(){var e=$("#input_listLinks2").val();$.ajax("/api/listLinks",{method:"POST",contentType:"application/json",data:e,processData:!1,dataType:"json"}).done(function(e){console.log(e)})},listLinks3(){var e=$("#input_listLinks3").val();$.ajax("/api/listLinks",{method:"POST",contentType:"application/json",data:e,processData:!1,dataType:"json"}).done(function(e){console.log(e)})},makeDictTei(){var e=$("#input_makeDictTei").val();$.ajax("push.api",{method:"POST",contentType:"application/json",data:e,processData:!1,dataType:"json"}).done(function(e){console.log(e)})},createEntriesTei(){var e=$("#input_createEntriesTei").val();console.log(e),$.ajax("push.api",{method:"POST",contentType:"application/json",data:e,processData:!1,dataType:"json"}).done(function(e){console.log(e)})},makeDict(){var e=$("#input_makeDict").val();$.ajax("push.api",{method:"POST",contentType:"application/json",data:e,processData:!1,dataType:"json"}).done(function(e){console.log(e)})},createEntries(){var e=$("#input_createEntries").val();console.log(e),$.ajax("push.api",{method:"POST",contentType:"application/json",data:e,processData:!1,dataType:"json"}).done(function(e){console.log(e)})}},template:(e,t,a,n)=>e('<div class="container"><h2>Lexonomy API documentation and test</h2><p>Lexonomy also supports <a href="https://elexis-eu.github.io/elexis-rest/">ELEXIS REST API</a> - calls <tt expr1224="expr1224"></tt>. Use your API key as <tt expr1225="expr1225"></tt>.</p><hr/><p>Following calls are Lexonomy API with specific information.</p><p expr1226="expr1226"><b>API URL:</b> </p><hr/><h3>List languages used in dictionaries</h3><p expr1227="expr1227"> </p><textarea id="input_listLang" style="font-size: 1rem; width: 100%; height: 5em; resize: vertical" spellcheck="false">{\n         "email": "rambousek@gmail.com",\n         "apikey": "I0BNKTQEZUI9ZBMUX7ABQG1A6LMKUZOU"\n      }</textarea><button expr1228="expr1228">Post</button> and watch your console.\n      <hr/><h3>List all dictionaries metadata</h3><p expr1229="expr1229"> </p><textarea id="input_listDict" style="font-size: 1rem; width: 100%; height: 5em; resize: vertical" spellcheck="false">{\n         "email": "rambousek@gmail.com",\n         "apikey": "I0BNKTQEZUI9ZBMUX7ABQG1A6LMKUZOU"\n      }</textarea><button expr1230="expr1230">Post</button> and watch your console.\n      <hr/><h3>List dictionaries metadata for selected language</h3><p expr1231="expr1231"> </p><textarea id="input_listDict2" style="font-size: 1rem; width: 100%; height: 7em; resize: vertical" spellcheck="false">{\n         "email": "rambousek@gmail.com",\n         "apikey": "I0BNKTQEZUI9ZBMUX7ABQG1A6LMKUZOU",\n         "lang": "sl"\n      }</textarea><button expr1232="expr1232">Post</button> and watch your console.\n      <hr/><h3>List dictionaries metadata for selected language, with links only</h3><p expr1233="expr1233"> </p><textarea id="input_listDict3" style="font-size: 1rem; width: 100%; height: 7em; resize: vertical" spellcheck="false">{\n         "email": "rambousek@gmail.com",\n         "apikey": "I0BNKTQEZUI9ZBMUX7ABQG1A6LMKUZOU",\n         "lang": "sl",\n         "withLinks": true\n      }</textarea><button expr1234="expr1234">Post</button> and watch your console.\n      <hr/><h3>Find links, from headword in language</h3><p expr1235="expr1235"> </p><textarea id="input_listLinks1" style="font-size: 1rem; width: 100%; height: 7em; resize: vertical" spellcheck="false">{\n         "email": "rambousek@gmail.com",\n         "apikey": "I0BNKTQEZUI9ZBMUX7ABQG1A6LMKUZOU",\n         "headword": "zopet",\n         "sourceLanguage": "sl"\n      }</textarea><button expr1236="expr1236">Post</button> and watch your console.\n      <hr/><h3>Find links, headword with specific dictionary</h3><p expr1237="expr1237"> </p><textarea id="input_listLinks2" style="font-size: 1rem; width: 100%; height: 7em; resize: vertical" spellcheck="false">{\n         "email": "rambousek@gmail.com",\n         "apikey": "I0BNKTQEZUI9ZBMUX7ABQG1A6LMKUZOU",\n         "headword": "zopet",\n         "sourceLanguage": "sl",\n         "sourceDict": "elexis-zrcsazu-pletersnik"\n      }</textarea><button expr1238="expr1238">Post</button> and watch your console.\n      <hr/><h3>Find links, headword to target language</h3><p expr1239="expr1239"> </p><textarea id="input_listLinks3" style="font-size: 1rem; width: 100%; height: 7em; resize: vertical" spellcheck="false">{\n         "email": "rambousek@gmail.com",\n         "apikey": "I0BNKTQEZUI9ZBMUX7ABQG1A6LMKUZOU",\n         "headword": "zopet",\n         "sourceLanguage": "sl",\n         "targetLanguage": "en"\n      }</textarea><button expr1240="expr1240">Post</button> and watch your console.\n\n      <h2>Lexonomy Push API documentation and test</h2><p expr1241="expr1241"><b>PUSH API URL:</b> </p><h3>Make a dictionary, TEI Lex0 format</h3><textarea id="input_makeDictTei" style="font-size: 1rem; width: 100%; height: 11em; resize: vertical" spellcheck="false">{\n         "email": "rambousek@gmail.com",\n         "apikey": "I0BNKTQEZUI9ZBMUX7ABQG1A6LMKUZOU",\n         "command": "makeDict",\n         "format": "teilex0",\n         "dictTitle": "My TEI Lex0 Dictionary",\n         "dictBlurb": "Yet another dictionary draft."\n      }</textarea><button expr1242="expr1242">Post</button> and watch your console.\n      <h3>Create entries, TEI Lex0 format</h3><textarea id="input_createEntriesTei" style="font-size: 1rem; width: 100%; height: 9em; resize: vertical" spellcheck="false">{\n         "email": "rambousek@gmail.com",\n         "apikey": "I0BNKTQEZUI9ZBMUX7ABQG1A6LMKUZOU",\n         "command": "createEntries",\n         "format": "teilex0",\n         "dictID": "jakobrno",\n         "entryXmls": ["<entry><form type=\'lemma\'><orth>Earth</orth></form></entry>", "<entry><form type=\'lemma\'><orth>Mars</orth></form></entry>"]\n      }</textarea><button expr1243="expr1243">Post</button> and watch your console.\n      <h3>Make a dictionary</h3><textarea id="input_makeDict" style="font-size: 1rem; width: 100%; height: 11em; resize: vertical" spellcheck="false">{\n         "email": "rambousek@gmail.com",\n         "apikey": "I0BNKTQEZUI9ZBMUX7ABQG1A6LMKUZOU",\n         "command": "makeDict",\n         "dictTitle": "My Pushy Dictionary",\n         "dictBlurb": "Yet another dictionary draft.",\n         "poses": ["n", "v", "adj", "adv"],\n         "labels": ["colloquial", "formal", "mostly plural", "Irish English", "vulgar"]\n      }</textarea><button expr1244="expr1244">Post</button> and watch your console.\n      <h3>Create entries</h3><textarea id="input_createEntries" style="font-size: 1rem; width: 100%; height: 9em; resize: vertical" spellcheck="false">{\n         "email": "rambousek@gmail.com",\n         "apikey": "I0BNKTQEZUI9ZBMUX7ABQG1A6LMKUZOU",\n         "command": "createEntries",\n         "dictID": "jakobrno",\n         "entryXmls": ["<heslo/>", "<heslo/>"]\n      }</textarea><button expr1245="expr1245">Post</button> and watch your console.\n\n\n   </div>',[{type:a.TAG,getComponent:n,evaluate:e=>"tt",slots:[{id:"default",html:"dictionaries, about, list, lemma, tei",bindings:[]}],attributes:[],redundantAttribute:"expr1224",selector:"[expr1224]"},{type:a.TAG,getComponent:n,evaluate:e=>"tt",slots:[{id:"default",html:"X-API-KEY",bindings:[]}],attributes:[],redundantAttribute:"expr1225",selector:"[expr1225]"},{redundantAttribute:"expr1226",selector:"[expr1226]",expressions:[{type:t.TEXT,childNodeIndex:1,evaluate:e=>[e.dictData.siteconfig.baseUrl,"api"].join("")}]},{redundantAttribute:"expr1227",selector:"[expr1227]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>["POST ",e.dictData.siteconfig.baseUrl,"api/listLang"].join("")}]},{redundantAttribute:"expr1228",selector:"[expr1228]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.listLang}]},{redundantAttribute:"expr1229",selector:"[expr1229]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>["POST ",e.dictData.siteconfig.baseUrl,"api/listDict"].join("")}]},{redundantAttribute:"expr1230",selector:"[expr1230]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.listDict}]},{redundantAttribute:"expr1231",selector:"[expr1231]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>["POST ",e.dictData.siteconfig.baseUrl,"api/listDict"].join("")}]},{redundantAttribute:"expr1232",selector:"[expr1232]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.listDict2}]},{redundantAttribute:"expr1233",selector:"[expr1233]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>["POST ",e.dictData.siteconfig.baseUrl,"api/listDict"].join("")}]},{redundantAttribute:"expr1234",selector:"[expr1234]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.listDict3}]},{redundantAttribute:"expr1235",selector:"[expr1235]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>["POST ",e.dictData.siteconfig.baseUrl,"api/listLinks"].join("")}]},{redundantAttribute:"expr1236",selector:"[expr1236]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.listLinks1}]},{redundantAttribute:"expr1237",selector:"[expr1237]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>["POST ",e.dictData.siteconfig.baseUrl,"api/listLinks"].join("")}]},{redundantAttribute:"expr1238",selector:"[expr1238]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.listLinks2}]},{redundantAttribute:"expr1239",selector:"[expr1239]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>["POST ",e.dictData.siteconfig.baseUrl,"api/listLinks"].join("")}]},{redundantAttribute:"expr1240",selector:"[expr1240]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.listLinks3}]},{redundantAttribute:"expr1241",selector:"[expr1241]",expressions:[{type:t.TEXT,childNodeIndex:1,evaluate:e=>[e.dictData.siteconfig.baseUrl,"push.api"].join("")}]},{redundantAttribute:"expr1242",selector:"[expr1242]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.makeDictTei}]},{redundantAttribute:"expr1243",selector:"[expr1243]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.createEntriesTei}]},{redundantAttribute:"expr1244",selector:"[expr1244]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.makeDict}]},{redundantAttribute:"expr1245",selector:"[expr1245]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.createEntries}]}]),name:"api"},N={css:null,exports:{state:{isSaving:!(Sub.insertSubentries=function(){$(".subbox div.choices label").each(function(){var e=$(this);e.hasClass("selected")&&(e=e.data("xml"),Xonomy.newElementChild(Sub.htmlID,e))})}),info:""},onUpdated(){this.dictData.config.xema&&this.dictData.config.xema.elements&&(0==$("#elements option").length?(Object.entries(this.dictData.config.xema.elements).forEach(([e])=>{$("#elements").append('<option value="'+e+'">'+e+"</option>")}),this.changeElem()):$("select").formSelect(),M.updateTextFields())},changeElem(){$("#children").find("option").remove();var e,t,a=$("#elements").val();for(e in this.dictData.config.xema.elements[a].attributes)$("#children").append("<option value='@"+e+"'>@"+e+"</option>");for(t in this.dictData.config.xema.elements[a].children)$("#children").append("<option value='"+this.dictData.config.xema.elements[a].children[t].name+"'>"+this.dictData.config.xema.elements[a].children[t].name+"</option>");var n=!!this.dictData.config.xema.elements[a].children.length;$("#submit_button").toggleClass("disabled",!n),$("#hasChildren").toggle(n),$("#hasNoChildren").toggle(!n),$("select").formSelect()},addNumbers(){var e=$("#elements").val(),t=$("#children").val();e&&t&&(this.update({isSaving:!0,info:""}),this.store.autonumberElements(e,t).done(e=>{e.success&&this.update({info:"Auto-numbering finished, "+e.processed+" entries updated."})}).always(()=>this.update({isSaving:!1})))}},template:(e,t,a,n)=>e('<loading-overlay expr1210="expr1210"></loading-overlay><dict-nav expr1211="expr1211"></dict-nav><h1>Auto-numbering of elements</h1><div class="row"><p>If you need to number some of entry elements automatically, Lexonomy can do that for you. First, go to Entry structure and add element/attribute where you want to store the number. Eg. in element <tt expr1212="expr1212"></tt> add attribute <tt expr1213="expr1213"></tt>. When you\'re ready, select element to number (eg. <tt expr1214="expr1214"></tt>) and element/attribute to store numbering (eg. <tt expr1215="expr1215"></tt>). Lexonomy will fill the numbers where missing.</p></div><div class="row"><div class="input-field col s4"><select expr1216="expr1216" id="elements"></select><label for="elements">Element to number</label></div><div id="hasChildren" class="input-field col s4"><select id="children"></select><label for="children">Add numbers to</label></div><div id="hasNoChildren" class="input-field col s4 grey-text" style="display: none; padding-top: 10px;">\n         element has no children\n      </div><div class="input-field col s3"><a expr1217="expr1217" class="btn waves-effect waves-light" id="submit_button"><i class="material-icons right">add</i>Add numbers\n         </a></div></div><div expr1218="expr1218" class="section"></div>',[{type:a.IF,evaluate:e=>e.state.isSaving,redundantAttribute:"expr1210",selector:"[expr1210]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"links",evaluate:e=>[["config","Configure"],["autonumber","Auto-numbering"]]}],redundantAttribute:"expr1211",selector:"[expr1211]"},{type:a.TAG,getComponent:n,evaluate:e=>"tt",slots:[{id:"default",html:"sense",bindings:[]}],attributes:[],redundantAttribute:"expr1212",selector:"[expr1212]"},{type:a.TAG,getComponent:n,evaluate:e=>"tt",slots:[{id:"default",html:"number",bindings:[]}],attributes:[],redundantAttribute:"expr1213",selector:"[expr1213]"},{type:a.TAG,getComponent:n,evaluate:e=>"tt",slots:[{id:"default",html:"sense",bindings:[]}],attributes:[],redundantAttribute:"expr1214",selector:"[expr1214]"},{type:a.TAG,getComponent:n,evaluate:e=>"tt",slots:[{id:"default",html:"@number",bindings:[]}],attributes:[],redundantAttribute:"expr1215",selector:"[expr1215]"},{redundantAttribute:"expr1216",selector:"[expr1216]",expressions:[{type:t.EVENT,name:"onchange",evaluate:e=>e.changeElem}]},{redundantAttribute:"expr1217",selector:"[expr1217]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.addNumbers}]},{type:a.IF,evaluate:e=>e.state.info,redundantAttribute:"expr1218",selector:"[expr1218]",template:e('<div expr1219="expr1219" class="message messageInfo"> </div>',[{redundantAttribute:"expr1219",selector:"[expr1219]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.state.info].join("")}]}])}]),name:"dict-config-autonumber"},gt={css:null,exports:{state:{isLoading:!0,isSaving:!1,data:{xslt:""}},onMounted(){this.store.loadDictionaryConfig("donwload").done(e=>{this.state.data=e.content}).always(()=>{this.update({isLoading:!1}),M.updateTextFields(),M.textareaAutoResize($("#download_xslt"))})},saveData(){var e=$("#download_xslt").val();try{var t={xslt:e};parsed_xslt=$.parseXML(e),this.update({isSaving:!0}),this.store.updateDictionaryConfig("download",t).always(()=>this.update({isSaving:!1}))}catch(e){M.toast({html:"Failed to parse XSLT"})}}},template:(e,t,a,n)=>e('<loading-overlay expr1296="expr1296"></loading-overlay><dict-nav expr1297="expr1297"></dict-nav><h1>Download settings</h1><div class="row"><div class="input-field"><textarea expr1298="expr1298" id="download_xslt" class="materialize-textarea"> </textarea><label for="download_xslt">XSLT transformation on download</label><span class="helper-text">You can use this functionality to automatically apply an XSLT transformation when the dictionary is downloaded. If you do not input valid XSLT here, no transformation will be applied.</span></div></div><dict-config-buttons expr1299="expr1299"></dict-config-buttons>',[{type:a.IF,evaluate:e=>e.state.isLoading||e.state.isSaving,redundantAttribute:"expr1296",selector:"[expr1296]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"links",evaluate:e=>[["config","Configure"],["download","Download settings"]]}],redundantAttribute:"expr1297",selector:"[expr1297]"},{redundantAttribute:"expr1298",selector:"[expr1298]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.data.xslt}]},{type:a.TAG,getComponent:n,evaluate:e=>"dict-config-buttons",slots:[],attributes:[{type:t.ATTRIBUTE,name:"save-data",evaluate:e=>e.saveData}],redundantAttribute:"expr1299",selector:"[expr1299]"}]),name:"dict-config-download"},vt={css:'dict-config-editing textarea,[is="dict-config-editing"] textarea{ min-height: 30vh; } dict-config-editing #editor_js,[is="dict-config-editing"] #editor_js{ padding-top: 25px; } dict-config-editing #codeStatus,[is="dict-config-editing"] #codeStatus{ top: 1px; position: absolute; right: 1px; left: 1px; background-color: whitesmoke; padding: 3px 8px; } dict-config-editing #info_nerd,[is="dict-config-editing"] #info_nerd,dict-config-editing #info_laic,[is="dict-config-editing"] #info_laic{ padding-left: 50px; }',exports:{state:{isLoading:!0,isSaving:!1,override:!1,data:{xonomyMode:"nerd",xonomyTextEditor:"askString",_js:"",_css:""}},changeInfo(){$("#xonomyMode_laic").is(":checked")?($("#info_nerd").hide(),$("#info_laic").show(),$("#info_graphical").hide()):$("#xonomyMode_nerd").is(":checked")?($("#info_nerd").show(),$("#info_laic").hide(),$("#info_graphical").hide()):($("#info_nerd").hide(),$("#info_laic").hide(),$("#info_graphical").show()),$("#xonomyTextEditor_longstring").is(":checked")?($("#info_string").hide(),$("#info_longstring").show()):($("#info_string").show(),$("#info_longstring").hide())},startOverride(){this.update({override:!0})},stopOverride(){this.state.data._js="",this.state.data._css="",this.update({override:!1})},backFromOverride(){this.update({override:!1})},exampleJS(){$("#editor_js").val(`{
editor: function(div, entry, uneditable){
//div = the div into which you should render the editor
//entry.id = the entry ID (a number, eg. 123), or zero if new entry
//entry.content = the entry's XML source code, eg. "<entry></headword>hello</headword></entry>"
//uneditable = true if we want the entry to be uneditable (read-only)
$(div).html("<div class='myEditor'>HEADWORD: <input class='headword' "+(uneditable?"disabled":"")+"/></div>");
$(div).find("input.headword").val($($.parseXML(entry.content)).find("headword").html());
},
harvester: function(div){
//div = the div from which you should harvest the contents of the editor
var headword=$(div).find("input.headword").val();
return "<entry><headword>"+headword+"</headword></entry>";
},
adjustDocSpec: function (docSpec) {
// NOTE: you normally want to use this method if you don't have a custom editor,
// but just want to change certain aspects of how Xonomy presents the document.
$.each(docSpec.elements, function (elementName, elementSpec) {
 // Expand <sense> elements by default.
 if (elementName === 'sense') {
   elementSpec.collapsed = function (jsElement) { return false; }
 }
 // Make <example> read-only
 if (elementName === 'example') {
   elementSpec.isReadOnly = true;
 }
 // Hide <partOfSpeech>.
 if (elementName === 'partOfSpeech') {
   elementSpec.isInvisible = true;
 }
});
}
}`),M.textareaAutoResize($("#editor_js"))},exampleCSS(){$("#editor_css").val(`div.myEditor {padding: 20px; font-size: 1.25em}
div.myEditor input {font-weight: bold}`),M.textareaAutoResize($("#editor_css"))},onMounted(){this.store.loadDictionaryConfig("editing").done(e=>{this.state.data=e.content,this.state.override=!!e.content._js}).always(()=>{this.update({isLoading:!1}),this.changeInfo(),M.updateTextFields(),this.state.override&&(M.textareaAutoResize($("#editor_css")),M.textareaAutoResize($("#editor_js")),this.checkJSCode())})},getConfigData(){var e={xonomyMode:"nerd",xonomyTextEditor:"askString",_js:"",_css:""};return $("#xonomyMode_laic").is(":checked")&&(e.xonomyMode="laic"),$("#xonomyMode_graphical").is(":checked")&&(e.xonomyMode="graphical"),$("#xonomyTextEditor_longstring").is(":checked")&&(e.xonomyTextEditor="askLongString"),this.state.override&&(e._js=$("#editor_js").val(),e._css=$("#editor_css").val()),e},checkJSCode(e){let t=!1,a="";try{new Function("return "+$("#editor_js").val())(),t=!0}catch(e){a=e.toString().split("\n")[0]}$("#codeStatus").html(t?'<b class="green-text">valid</b>':`<b class="red-text">invalid</b><span class="grey-text right">${a}</span>`)},saveData(){this.update({isSaving:!0}),this.store.updateDictionaryConfig("editing",this.getConfigData()).always(()=>this.update({isSaving:!1}))}},template:(e,t,a,n)=>e('<loading-overlay expr1246="expr1246"></loading-overlay><dict-nav expr1247="expr1247"></dict-nav><h1>Entry editor</h1><div expr1248="expr1248"></div><div expr1256="expr1256"></div>',[{type:a.IF,evaluate:e=>e.state.isLoading||e.state.isSaving,redundantAttribute:"expr1246",selector:"[expr1246]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"links",evaluate:e=>[["config","Configure"],["editing","Entry editor"]]}],redundantAttribute:"expr1247",selector:"[expr1247]"},{type:a.IF,evaluate:e=>!(e.state.data._js&&""!=e.state.data._js||e.state.override),redundantAttribute:"expr1248",selector:"[expr1248]",template:e('<div class="input-field"><p><label><input expr1249="expr1249" name="xonomyMode" id="xonomyMode_nerd" type="radio" class="with-gap"/><span>Nerd mode</span></label><label style="margin-left: 30px;"><input expr1250="expr1250" name="xonomyMode" id="xonomyMode_laic" type="radio" class="with-gap"/><span>Laic mode</span></label><label style="margin-left: 30px;"><input expr1251="expr1251" name="xonomyMode" id="xonomyMode_graphical" type="radio" class="with-gap"/><span>Graphical mode</span></label></p><span class="helper-text">Choose what the entry editor will look like.</span></div><div id="info_nerd"><p>When editing an entry in <b>nerd mode</b> the user sees the XML source code, angle brackets and all.\n            <div class="instro"><img src="docs/mode-nerd.png" alt="Illustration"/></div><br/>\n            Individual users can overide this setting by clicking an icon in the bottom-left corner of their screen.\n         </p></div><div id="info_laic"><p>When editing an entry in <b>laic mode</b> the XML source code is hidden and the entry looks more like a bulleted list.\n            <div class="instro"><img src="docs/mode-laic.png" alt="Illustration"/></div><br/>\n            Individual users can overide this setting by clicking an icon in the bottom-left corner of their screen.\n         </p></div><div id="info_graphical" style="padding-left: 50px;"><p>When editing an entry in <b>graphical mode</b> the XML source code is hidden and the entry uses settings configuration to display a more graphically friendly interface.\n \n           <div class="instro">Image of graphical editor</div></p></div><br/><div class="input-field"><p><label><input expr1252="expr1252" name="xonomyTextEditor" id="xonomyTextEditor_string" type="radio" class="with-gap"/><span>Single line</span></label><label style="margin-left: 30px;"><input expr1253="expr1253" name="xonomyTextEditor" id="xonomyTextEditor_longstring" type="radio" class="with-gap"/><span>Multi line</span></label></p><span class="helper-text">Choose the default text editor for node values.</span></div><div id="info_string" style="margin-left: 30px;"><p>When editing text in <b>single line mode</b> the user sees a smaller editor.\n            <div class="instro"><img src="docs/text-editor-askstring.png" alt="Illustration"/></div></p></div><div id="info_longstring" style="margin-left: 30px;"><p>When editing text in <b>multi line mode</b> the user sees a full-fledged text editor.\n            <div class="instro"><img src="docs/text-editor-asklongstring.png" alt="Illustration"/></div></p></div><br/><div><br/><button expr1254="expr1254" class="btn waves-effect waves-light">\n            Customize entry editor\n            <i class="material-icons right">edit</i></button></div><br/><br/><dict-config-buttons expr1255="expr1255"></dict-config-buttons>',[{redundantAttribute:"expr1249",selector:"[expr1249]",expressions:[{type:t.ATTRIBUTE,name:"checked",evaluate:e=>"nerd"==e.state.data.xonomyMode},{type:t.EVENT,name:"onchange",evaluate:e=>e.changeInfo}]},{redundantAttribute:"expr1250",selector:"[expr1250]",expressions:[{type:t.ATTRIBUTE,name:"checked",evaluate:e=>"laic"==e.state.data.xonomyMode},{type:t.EVENT,name:"onchange",evaluate:e=>e.changeInfo}]},{redundantAttribute:"expr1251",selector:"[expr1251]",expressions:[{type:t.ATTRIBUTE,name:"checked",evaluate:e=>"graphical"==e.configData.xonomyMode},{type:t.EVENT,name:"onchange",evaluate:e=>e.changeInfo}]},{redundantAttribute:"expr1252",selector:"[expr1252]",expressions:[{type:t.ATTRIBUTE,name:"checked",evaluate:e=>"askString"==e.state.data.xonomyTextEditor},{type:t.EVENT,name:"onchange",evaluate:e=>e.changeInfo}]},{redundantAttribute:"expr1253",selector:"[expr1253]",expressions:[{type:t.ATTRIBUTE,name:"checked",evaluate:e=>"askLongString"==e.state.data.xonomyTextEditor},{type:t.EVENT,name:"onchange",evaluate:e=>e.changeInfo}]},{redundantAttribute:"expr1254",selector:"[expr1254]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.startOverride}]},{type:a.TAG,getComponent:n,evaluate:e=>"dict-config-buttons",slots:[],attributes:[{type:t.ATTRIBUTE,name:"save-data",evaluate:e=>e.saveData}],redundantAttribute:"expr1255",selector:"[expr1255]"}])},{type:a.IF,evaluate:e=>e.state.data._js&&""!=e.state.data._js||e.state.override,redundantAttribute:"expr1256",selector:"[expr1256]",template:e('<div class="row"><div class="input-field"><div id="codeStatus"></div><textarea expr1257="expr1257" id="editor_js" class="materialize-textarea"> </textarea><label>JavaScript</label><span class="helper-text">\n               You can customize the editor by defining two functions in JavaScript: one that will render the HTML editor from the XML entry and one that will harvest the (edited) HTML back into XML. If you would like to see an example,\n               <a expr1258="expr1258">click here to load a sample JavaScript code</a>.\n            </span></div></div><div class="row"><div class="input-field"><textarea expr1259="expr1259" id="editor_css" class="materialize-textarea"> </textarea><label for="editor_css">CSS</label><span class="helper-text">\n               You can customize the editor look and feel by writing your own CSS styles. If you would like to see an example,\n               <a expr1260="expr1260">click here to load a sample CSS style</a>.\n            </span></div></div><div class="buttons"><a expr1261="expr1261" class="btn btn-secondary waves-effect waves-light">back</a><button expr1262="expr1262" class="btn waves-effect waves-light">\n            Disable entry editor customizations\n            <i class="material-icons right">edit</i></button><button expr1263="expr1263" class="btn waves-effect waves-light" id="submit_button">\n            Save\n            <i class="material-icons right">save</i></button></div><br/><br/>',[{redundantAttribute:"expr1257",selector:"[expr1257]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.data._js},{type:t.EVENT,name:"oninput",evaluate:e=>e.checkJSCode}]},{redundantAttribute:"expr1258",selector:"[expr1258]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.exampleJS}]},{redundantAttribute:"expr1259",selector:"[expr1259]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.data._css}]},{redundantAttribute:"expr1260",selector:"[expr1260]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.exampleCSS}]},{redundantAttribute:"expr1261",selector:"[expr1261]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.backFromOverride}]},{redundantAttribute:"expr1262",selector:"[expr1262]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.stopOverride}]},{redundantAttribute:"expr1263",selector:"[expr1263]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.saveData}]}])}]),name:"dict-config-editing"},yt={css:'dict-config-flagging tr,[is="dict-config-flagging"] tr{ border-bottom: none; } dict-config-flagging th,[is="dict-config-flagging"] th,dict-config-flagging td,[is="dict-config-flagging"] td{ padding: 3px 10px 3px 0; }',exports:{state:{isLoading:!0,isSaving:!1,data:{flag_elements:"",flags:[]}},doDeleteEl(e){this.state.data=this.getConfigData(),this.state.data.flags.splice(e,1),this.update()},doAddEl(e){this.state.data.flags.push({key:"",name:"",label:"",color:""}),this.update()},addColor(){$(".flag-color").each(function(e,a){var t=$(a)[0].id;$("#"+t).colorpicker().on("changeColor",function(e){var e=e.color.toHex(),t=this.store.getFlagTextColor(e);$(a).css({"background-color":e,color:t})}.bind(this))}.bind(this))},onMounted(){this.store.loadDictionaryConfig("flagging").done(e=>{e.content.flag_element&&(this.state.data=e.content)}).always(()=>{this.update({isLoading:!1})})},onUpdated(){this.dictData.config.xema&&this.dictData.config.xema.elements&&(0==$("#flag-element option").length&&Object.entries(this.dictData.config.xema.elements).forEach(([e])=>{e!=this.dictData.config.xema.root&&$("#flag-element").append('<option value="'+e+'"'+(e==this.state.data.flag_element?"selected":"")+">"+e+"</option>")}),$("select").formSelect()),M.updateTextFields(),this.addColor()},getConfigData(){var e={flag_element:$("#flag-element").val(),flags:[]};return $(".flag-info").each(function(){e.flags.push({key:$(this).find(".flag-key").val(),name:$(this).find(".flag-name").val(),label:$(this).find(".flag-label").val(),color:$(this).find(".flag-color").val()})}),e},saveData(){this.update({isSaving:!0}),this.store.updateDictionaryConfig("flagging",this.getConfigData()).always(()=>this.update({isSaving:!1}))}},template:(e,t,a,n)=>e('<loading-overlay expr1264="expr1264"></loading-overlay><dict-nav expr1265="expr1265"></dict-nav><h1>Entry flags</h1><template expr1266="expr1266"></template><br/><br/><dict-config-buttons expr1277="expr1277"></dict-config-buttons>',[{type:a.IF,evaluate:e=>e.state.isLoading||e.state.isSaving,redundantAttribute:"expr1264",selector:"[expr1264]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"links",evaluate:e=>[["config","Configure"],["flagging","Entry flags"]]}],redundantAttribute:"expr1265",selector:"[expr1265]"},{type:a.IF,evaluate:e=>!e.state.isLoading,redundantAttribute:"expr1266",selector:"[expr1266]",template:e('<div expr1267="expr1267" class="center-align grey-text"></div><template expr1269="expr1269"></template>',[{type:a.IF,evaluate:e=>!e.state.data.flags.length,redundantAttribute:"expr1267",selector:"[expr1267]",template:e('<h1>no entry flags</h1><br/><a expr1268="expr1268" class="btn btn-primary waves-effect waves-light">\n            add flag\n            <i class="material-icons right">add</i></a>',[{redundantAttribute:"expr1268",selector:"[expr1268]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.doAddEl}]}])},{type:a.IF,evaluate:e=>e.state.data.flags.length,redundantAttribute:"expr1269",selector:"[expr1269]",template:e('<table><thead><tr><th>Keyboard shortcut</th><th>Value</th><th>Label</th><th>Color</th><th></th></tr></thead><tbody><tr expr1270="expr1270" class="flag-info"></tr></tbody></table><div><a expr1276="expr1276" class="btn waves-effect waves-light">\n               add flag\n               <i class="material-icons right">add</i></a></div><br/><br/><div class="input-field" style="max-width: 400px;"><select id="flag-element"></select><label for="flag-element">Flag element</label><span class="helper-text">Select the element which the flags should be put into.</span></div>',[{type:a.EACH,getKey:null,condition:null,template:e('<td><input expr1271="expr1271" type="text" placeholder="key" class="flag-key"/></td><td><input expr1272="expr1272" type="text" placeholder="value" class="flag-name"/></td><td><input expr1273="expr1273" type="text" placeholder="label" class="flag-label"/></td><td><input expr1274="expr1274" type="text" placeholder="color" class="flag-color"/></td><td><a expr1275="expr1275" class="btn btn-flat"><i class="material-icons">delete</i></a></td>',[{redundantAttribute:"expr1271",selector:"[expr1271]",expressions:[{type:t.VALUE,evaluate:e=>e.flag.key}]},{redundantAttribute:"expr1272",selector:"[expr1272]",expressions:[{type:t.VALUE,evaluate:e=>e.flag.name}]},{redundantAttribute:"expr1273",selector:"[expr1273]",expressions:[{type:t.VALUE,evaluate:e=>e.flag.label}]},{redundantAttribute:"expr1274",selector:"[expr1274]",expressions:[{type:t.VALUE,evaluate:e=>e.flag.color},{type:t.ATTRIBUTE,name:"id",evaluate:e=>["flag-color",e.index].join("")},{type:t.ATTRIBUTE,name:"style",evaluate:e=>["color: ",e.store.getFlagTextColor(e.flag.color),";background-color: ",e.flag.color].join("")}]},{redundantAttribute:"expr1275",selector:"[expr1275]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.doDeleteEl.bind(e,e.index)}]}]),redundantAttribute:"expr1270",selector:"[expr1270]",itemName:"flag",indexName:"index",evaluate:e=>e.state.data.flags},{redundantAttribute:"expr1276",selector:"[expr1276]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.doAddEl}]}])}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-config-buttons",slots:[],attributes:[{type:t.ATTRIBUTE,name:"save-data",evaluate:e=>e.saveData},{type:t.ATTRIBUTE,name:"show-save",evaluate:e=>e.state.data.flags.length}],redundantAttribute:"expr1277",selector:"[expr1277]"}]),name:"dict-config-flagging"},ft={css:'dict-config-gapi .input-field,[is="dict-config-gapi"] .input-field{ max-width: 500px; }',exports:{state:{isLoading:!0,isSaving:!1,data:{},info:""},addImages(){var e=$("#add_element").val(),t=$("#add_number").val();""!=e&&0<parseInt(t)&&(this.update({info:"Adding images to dictionary, please wait..."}),this.store.autoAddImages(e,t).done(e=>{this.waitImages(e.bgjob)}))},waitImages(t){""!=t&&this.store.autoAddImagesGetProgress(t).done(e=>{"finished"==e.status?this.update({info:"Dictionary now contains automatically added images. <a href='#"+this.dictData.dictId+"/edit'>See results.</a>"}):"failed"==e.status?this.update({info:"Adding images failed."}):setTimeout(this.waitImages.bind(this,t),1e3)})},onMounted(){this.store.loadDictionaryConfig("gapi").done(e=>{this.state.data=e.content}).always(()=>{this.update({isLoading:!1}),M.updateTextFields()})},onUpdated(){this.dictData.config.xema&&this.dictData.config.xema.elements&&(0==$("#add_element option").length&&Object.entries(this.dictData.config.xema.elements).forEach(([e,t])=>{"med"==t.filling&&$("#add_element").append('<option value="'+e+'">'+e+"</option>")}),this.state.data.image_licence&&$(`#img_licence option[value="${this.state.data.image_licence}"]`).attr("selected","selected"),$(`#voice_lang option[value="${this.state.data.voicelang}"]`).attr("selected","selected"),$("select").formSelect({dropdownOptions:{coverTrigger:!1,constrainWidth:!1}}))},getConfigData(){return{image_licence:$("#img_licence").val(),apikey:$("#gapi_key").val(),cx:$("#gapi_cx").val(),pixabaykey:$("#pixabay_key").val(),voicekey:$("#voice_key").val(),voicelang:$("#voice_lang").val()}},saveData(){this.update({isSaving:!0}),this.store.updateDictionaryConfig("gapi",this.getConfigData()).always(()=>this.update({isSaving:!1}))}},template:(e,t,a,n)=>e('<loading-overlay expr1286="expr1286"></loading-overlay><dict-nav expr1287="expr1287"></dict-nav><h1>Multimedia API</h1><div class="row"><div class="input-field"><select id="img_licence"><option value="any" selected>any licence</option><option value="comm">permits commercial use</option><option value="der">permits derivative works</option><option value="code">permits commercial and derivative use</option><option value="public">public domain</option></select><label>Image licence</label><span class="helper-text">Select licence type when searching for images.</span></div></div><div class="row"><div class="input-field"><input expr1288="expr1288" type="text" id="gapi_key"/><label>Google Custom Search API key</label><span class="helper-text">Insert your Google Custom Search API key to allow multimedia search.</span></div></div><div class="row"><div class="input-field"><input expr1289="expr1289" type="text" id="gapi_cx"/><label>Google Custom Search ID</label><span class="helper-text">\n            Insert ID of your Custom Search - see\n            <a href="https://developers.google.com/custom-search/v1/introduction">documentation</a>.\n         </span></div></div><div class="row"><div class="input-field"><input expr1290="expr1290" type="text" id="pixabay_key"/><label>Pixabay API key</label><span class="helper-text">\n            Insert your\n            <a href="https://pixabay.com/api/docs/">Pixabay API key</a>.\n         </span></div></div><div class="row"><div class="input-field"><input expr1291="expr1291" type="text" id="voice_key"/><label>VoiceRSS API key</label><span class="helper-text">\n            Insert your\n            <a href="http://www.voicerss.org/api/">VoiceRSS</a>\n            API key to enable text-to-speech.\n         </span></div></div><div class="row"><div class="input-field"><select id="voice_lang"><option value>.</option><option value="ar-eg">Arabic (Egypt)</option><option value="ar-sa">Arabic (Saudi Arabia)</option><option value="bg-bg">Bulgarian</option><option value="ca-es">Catalan</option><option value="zh-cn">Chinese (China)</option><option value="zh-hk">Chinese (Hong Kong)</option><option value="zh-tw">Chinese (Taiwan)</option><option value="hr-hr">Croatian</option><option value="cs-cz">Czech</option><option value="da-dk">Danish</option><option value="nl-be">Dutch (Belgium)</option><option value="nl-nl">Dutch (Netherlands)</option><option value="en-au">English (Australia)</option><option value="en-ca">English (Canada)</option><option value="en-gb">English (Great Britain)</option><option value="en-in">English (India)</option><option value="en-ie">English (Ireland)</option><option value="en-us">English (United States)</option><option value="fi-fi">Finnish</option><option value="fr-ca">French (Canada)</option><option value="fr-fr">French (France)</option><option value="fr-ch">French (Switzerland)</option><option value="de-at">German (Austria)</option><option value="de-de">German (Germany)</option><option value="de-ch">German (Switzerland)</option><option value="el-gr">Greek</option><option value="he-il">Hebrew</option><option value="hi-in">Hindi</option><option value="hu-hu">Hungarian</option><option value="id-id">Indonesian</option><option value="it-it">Italian</option><option value="ja-jp">Japanese</option><option value="ko-kr">Korean</option><option value="ms-my">Malay</option><option value="nb-no">Norwegian</option><option value="pl-pl">Polish</option><option value="pt-br">Portuguese (Brazil)</option><option value="pt-pt">Portuguese (Portugal)</option><option value="ro-ro">Romanian</option><option value="ru-ru">Russian</option><option value="sk-sk">Slovak</option><option value="sl-si">Slovenian</option><option value="es-mx">Spanish (Mexico)</option><option value="es-es">Spanish (Spain)</option><option value="sv-se">Swedish</option><option value="ta-in">Tamil</option><option value="th-th">Thai</option><option value="tr-tr">Turkish</option><option value="vi-vn">Vietnamese</option></select><label>VoiceRSS language</label></div></div><button expr1292="expr1292" class="btn waves-effect waves-light" id="submit_button">\n      Save\n      <i class="material-icons right">save</i></button><br/><br/><hr/><br/><div><h3>Auto download images to each entry</h3><p class="grey-text">If you want to add images to each entry automatically, Lexonomy can do that for you. First, go to Entry structure and add element with content type <i>media</i>. When you\'re ready, select element and number of images you want to add.</p><div style="display: flex; gap: 10px; vertical-align: middle;"><div style="max-width: 200px;"><div class="input-field"><select id="add_element"></select><label>Image element to add</label></div></div><div style="max-width: 150px;"><div class="input-field"><input type="number" id="add_number" value="3"/><label>Add X images</label></div></div><button expr1293="expr1293" class="btn waves-effect waves-light" id="addimages" style="margin-top: 28px;">Add images</button></div></div><div expr1294="expr1294" class="message messageInfo"></div><br/><a expr1295="expr1295" class="btn btn-secondary btn-flat">Back</a>',[{type:a.IF,evaluate:e=>e.state.isLoading||e.state.isSaving,redundantAttribute:"expr1286",selector:"[expr1286]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"links",evaluate:e=>[["config","Configure"],["gapi","MultimediaApi"]]}],redundantAttribute:"expr1287",selector:"[expr1287]"},{redundantAttribute:"expr1288",selector:"[expr1288]",expressions:[{type:t.VALUE,evaluate:e=>e.state.data.apikey}]},{redundantAttribute:"expr1289",selector:"[expr1289]",expressions:[{type:t.VALUE,evaluate:e=>e.state.data.cx}]},{redundantAttribute:"expr1290",selector:"[expr1290]",expressions:[{type:t.VALUE,evaluate:e=>e.state.data.pixabaykey}]},{redundantAttribute:"expr1291",selector:"[expr1291]",expressions:[{type:t.VALUE,evaluate:e=>e.state.data.voicekey}]},{redundantAttribute:"expr1292",selector:"[expr1292]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.saveData}]},{redundantAttribute:"expr1293",selector:"[expr1293]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.addImages}]},{type:a.IF,evaluate:e=>e.state.info,redundantAttribute:"expr1294",selector:"[expr1294]",template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.info}]}])},{redundantAttribute:"expr1295",selector:"[expr1295]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#",e.dictData.dictId,"/config"].join("")}]}]),name:"dict-config-gapi"},bt={css:null,exports:{state:{isLoading:!0,isSaving:!1,data:{}},onMounted(){this.store.loadDictionaryConfig("ident").done(e=>{this.state.data=e.content}).always(()=>{var t;this.update({isLoading:!1}),M.updateTextFields(),M.textareaAutoResize($("#ident_blurb")),this.state.data.langs&&(t={},this.state.data.langs.forEach(e=>{t[e.lang]=null}),$("#ident_lang").autocomplete({data:t}))})},saveData(){this.update({isSaving:!0}),this.store.updateDictionaryConfig("ident",{title:$("#ident_title").val(),blurb:$("#ident_blurb").val(),lang:$("#ident_lang").val(),handle:$("#ident_handle").val()}).done(this.store.loadDictionaryList.bind(this.store)).always(()=>this.update({isSaving:!1}))}},template:(e,t,a,n)=>e('<loading-overlay expr1278="expr1278"></loading-overlay><dict-nav expr1279="expr1279"></dict-nav><h1>Description</h1><div><form><div class="row"><div class="input-field"><input expr1280="expr1280" placeholder="My Dictionary" id="ident_title" type="text" class="validate" style="width:300px"/><label for="ident_title">Dictionary name</label><span class="helper-text">A human-readable title for your dictionary, such as <i>My Esperanto Dictionary</i>.</span></div></div><div class="row"><div class="input-field"><textarea expr1281="expr1281" id="ident_blurb" class="materialize-textarea" placeholder="Yet another Lexonomy dictionary." rows="3"> </textarea><label for="ident_blurb">Dictionary description</label><span class="helper-text">\n                  This will appear on your dictionary\'s home page. You can leave it blank if you prefer.<br/>You can use <a href="https://daringfireball.net/projects/markdown/" target="_blank">Markdown</a> here.\n               </span></div></div><div class="row"><div class="input-field"><input expr1282="expr1282" type="text" id="ident_lang" class="autocomplete" placeholder="Type to search for language, or write your custom info" style="width:300px"/><label for="ident_lang">Main language</label><span class="helper-text">Language of dictionary entries, used to sort dictionaries on your home page. You can select language from the list, or write down your own.</span></div></div><div class="row"><div class="input-field"><input expr1283="expr1283" placeholder="URL" id="ident_handle" type="text" class="validate"/><label for="ident_title">Metadata from CLARIN repository</label><span class="helper-text">Link to metadata recorded in CLARIN repository, provide URL to \'handle\' link, eg. <tt expr1284="expr1284"></tt>.</span></div></div><dict-config-buttons expr1285="expr1285"></dict-config-buttons></form></div>',[{type:a.IF,evaluate:e=>e.state.isLoading||e.state.isSaving,redundantAttribute:"expr1278",selector:"[expr1278]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"links",evaluate:e=>[["config","Configure"],["ident","Description"]]}],redundantAttribute:"expr1279",selector:"[expr1279]"},{redundantAttribute:"expr1280",selector:"[expr1280]",expressions:[{type:t.VALUE,evaluate:e=>e.state.data.title}]},{redundantAttribute:"expr1281",selector:"[expr1281]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.data.blurb}]},{redundantAttribute:"expr1282",selector:"[expr1282]",expressions:[{type:t.VALUE,evaluate:e=>e.state.data.lang}]},{redundantAttribute:"expr1283",selector:"[expr1283]",expressions:[{type:t.VALUE,evaluate:e=>e.state.data.handle}]},{type:a.TAG,getComponent:n,evaluate:e=>"tt",slots:[{id:"default",html:"http://hdl.handle.net/11356/1094",bindings:[]}],attributes:[],redundantAttribute:"expr1284",selector:"[expr1284]"},{type:a.TAG,getComponent:n,evaluate:e=>"dict-config-buttons",slots:[],attributes:[{type:t.ATTRIBUTE,name:"save-data",evaluate:e=>e.saveData}],redundantAttribute:"expr1285",selector:"[expr1285]"}]),name:"dict-config-ident"},wt={css:'dict-config-kontext #searchElements,[is="dict-config-kontext"] #searchElements{ width: 10em; }',exports:{state:{isLoading:!0,isSaving:!1,data:{url:"https://www.clarin.si/kontext/",searchElements:[],container:"",template:"",markup:""}},onMounted(){this.store.loadDictionaryConfig("kontex").done(e=>{this.state.data=e.content,e.url&&""!=e.url||(this.state.data.url="https://www.clarin.si/kontext/"),e.searchElements||(this.state.data.searchElements=[]),M.updateTextFields(),M.textareaAutoResize($("#template")),$("#corpus").autocomplete({data:{}}),$("#corpus").data("corpora",{}),""!=this.state.data.corpus&&$("#corpus").data("selected-corpora",this.state.data.corpus),this.store.loadKontextCorpora().done(function(e){var a={},n={},i="";e.corpus_list.forEach(e=>{var t=e.name+" ("+e.desc+"; "+e.size_info+")";n[t]=e.corpus_id,a[t]=null,$("#corpus").data("selected-corpus")==e.corpus_id&&(i=t,$("#corpusInfo").html("Currently selected corpus: "+e.name+"."),$("#corpusInfo").show())}),$("#corpus").autocomplete({data:a}),$("#corpus").data("corpora",n),$("#corpus").attr("placeholder","Type to search in the list of corpora"),""!=i&&$("#corpus").val(i)}),$("#corpus").on("change",function(){var e=$(this).data("corpora");$(this).data("selected-corpus",e[$(this).val()]),$("#corpusInfo").html("Currently selected corpus: "+$(this).val()+"."),$("#corpusInfo").show()}),this.state.data.searchElements.forEach(e=>{$("#searchElements option[value="+e+"]").attr("selected","selected")}),""!=this.state.data.container&&$("#container option[value="+this.state.data.container+"]").attr("selected","selected"),""!=this.state.data.markup&&$("#markup option[value="+this.state.data.markup+"]").attr("selected","selected")}).always(()=>{this.update({isLoading:!1}),$("select").formSelect(),M.updateTextFields()})},onUpdated(){this.dictData.config.xema&&this.dictData.config.xema.elements&&(0==$("#searchElements option").length&&Object.entries(this.dictData.config.xema.elements).forEach(([e,t])=>{"txt"!=t.filling&&"lst"!=t.filling||(t=this.state.data.searchElements.includes(e)?"checked":"",$("#searchElements").append('<option value="'+e+'" '+t+">"+e+"</option>"))}),1==$("#container option").length&&Object.entries(this.dictData.config.xema.elements).forEach(([e])=>{var t=this.state.data.container==e?"checked":"";$("#container").append('<option value="'+e+'" '+t+">"+e+"</option>")}),1==$("#markup option").length&&Object.entries(this.dictData.config.xema.elements).forEach(([e])=>{var t=this.state.data.markup==e?"checked":"";$("#markup").append('<option value="'+e+'" '+t+">"+e+"</option>")}),$("select").formSelect())},getConfigData(){return{url:$("#kontext_url").val(),corpus:$("#corpus").data("selected-corpus"),concquery:$("#concquery").val(),searchElements:$("#searchElements").val(),container:$("#container").val(),template:$("#template").val(),markup:$("#markup").val()}},saveData(){this.update({isSaving:!0}),this.store.updateDictionaryConfig("kontext",this.getConfigData()).always(()=>this.update({isSaving:!1}))}},template:(e,t,a,n)=>e('<loading-overlay expr1368="expr1368"></loading-overlay><dict-nav expr1369="expr1369"></dict-nav><h1>KonText connection</h1><div class="row"><div class="input-field"><input expr1370="expr1370" id="kontext_url" type="text"/><label for="kontext_url">KonText URL</label><span class="helper-text">The URL of the KonText installation where external links should point. Defaults to <tt expr1371="expr1371"></tt>. Do not change this unless you are using a local installation of KonText.</span></div></div><div class="row"><div class="input-field"><input expr1372="expr1372" type="text" id="corpus" class="autocomplete" placeholder="Retrieving available corpora from KonText, please wait..."/><label for="corpus">Corpus name</label><span class="helper-text">Select a Sketch Engine corpus from the list of corpora available to you.</span><span expr1373="expr1373" class="helper-text" id="corpusInfo"></span></div></div><div class="row"><div class="input-field"><input expr1374="expr1374" id="concquery" type="text"/><label for="concquery">Concordance query</label><span class="helper-text">The CQL query that will be used to obtain concordance from KonText. You can use placeholders for elements in the form of \'%(element)\', e.g. \'[lemma="%(headword)"]\'. If left empty the \'simple\' query type will be used as configured for the respective corpus. Please note that you cannot use CQL syntax with default attribute because it is not specified.</span></div></div><div class="row"><div class="input-field"><select id="searchElements" multiple></select><label for="searchElements">Additional search elements</label><span class="helper-text">You can select any textual elements here whose content you would like to search for in KonText. A menu will be displayed next to all these elements like for the root entry element.</span></div></div><div class="row"><h2>Examples</h2></div><div class="row"><div class="input-field"><select id="container"><option value>(not set)</option></select><label for="container">Example container</label><span class="helper-text">Select the element which should wrap each individual example. When you pull example sentences automatically from a corpus, Lexonomy will insert one of these elements for each example sentence.</span></div></div><div class="row"><div class="input-field"><textarea expr1375="expr1375" id="template" class="materialize-textarea" placeholder="XML template"> </textarea><label for="template">XML template</label><span class="helper-text">This is the XML that will be inserted into your entries with each corpus example. The actual text will be where the placeholder <tt expr1376="expr1376"></tt> is.</span></div></div><div class="row"><div class="input-field"><select id="markup"><option value>(not set)</option></select><label for="markup">Headword mark-up</label><span class="helper-text">Select the element which should mark up the headword in inserted corpus examples. This setting is optional: if you make no selection, corpus examples will be inserted without mark-up.</span></div></div><dict-config-buttons expr1377="expr1377"></dict-config-buttons>',[{type:a.IF,evaluate:e=>e.state.isLoading||e.state.isSaving,redundantAttribute:"expr1368",selector:"[expr1368]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"links",evaluate:e=>[["config","Configure"],["kontext","KonText connection"]]}],redundantAttribute:"expr1369",selector:"[expr1369]"},{redundantAttribute:"expr1370",selector:"[expr1370]",expressions:[{type:t.VALUE,evaluate:e=>e.state.data.url}]},{type:a.TAG,getComponent:n,evaluate:e=>"tt",slots:[{id:"default",html:"https://www.clarin.si/kontext/",bindings:[]}],attributes:[],redundantAttribute:"expr1371",selector:"[expr1371]"},{redundantAttribute:"expr1372",selector:"[expr1372]",expressions:[{type:t.ATTRIBUTE,name:"data-selected-corpus",evaluate:e=>e.state.data.corpus}]},{redundantAttribute:"expr1373",selector:"[expr1373]",expressions:[{type:t.ATTRIBUTE,name:"hide",evaluate:e=>!0}]},{redundantAttribute:"expr1374",selector:"[expr1374]",expressions:[{type:t.VALUE,evaluate:e=>e.state.data.concquery}]},{redundantAttribute:"expr1375",selector:"[expr1375]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.data.template}]},{type:a.TAG,getComponent:n,evaluate:e=>"tt",slots:[{id:"default",html:"$text",bindings:[]}],attributes:[],redundantAttribute:"expr1376",selector:"[expr1376]"},{type:a.TAG,getComponent:n,evaluate:e=>"dict-config-buttons",slots:[],attributes:[{type:t.ATTRIBUTE,name:"save-data",evaluate:e=>e.saveData}],redundantAttribute:"expr1377",selector:"[expr1377]"}]),name:"dict-config-kontext"},kt={css:'dict-config-links tbody tr,[is="dict-config-links"] tbody tr{ border-bottom: none; } dict-config-links th,[is="dict-config-links"] th,dict-config-links td,[is="dict-config-links"] td{ padding: 10px 10px 0 0; } dict-config-links td,[is="dict-config-links"] td{ vertical-align: top; } dict-config-links td .input-field,[is="dict-config-links"] td .input-field{ margin: 0; }',exports:{state:{isLoading:!0,isSaving:!1,isLinking:!1,isChecking:!0,unusedElements:[],data:{elements:[]},info:"",checkDelay:1e3},doDeleteEl(t){this.state.data.elements=this.state.data.elements.filter(e=>e.linkElement!=t),this.update()},doAddEl(e){this.state.data.elements.push({linkElement:this.state.unusedElements[0],identifier:"",preview:""}),this.update()},onMounted(){this.store.loadDictionaryConfig("links").done(e=>{this.state.data={elements:Object.values(e.content)}}).always(()=>{this.update({isLoading:!1})}),this.store.linkingCheckIfRunning().done(e=>{-1!=e.bgjob&&(this.state.info="Linking to '"+e.otherdictID+"' already in progress, please wait...",this.waitForLinking(e.otherdictID,e.bgjob))}).always(()=>{this.update({isChecking:!1})})},onBeforeUpdate(){this.refreshUnusedElements()},onUpdated(){this.dictData.config.xema&&this.dictData.config.xema.elements&&$("select").each(function(e,t){var a=$(t),t=M.FormSelect.getInstance(t),t=(a.off("change",this.onElementChange),t&&t.destroy(),a.empty(),a.attr("linkelement"));a.append(`<option value="${t}" selected}>${t}</option>`),this.state.unusedElements.forEach(e=>{a.append(`<option value="${e}">${e}</option>`)}),$("select").formSelect().on("change",this.onElementChange)}.bind(this))},onElementChange(e){var t=$(e.target).closest("tr").attr("idx");this.state.data.elements[t].linkElement=$(e.target).find("option:selected").attr("value"),this.update()},onItemChange(e){var t=$(e.target).closest("tr").attr("idx");this.state.data.elements[t][e.target.name]=e.target.value},refreshUnusedElements(){var t=this.state.data.elements.map(e=>e.linkElement);this.state.unusedElements=Object.keys(this.dictData.config.xema.elements).filter(e=>!t.includes(e))},startLinking(){var t=$("#otherdict").val();t&&(this.update({isLinking:!0,info:"Initiating linking..."}),this.store.startLinking($("#otherdict").val()).done(e=>{this.update({info:"Linking in progress, please wait...",checkDelay:1e3}),this.waitForLinking(t,e.bgjob)}).fail(()=>{this.update({isLinking:!1,info:"Linking failed."})}))},waitForLinking(t,a){this.store.linkingGetProgress(t,a).done(e=>{"finished"==e.status?this.update({isLinking:!1,info:"Linking done. <a href='#/"+this.dictData.dictId+"/links'>See results.</a>"}):"failed"==e.status?this.update({isLinking:!1,info:"Linking failed"}):(this.state.checkDelay=this.state.checkDelay<6e4?this.state.checkDelay+2e3:6e4,setTimeout(this.waitForLinking.bind(this,t,a),this.state.checkDelay))}).fail(()=>{this.update({isLinking:!1,info:"Linking failed"})})},saveData(){var t={};this.state.data.elements.forEach(e=>{t[e.linkElement]=e}),this.update({isSaving:!0}),this.store.updateDictionaryConfig("links",t).always(()=>this.update({isSaving:!1}))}},template:(e,t,a,n)=>e('<loading-overlay expr1300="expr1300"></loading-overlay><dict-nav expr1301="expr1301"></dict-nav><h1>Manual linking between entries</h1><div><p>Elements listed here can be used as target of cross-reference link. For each element, specify unique identifier in the form of placeholders <tt expr1302="expr1302"></tt>. Eg. element <tt expr1303="expr1303"></tt> can have identifier <tt expr1304="expr1304"></tt>, element <tt expr1305="expr1305"></tt> can have identifier <tt expr1306="expr1306"></tt>. Optionally, specify element you want to show as preview when selecting links.</p><template expr1307="expr1307"></template><br/><br/><div><h2>Automatic linking using NAISC</h2></div><div><div><label for="otherdict">Other dictionary code</label></div><div class="input-field inlineBlock" style="max-width: 400px;"><input type="text" id="otherdict"/></div><div class="input-field inlineBlock"><button expr1316="expr1316" id="naisc_link" style="margin-left: 10px;">Start linking</button></div></div><div expr1317="expr1317" class="section"></div></div><br/><a expr1319="expr1319" class="btn btn-secondary btn-flat">Back</a>',[{type:a.IF,evaluate:e=>e.state.isLoading||e.state.isSaving,redundantAttribute:"expr1300",selector:"[expr1300]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"links",evaluate:e=>[["config","Configure"],["links","Linking"]]}],redundantAttribute:"expr1301",selector:"[expr1301]"},{type:a.TAG,getComponent:n,evaluate:e=>"tt",slots:[{id:"default",html:"'%(element)'",bindings:[]}],attributes:[],redundantAttribute:"expr1302",selector:"[expr1302]"},{type:a.TAG,getComponent:n,evaluate:e=>"tt",slots:[{id:"default",html:"entry",bindings:[]}],attributes:[],redundantAttribute:"expr1303",selector:"[expr1303]"},{type:a.TAG,getComponent:n,evaluate:e=>"tt",slots:[{id:"default",html:"%(lemma)-%(pos)",bindings:[]}],attributes:[],redundantAttribute:"expr1304",selector:"[expr1304]"},{type:a.TAG,getComponent:n,evaluate:e=>"tt",slots:[{id:"default",html:"sense",bindings:[]}],attributes:[],redundantAttribute:"expr1305",selector:"[expr1305]"},{type:a.TAG,getComponent:n,evaluate:e=>"tt",slots:[{id:"default",html:"%(lemma)-%(number)",bindings:[]}],attributes:[],redundantAttribute:"expr1306",selector:"[expr1306]"},{type:a.IF,evaluate:e=>!e.state.isLoading,redundantAttribute:"expr1307",selector:"[expr1307]",template:e('<table expr1308="expr1308"></table><div class="buttons"><button expr1314="expr1314">\n               add element\n               <i class="material-icons right">add</i></button><button expr1315="expr1315" class="btn waves-effect waves-light" id="submit_button">\n               Save\n               <i class="material-icons right">save</i></button></div>',[{type:a.IF,evaluate:e=>e.state.data.elements.length,redundantAttribute:"expr1308",selector:"[expr1308]",template:e('<thead><tr><th>Linking element</th><th>Idenitifier</th><th>Preview</th><th></th></tr></thead><tbody><tr expr1309="expr1309"></tr></tbody>',[{type:a.EACH,getKey:null,condition:null,template:e('<td><div class="input-field"><select expr1310="expr1310"></select></div></td><td><div class="input-field"><input expr1311="expr1311" type="text" name="identifier"/></div></td><td><div class="input-field"><input expr1312="expr1312" type="text" name="preview"/></div></td><td><a expr1313="expr1313" class="btn btn-floating right"><i class="material-icons">delete</i></a></td>',[{expressions:[{type:t.ATTRIBUTE,name:"idx",evaluate:e=>e.idx}]},{redundantAttribute:"expr1310",selector:"[expr1310]",expressions:[{type:t.ATTRIBUTE,name:"linkelement",evaluate:e=>e.element.linkElement}]},{redundantAttribute:"expr1311",selector:"[expr1311]",expressions:[{type:t.VALUE,evaluate:e=>e.element.identifier},{type:t.EVENT,name:"onchange",evaluate:e=>e.onItemChange}]},{redundantAttribute:"expr1312",selector:"[expr1312]",expressions:[{type:t.VALUE,evaluate:e=>e.element.preview},{type:t.EVENT,name:"onchange",evaluate:e=>e.onItemChange}]},{redundantAttribute:"expr1313",selector:"[expr1313]",expressions:[{type:t.ATTRIBUTE,name:"data-element",evaluate:e=>e.element.linkElement},{type:t.EVENT,name:"onclick",evaluate:e=>e.doDeleteEl.bind(e,e.element.linkElement)}]}]),redundantAttribute:"expr1309",selector:"[expr1309]",itemName:"element",indexName:"idx",evaluate:e=>e.state.data.elements}])},{redundantAttribute:"expr1314",selector:"[expr1314]",expressions:[{type:t.ATTRIBUTE,name:"class",evaluate:e=>["btn ",e.state.unusedElements.length?"":"disabled"].join("")},{type:t.EVENT,name:"onclick",evaluate:e=>e.doAddEl}]},{redundantAttribute:"expr1315",selector:"[expr1315]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.saveData}]}])},{redundantAttribute:"expr1316",selector:"[expr1316]",expressions:[{type:t.ATTRIBUTE,name:"class",evaluate:e=>["btn waves-effect waves-light ",e.state.isLinking||e.state.isChecking?"disabled":""].join("")},{type:t.EVENT,name:"onclick",evaluate:e=>e.startLinking}]},{type:a.IF,evaluate:e=>e.state.info,redundantAttribute:"expr1317",selector:"[expr1317]",template:e('<div class="message messageInfo"><raw-html expr1318="expr1318"></raw-html></div>',[{type:a.TAG,getComponent:n,evaluate:e=>"raw-html",slots:[],attributes:[{type:t.ATTRIBUTE,name:"content",evaluate:e=>e.state.info}],redundantAttribute:"expr1318",selector:"[expr1318]"}])},{redundantAttribute:"expr1319",selector:"[expr1319]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#",e.dictData.dictId,"/config"].join("")}]}]),name:"dict-config-links"},Tt={css:'dict-entry-filter,[is="dict-entry-filter"]{ display: block; } dict-entry-filter .filterForm,[is="dict-entry-filter"] .filterForm{ display: flex; gap: 10px; } dict-entry-filter .filterForm .searchBox,[is="dict-entry-filter"] .filterForm .searchBox{ width: 100px; position: relative; flex: 2; } dict-entry-filter .filterForm .searchBox input,[is="dict-entry-filter"] .filterForm .searchBox input{ padding-right: 27px; } dict-entry-filter .filterForm > .select-wrapper,[is="dict-entry-filter"] .filterForm > .select-wrapper{ flex: 3; } dict-entry-filter .filterForm .clearFilterIcon,[is="dict-entry-filter"] .filterForm .clearFilterIcon{ position: absolute; right: 5px; top: 11px; }',exports:{search(){this.dictData.searchtext=$("#searchBox").val(),this.dictData.modifier=$("#searchType").val(),this.props.searchFunc()},onClearFilterClick(e){$("#searchBox").val()&&($("#searchBox").val(""),this.search())},onKeyUp(e){13==e.keyCode&&this.search()},initSelect(){$("select").off("change").formSelect({dropdownOptions:{coverTrigger:!1,constrainWidth:!1}}).on("change",()=>{$("#searchBox").val()&&this.search()})},onMounted(){this.initSelect()},onUpdated(){this.initSelect()}},template:(e,t,a,n)=>e('<div class="filterForm"><span class="searchBox"><input expr1341="expr1341" type="text" id="searchBox" placeholder="search" class="input-field"/><i expr1342="expr1342" class="material-icons clearFilterIcon grey-text clickable">close</i></span><select id="searchType"><option expr1343="expr1343" value="start">starts like this</option><option expr1344="expr1344" value="exact">is exactly</option><option expr1345="expr1345" value="wordstart">contains a word that starts like this</option><option expr1346="expr1346" value="substring">contains this sequence of characters</option></select></div>',[{redundantAttribute:"expr1341",selector:"[expr1341]",expressions:[{type:t.VALUE,evaluate:e=>e.dictData.searchtext},{type:t.EVENT,name:"onkeyup",evaluate:e=>e.onKeyUp}]},{redundantAttribute:"expr1342",selector:"[expr1342]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.onClearFilterClick}]},{redundantAttribute:"expr1343",selector:"[expr1343]",expressions:[{type:t.ATTRIBUTE,name:"selected",evaluate:e=>!e.dictData.modifier||"start"==e.dictData.modifier}]},{redundantAttribute:"expr1344",selector:"[expr1344]",expressions:[{type:t.ATTRIBUTE,name:"selected",evaluate:e=>"exact"==e.dictData.modifier}]},{redundantAttribute:"expr1345",selector:"[expr1345]",expressions:[{type:t.ATTRIBUTE,name:"selected",evaluate:e=>"wordstart"==e.dictData.modifier}]},{redundantAttribute:"expr1346",selector:"[expr1346]",expressions:[{type:t.ATTRIBUTE,name:"selected",evaluate:e=>"substring"==e.dictData.modifier}]}]),name:"dict-entry-filter"},Et={css:'dict-config-buttons,[is="dict-config-buttons"]{ margin-top: 20px; }',exports:null,template:(e,t,a,n)=>e('<a expr1323="expr1323">\n      Back\n   </a><button expr1324="expr1324" class="btn waves-effect waves-light" id="submit_button"></button>',[{expressions:[{type:t.ATTRIBUTE,name:"class",evaluate:e=>"buttons"}]},{redundantAttribute:"expr1323",selector:"[expr1323]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#",e.dictData.dictId,"/config"].join("")},{type:t.ATTRIBUTE,name:"class",evaluate:e=>["btn btn-secondary ",e.props.showSave?"btn-flat":""].join("")}]},{type:a.IF,evaluate:e=>void 0===e.props.showSave||e.props.showSave,redundantAttribute:"expr1324",selector:"[expr1324]",template:e(' <i class="material-icons right">save</i>',[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.props.label||"Save"].join("")},{type:t.EVENT,name:"onclick",evaluate:e=>e.props.saveData}]}])}]),name:"dict-config-buttons"},At={css:null,exports:{state:{isLoading:!0,isSaving:!1,data:{}},licences:[{id:"cc-by-4.0",title:"Creative Commons Attribution 4.0 International",url:"https://creativecommons.org/licenses/by/4.0/"},{id:"cc-by-sa-4.0",title:"Creative Commons Attribution Share-Alike 4.0 International",url:"https://creativecommons.org/licenses/by-sa/4.0/"},{id:"odbl-1.0",title:"Open Database Licence 1.0",url:"https://opendatacommons.org/licenses/odbl/summary/"}],onCheckboxChange(e){this.state.data.public="1"==e.target.value,this.state.data.public?this.state.data.licence="cc-by-4.0":this.state.data.licence="",this.update()},onMounted(){this.store.loadDictionaryConfig("publico").done(e=>{this.state.data=e.content}).always(()=>{this.update({isLoading:!1})})},refreshLicenceInfo(){var e=$("#publico_licence option:selected").data("url");$("#publico_licence_info .helper-text").html('More information about this licence: <a target="_blank" href="'+e+'">'+e+"</a>.")},onUpdated(){$("#publico_licence").formSelect().off("change").on("change",this.refreshLicenceInfo.bind(this)),this.refreshLicenceInfo()},saveData(){this.update({isSaving:!0}),this.store.updateDictionaryConfig("publico",this.state.data).always(()=>this.update({isSaving:!1}))}},template:(e,t,a,n)=>e('<loading-overlay expr1325="expr1325"></loading-overlay><dict-nav expr1326="expr1326"></dict-nav><h1>Publishing</h1><template expr1327="expr1327"></template>',[{type:a.IF,evaluate:e=>e.state.isLoading||e.state.isSaving,redundantAttribute:"expr1325",selector:"[expr1325]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"links",evaluate:e=>[["config","Configure"],["publico","Publishing"]]}],redundantAttribute:"expr1326",selector:"[expr1326]"},{type:a.IF,evaluate:e=>!e.isLoading,redundantAttribute:"expr1327",selector:"[expr1327]",template:e('<div class="row"><div class="input-field"><p><label><input expr1328="expr1328" name="publico_public" type="radio" class="with-gap" value="0"/><span>Private</span></label><label style="margin-left: 30px;"><input expr1329="expr1329" name="publico_public" type="radio" class="with-gap" value="1"/><span>Public</span></label></p><span class="helper-text"><i>Private</i> means that the dictionary is not publicly viewable. <i>Public</i> means that the dictionary is publicly viewable.\n            </span></div></div><div expr1330="expr1330" class="row"></div><dict-config-buttons expr1332="expr1332"></dict-config-buttons>',[{redundantAttribute:"expr1328",selector:"[expr1328]",expressions:[{type:t.ATTRIBUTE,name:"checked",evaluate:e=>!e.state.data.public},{type:t.EVENT,name:"onchange",evaluate:e=>e.onCheckboxChange}]},{redundantAttribute:"expr1329",selector:"[expr1329]",expressions:[{type:t.ATTRIBUTE,name:"checked",evaluate:e=>e.state.data.public},{type:t.EVENT,name:"onchange",evaluate:e=>e.onCheckboxChange}]},{type:a.IF,evaluate:e=>e.state.data.public,redundantAttribute:"expr1330",selector:"[expr1330]",template:e('<div class="input-field" id="publico_licence_info" style="max-width: 500px;"><select id="publico_licence"><option expr1331="expr1331"></option></select><label>Licence</label><span class="helper-text"></span></div>',[{type:a.EACH,getKey:null,condition:null,template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.licence.title},{type:t.ATTRIBUTE,name:"value",evaluate:e=>e.licence.id},{type:t.ATTRIBUTE,name:"data-url",evaluate:e=>e.licence.url},{type:t.ATTRIBUTE,name:"selected",evaluate:e=>e.state.data.licence==e.licence.id}]}]),redundantAttribute:"expr1331",selector:"[expr1331]",itemName:"licence",indexName:null,evaluate:e=>e.licences}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-config-buttons",slots:[],attributes:[{type:t.ATTRIBUTE,name:"save-data",evaluate:e=>e.saveData}],redundantAttribute:"expr1332",selector:"[expr1332]"}])}]),name:"dict-config-publico"},It={css:null,exports:{state:{isLoading:!0,isSaving:!1,hasElements:!1,data:{searchableElements:[]}},onBeforeMount(){this.state.hasElements=this.dictData.config.xema&&this.dictData.config.xema.elements&&Object.keys(this.dictData.config.xema.elements).length},onMounted(){this.store.loadDictionaryConfig("searchability").done(e=>{this.state.data=e.content}).always(()=>{this.update({isLoading:!1})})},getConfigData(){return{searchableElements:$('input[type="checkbox"]:checked').toArray().map(function(e){return $(e).attr("value")})}},saveData(){this.update({isSaving:!0}),this.store.updateDictionaryConfig("searchability",this.getConfigData()).always(()=>this.update({isSaving:!1}))}},template:(e,t,a,n)=>e('<loading-overlay expr1333="expr1333"></loading-overlay><dict-nav expr1334="expr1334"></dict-nav><h1>Searching</h1><div expr1335="expr1335" class="center-align grey-text"></div><div expr1336="expr1336"></div><br/><br/><dict-config-buttons expr1340="expr1340"></dict-config-buttons>',[{type:a.IF,evaluate:e=>e.state.isLoading||e.state.isSaving,redundantAttribute:"expr1333",selector:"[expr1333]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"links",evaluate:e=>[["config","Configure"],["searchability","Searching"]]}],redundantAttribute:"expr1334",selector:"[expr1334]"},{type:a.IF,evaluate:e=>!e.state.isLoading&&!e.state.hasElements,redundantAttribute:"expr1335",selector:"[expr1335]",template:e("<h1>No elements found</h1>",[])},{type:a.IF,evaluate:e=>!e.state.isLoading&&e.state.hasElements,redundantAttribute:"expr1336",selector:"[expr1336]",template:e('<label for="search-element">Searchable elements</label><div class="helper-text">\n         The contents of elements you select here will be searchable (in addition to each entry\'s headword).\n      </div><br/><div expr1337="expr1337"></div>',[{type:a.EACH,getKey:null,condition:null,template:e('<label><input expr1338="expr1338" type="checkbox"/><span expr1339="expr1339"> </span></label>',[{redundantAttribute:"expr1338",selector:"[expr1338]",expressions:[{type:t.VALUE,evaluate:e=>e.element},{type:t.ATTRIBUTE,name:"checked",evaluate:e=>e.state.data.searchableElements&&e.state.data.searchableElements.includes(e.element)},{type:t.ATTRIBUTE,name:"disabled",evaluate:e=>e.element==e.dictData.config.titling.headword}]},{redundantAttribute:"expr1339",selector:"[expr1339]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.element}]}]),redundantAttribute:"expr1337",selector:"[expr1337]",itemName:"element",indexName:null,evaluate:e=>Object.keys(e.dictData.config.xema.elements)}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-config-buttons",slots:[],attributes:[{type:t.ATTRIBUTE,name:"save-data",evaluate:e=>e.saveData},{type:t.ATTRIBUTE,name:"show-save",evaluate:e=>e.state.hasElements}],redundantAttribute:"expr1340",selector:"[expr1340]"}]),name:"dict-config-searchability"},St={css:'dict-config-ske #kex_concsampling,[is="dict-config-ske"] #kex_concsampling{ width: 4em; } dict-config-ske #kex_searchElements,[is="dict-config-ske"] #kex_searchElements{ width: 10em; }',exports:{state:{isLoading:!0,isSaving:!1,data:{kex:{url:"https://app.sketchengine.eu",apiurl:"https://api.sketchengine.eu/bonito/run.cgi",concsampling:0,searchElements:[]},xampl:{container:"",template:"",markup:""},collx:{container:"",template:""},defo:{container:"",template:""},thes:{container:"",template:""}}},onMounted(){this.store.loadDictionaryConfig("ske").done(e=>{this.state.data=e.content,this.state.data.kex.concsampling&&""!=this.state.data.kex.concsampling||(this.state.data.kex.concsampling=0),this.state.data.kex.searchElements||(this.state.data.kex.searchElements=[]),$("#kex_corpus").autocomplete({data:{}}),$("#kex_corpus").data("corpora",{}),""!=this.state.data.kex.corpus&&$("#kex_corpus").data("selected-corpora",this.state.data.kex.corpus),this.store.loadCorpora().done(function(e){var a={},n={},i="";e.data.forEach(e=>{var t="",t=(e.sizes&&(t=", "+(e.sizes.tokencount/1e6).toFixed(2)+"M tokens"),e.name+" ("+e.language_name+t+")");n[t]=e.corpname,a[t]=null,$("#kex_corpus").data("selected-corpora")==e.corpname&&(i=t,$("#corpusInfo").html("Currently selected corpus: "+e.name+", show <a href='"+$.trim($("#kex_url").val())+"#dashboard?corp_info=1&corpname="+encodeURIComponent(e.corpname)+"' target='ske'>detailed corpus info</a>."),$("#corpusInfo").show())}),$("#kex_corpus").autocomplete({data:a}),$("#kex_corpus").data("corpora",n),$("#kex_corpus").attr("placeholder","Type to search in the list of corpora"),""!=i&&$("#kex_corpus").val(i)}),$("#kex_corpus").on("change",function(){var e=$(this).data("corpora"),t=$(this).val();$(this).data("selected-corpus",e[$(this).val()]),""===t?$("#corpusInfo").hide():($("#corpusInfo").html("Currently selected corpus: "+t+", show <a href='"+$.trim($("#kex_url").val())+"#dashboard?corp_info=1&corpname="+encodeURIComponent(e[t])+"' target='ske'>detailed corpus info</a>."),$("#corpusInfo").show())}),this.state.data.kex.searchElements.forEach(e=>{$("#kex_searchElements option[value="+e+"]").attr("selected","selected")}),""!=this.state.data.xampl.container&&$("#xampl_container option[value="+this.state.data.xampl.container+"]").attr("selected","selected"),""!=this.state.data.xampl.markup&&$("#xampl_markup option[value="+this.state.data.xampl.markup+"]").attr("selected","selected"),""!=this.state.data.collx.container&&$("#collx_container option[value="+this.state.data.collx.container+"]").attr("selected","selected"),""!=this.state.data.thes.container&&$("#thes_container option[value="+this.state.data.thes.container+"]").attr("selected","selected"),""!=this.state.data.defo.container&&$("#defo_container option[value="+this.state.data.defo.container+"]").attr("selected","selected")}).always(()=>{this.update({isLoading:!1}),M.updateTextFields(),M.textareaAutoResize($("#xampl_template"))})},onUpdated(){this.dictData.config.xema&&this.dictData.config.xema.elements&&(0==$("#kex_searchElements option").length&&Object.entries(this.dictData.config.xema.elements).forEach(([e,t])=>{"txt"!=t.filling&&"lst"!=t.filling||(t=this.state.data.kex.searchElements.includes(e)?"checked":"",$("#kex_searchElements").append('<option value="'+e+'" '+t+">"+e+"</option>"))}),1==$("#xampl_container option").length&&Object.entries(this.dictData.config.xema.elements).forEach(([e])=>{var t=this.state.data.xampl.container==e?"checked":"";$("#xampl_container").append('<option value="'+e+'" '+t+">"+e+"</option>")}),1==$("#xampl_markup option").length&&Object.entries(this.dictData.config.xema.elements).forEach(([e])=>{var t=this.state.data.xampl.markup==e?"checked":"";$("#xampl_markup").append('<option value="'+e+'" '+t+">"+e+"</option>")}),1==$("#collx_container option").length&&Object.entries(this.dictData.config.xema.elements).forEach(([e])=>{var t=this.state.data.collx.container==e?"checked":"";$("#collx_container").append('<option value="'+e+'" '+t+">"+e+"</option>")}),1==$("#defo_container option").length&&Object.entries(this.dictData.config.xema.elements).forEach(([e])=>{var t=this.state.data.defo.container==e?"checked":"";$("#defo_container").append('<option value="'+e+'" '+t+">"+e+"</option>")}),1==$("#thes_container option").length&&Object.entries(this.dictData.config.xema.elements).forEach(([e])=>{var t=this.state.data.thes.container==e?"checked":"";$("#thes_container").append('<option value="'+e+'" '+t+">"+e+"</option>")}),$("select").formSelect())},getConfigData(){return{kex:{url:$("#kex_url").val(),apiurl:$("#kex_apiurl").val(),corpus:$("#kex_corpus").data("selected-corpus"),concquery:$("#kex_concquery").val(),concsampling:$("#kex_concsampling").val(),searchElements:$("#kex_searchElements").val()},xampl:{container:$("#xampl_container").val(),template:$("#xampl_template").val(),markup:$("#xampl_markup").val()},collx:{container:$("#collx_container").val(),template:$("#collx_template").val()},defo:{container:$("#defo_container").val(),template:$("#defo_template").val()},thes:{container:$("#thes_container").val(),template:$("#thes_template").val()}}},saveData(){this.update({isSaving:!0}),this.store.updateDictionaryConfig("ske",this.getConfigData()).always(()=>this.update({isSaving:!1}))}},template:(e,t,a,n)=>e('<loading-overlay expr1521="expr1521"></loading-overlay><dict-nav expr1522="expr1522"></dict-nav><h1>Sketch Engine connection</h1><div class="row"><div class="input-field"><input expr1523="expr1523" id="kex_url" type="text"/><label for="kex_url">Sketch Engine URL</label><span class="helper-text">The URL of the Sketch Engine installation where external links should point. Defaults to <tt expr1524="expr1524"></tt>. Do not change this unless you are using a local installation of Sketch Engine.</span></div></div><div class="row"><div class="input-field"><input expr1525="expr1525" id="kex_apiurl" type="text"/><label for="kex_apiurl">Sketch Engine API URL</label><span class="helper-text">The path to the <tt expr1526="expr1526"></tt> API script in Sketch Engine. Defaults to <tt expr1527="expr1527"></tt>. Do not change this unless you are using a local installation of Sketch Engine.</span></div></div><template expr1528="expr1528"></template><template expr1532="expr1532"></template><div class="row"><h2>Examples</h2></div><div class="row"><div class="input-field"><select id="xampl_container"><option value>(not set)</option></select><label for="xampl_container">Example container</label><span class="helper-text">Select the element which should wrap each individual example. When you pull example sentences automatically from a corpus, Lexonomy will insert one of these elements for each example sentence.</span></div></div><div class="row"><div class="input-field"><textarea expr1533="expr1533" id="xampl_template" class="materialize-textarea" placeholder="XML template"> </textarea><label for="xampl_template">XML template</label><span class="helper-text">This is the XML that will be inserted into your entries with each corpus example. The actual text will be where the placeholder <tt expr1534="expr1534"></tt> is.</span></div></div><div class="row"><div class="input-field"><select id="xampl_markup"><option value>(not set)</option></select><label for="xampl_markup">Headword mark-up</label><span class="helper-text">Select the element which should mark up the headword in inserted corpus examples. This setting is optional: if you make no selection, corpus examples will be inserted without mark-up.</span></div></div><div class="row"><h2>Collocations</h2></div><div class="row"><div class="input-field"><select id="collx_container"><option value>(not set)</option></select><label for="collx_container">Collocation container</label><span class="helper-text">Select the element which should wrap each collocation (the collocate plus any other data). When you pull collocations automatically from a corpus, Lexonomy will insert one of these elements for each collocation.</span></div></div><div class="row"><div class="input-field"><textarea expr1535="expr1535" id="collx_template" class="materialize-textarea" placeholder="XML template"> </textarea><label for="collx_template">XML template</label><span class="helper-text">This is the XML that will be inserted into your entries with each collocation. The actual text will be where the placeholder <tt expr1536="expr1536"></tt> is.</span></div></div><div class="row"><h2>Thesaurus items</h2></div><div class="row"><div class="input-field"><select id="thes_container"><option value>(not set)</option></select><label for="thes_container">Thesaurus item container</label><span class="helper-text">Select the element which should wrap each individual thesaurus item (a word). When you pull thesaurus items automatically from a corpus, Lexonomy will insert one of these elements for each thesaurus item.</span></div></div><div class="row"><div class="input-field"><textarea expr1537="expr1537" id="thes_template" class="materialize-textarea" placeholder="XML template"> </textarea><label for="thes_template">XML template</label><span class="helper-text">This is the XML that will be inserted into your entries with each thesaurus item. The actual text will be where the placeholder <tt expr1538="expr1538"></tt> is.</span></div></div><div class="row"><h2>Definitions</h2></div><div class="row"><div class="input-field"><select id="defo_container"><option value>(not set)</option></select><label for="defo_container">Definition container</label><span class="helper-text">Select the element which should wrap each definition. When you pull definitions automatically from a corpus, Lexonomy will insert one of these elements for each definition.</span></div></div><div class="row"><div class="input-field"><textarea expr1539="expr1539" id="defo_template" class="materialize-textarea" placeholder="XML template"> </textarea><label for="defo_template">XML template</label><span class="helper-text">This is the XML that will be inserted into your entries with each definition. The actual text will be where the placeholder <tt expr1540="expr1540"></tt> is.</span></div></div><dict-config-buttons expr1541="expr1541"></dict-config-buttons>',[{type:a.IF,evaluate:e=>e.state.isLoading||e.state.isSaving,redundantAttribute:"expr1521",selector:"[expr1521]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"links",evaluate:e=>[["config","Configure"],["ske","Sketch Engine connection"]]}],redundantAttribute:"expr1522",selector:"[expr1522]"},{redundantAttribute:"expr1523",selector:"[expr1523]",expressions:[{type:t.VALUE,evaluate:e=>e.state.data.kex.url}]},{type:a.TAG,getComponent:n,evaluate:e=>"tt",slots:[{id:"default",html:"https://app.sketchengine.eu",bindings:[]}],attributes:[],redundantAttribute:"expr1524",selector:"[expr1524]"},{redundantAttribute:"expr1525",selector:"[expr1525]",expressions:[{type:t.VALUE,evaluate:e=>e.state.data.kex.apiurl}]},{type:a.TAG,getComponent:n,evaluate:e=>"tt",slots:[{id:"default",html:"run.cgi",bindings:[]}],attributes:[],redundantAttribute:"expr1526",selector:"[expr1526]"},{type:a.TAG,getComponent:n,evaluate:e=>"tt",slots:[{id:"default",html:"https://api.sketchengine.eu/bonito/run.cgi",bindings:[]}],attributes:[],redundantAttribute:"expr1527",selector:"[expr1527]"},{type:a.IF,evaluate:e=>e.authData.ske_username&&e.authData.ske_apiKey&&""!=e.authData.ske_username&&""!=e.authData.ske_apiKey,redundantAttribute:"expr1528",selector:"[expr1528]",template:e('<div class="row"><div class="input-field"><input expr1529="expr1529" type="text" id="kex_corpus" class="autocomplete" placeholder="Retrieving available corpora from Sketch Engine, please wait..."/><label for="kex_corpus">Corpus name</label><span class="helper-text">Select a Sketch Engine corpus from the list of corpora available to you.</span><span class="helper-text" id="corpusInfo" style="display: none"></span></div></div><div class="row"><div class="input-field"><input expr1530="expr1530" id="kex_concquery" type="text"/><label for="kex_concquery">Concordance query</label><span class="helper-text">The CQL query that will be used to obtain concordance from Sketch Engine. You can use placeholders for elements in the form of \'%(element)\', e.g. \'[lemma="%(headword)"]\'. If left empty the \'simple\' query type will be used as configured for the respective corpus. Please note that you cannot use CQL syntax with default attribute because it is not specified.</span></div></div><div class="row"><div class="input-field"><input expr1531="expr1531" id="kex_concsampling" type="number"/><label for="kex_concsampling">Sample size</label><span class="helper-text">Whether to apply automatic sampling of the concordance. Any non-zero value means to automatically create a random sample of that size.</span></div></div><div class="row"><div class="input-field"><select id="kex_searchElements" multiple></select><label for="kex_searchElements">Additional search elements</label><span class="helper-text">You can select any textual elements here whose content you would like to search for in Sketch Engine. A menu will be displayed next to all these elements like for the root entry element.</span></div></div>',[{redundantAttribute:"expr1529",selector:"[expr1529]",expressions:[{type:t.ATTRIBUTE,name:"data-selected-corpus",evaluate:e=>e.state.data.kex.corpus}]},{redundantAttribute:"expr1530",selector:"[expr1530]",expressions:[{type:t.VALUE,evaluate:e=>e.state.data.kex.concquery}]},{redundantAttribute:"expr1531",selector:"[expr1531]",expressions:[{type:t.VALUE,evaluate:e=>e.state.data.kex.concsampling}]}])},{type:a.IF,evaluate:e=>!e.authData.ske_username||!e.authData.ske_apiKey||""==e.authData.ske_apiKey||""==e.authData.ske_username,redundantAttribute:"expr1532",selector:"[expr1532]",template:e('<div class="card-panel amber lighten-2">\n         Please setup your Sketch Engine account in your <a href="#/userprofile">profile</a> settings to be able to select a corpus.\n      </div>',[])},{redundantAttribute:"expr1533",selector:"[expr1533]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.data.xampl.template}]},{type:a.TAG,getComponent:n,evaluate:e=>"tt",slots:[{id:"default",html:"$text",bindings:[]}],attributes:[],redundantAttribute:"expr1534",selector:"[expr1534]"},{redundantAttribute:"expr1535",selector:"[expr1535]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.data.collx.template}]},{type:a.TAG,getComponent:n,evaluate:e=>"tt",slots:[{id:"default",html:"$text",bindings:[]}],attributes:[],redundantAttribute:"expr1536",selector:"[expr1536]"},{redundantAttribute:"expr1537",selector:"[expr1537]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.data.thes.template}]},{type:a.TAG,getComponent:n,evaluate:e=>"tt",slots:[{id:"default",html:"$text",bindings:[]}],attributes:[],redundantAttribute:"expr1538",selector:"[expr1538]"},{redundantAttribute:"expr1539",selector:"[expr1539]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.data.defo.template}]},{type:a.TAG,getComponent:n,evaluate:e=>"tt",slots:[{id:"default",html:"$text",bindings:[]}],attributes:[],redundantAttribute:"expr1540",selector:"[expr1540]"},{type:a.TAG,getComponent:n,evaluate:e=>"dict-config-buttons",slots:[],attributes:[{type:t.ATTRIBUTE,name:"save-data",evaluate:e=>e.saveData}],redundantAttribute:"expr1541",selector:"[expr1541]"}]),name:"dict-config-ske"},Ct={css:'dict-config-subbing .element-info,[is="dict-config-subbing"] .element-info{ display: flex; flex-direction: column; border: 1px solid #CCC; margin: 15px 0; border-radius: 3px; padding: 15px 30px; } dict-config-subbing .element-info > .header,[is="dict-config-subbing"] .element-info > .header{ display: flex; flex-direction: row; flex-wrap: nowrap; align-items: baseline; justify-content: space-between; border-bottom: 1px solid #9e9e9e; margin-bottom: 25px; } dict-config-subbing .element-info > .att,[is="dict-config-subbing"] .element-info > .att,dict-config-subbing .element-info > .att-new,[is="dict-config-subbing"] .element-info > .att-new{ margin-left: 25px; padding-top: 25px; display: flex; flex-direction: row; align-items: baseline; flex-wrap: nowrap; width: 66.66%; } dict-config-subbing .att > *,[is="dict-config-subbing"] .att > *{ margin-right: 15px!important; flex: none; } dict-config-subbing .att > .name,[is="dict-config-subbing"] .att > .name{ min-width: 16.667% } dict-config-subbing .att > .value,[is="dict-config-subbing"] .att > .value,dict-config-subbing .att > .select-wrapper,[is="dict-config-subbing"] .att > .select-wrapper{ flex: auto; } dict-config-subbing .att + .att-new,[is="dict-config-subbing"] .att + .att-new{ border-top: 1px solid #9e9e9e; } dict-config-subbing .element-info > .att-new,[is="dict-config-subbing"] .element-info > .att-new{ flex-wrap: wrap; justify-content: stretch; } dict-config-subbing .att-new > *,[is="dict-config-subbing"] .att-new > *{ margin-right: 15px!important; flex: none; } dict-config-subbing .att-new > .name,[is="dict-config-subbing"] .att-new > .name,dict-config-subbing .att-new > .select-wrapper,[is="dict-config-subbing"] .att-new > .select-wrapper{ flex: auto; }',exports:{state:{isLoading:!0,isSaving:!1},dictId:"",configId:"",configTitle:"Subentries",configData:{},get xema(){return this.props.dictConfigs?.xema},get elements(){return Object.keys(this.xema?.elements||{})},get activeSubentries(){return this.xema?Object.entries(this.configData).map(([e,t])=>({name:e,valid:!!this.xema.elements[e],activeAttributes:Object.entries(t.attributes).map(([e,t])=>({name:e,value:t})),inactiveAttributes:Object.entries(this.xema.elements[e]?.attributes||{}).filter(([e])=>!(e in t.attributes)).map(([e,{values:t}])=>({name:e,values:t}))})):[]},get inactiveSubentries(){return this.elements.filter(e=>!this.configData[e])},addAttribute(e){const t=e.target.closest("[data-element]");var e=t.getAttribute("data-element"),a=t.querySelector(".new-attribute").value;a&&(this.configData[e].attributes=this.configData[e].attributes||{},this.configData[e].attributes[a]="",this.update())},deleteAttribute(e){var t=e.target.closest("[data-element]").getAttribute("data-element"),e=e.target.closest("[data-attribute]").getAttribute("data-attribute");delete this.configData[t].attributes[e],this.update()},changeAttribute(e){var t=e.target.closest("[data-element]").getAttribute("data-element"),a=e.target.closest("[data-attribute]").getAttribute("data-attribute"),e=e.target.value;this.configData[t].attributes[a]=e,this.update()},doDeleteEl(e){e=e.target.closest("[data-element]").getAttribute("data-element");delete this.configData[e],this.update()},doAddEl(e){var t=document.getElementById("new-element").value;t&&(this.configData[t]={attributes:{}},this.update())},onMounted(){this.dictId=this.props.dictId,this.configId=this.props.configId,this.store.loadDictionaryConfig("subbing").done(e=>this.configData=e.content).always(()=>this.update({isLoading:!1}))},onUpdated(){$("select").formSelect()},saveData(){this.update({isSaving:!0}),this.store.updateDictionaryConfig("subbing",this.configData).always(()=>this.update({isSaving:!1}))}},template:(e,t,a,n)=>e('<loading-overlay expr1347="expr1347"></loading-overlay><dict-nav expr1348="expr1348"></dict-nav><h1>Subentries</h1><template expr1349="expr1349"></template>',[{type:a.IF,evaluate:e=>e.state.isLoading||e.state.isSaving,redundantAttribute:"expr1347",selector:"[expr1347]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"links",evaluate:e=>[["config","Configure"],["subbing","Subentries"]]}],redundantAttribute:"expr1348",selector:"[expr1348]"},{type:a.IF,evaluate:e=>!e.state.isLoading,redundantAttribute:"expr1349",selector:"[expr1349]",template:e('<dict-config-nav expr1350="expr1350"></dict-config-nav><div expr1351="expr1351"></div><div expr1364="expr1364" class="row" style="margin-top: 15px;"></div><button expr1367="expr1367" class="btn waves-effect waves-light" id="submit_button">Save <i class="material-icons right">save</i></button>',[{type:a.TAG,getComponent:n,evaluate:e=>"dict-config-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"dictId",evaluate:e=>e.dictId},{type:t.ATTRIBUTE,name:"dictTitle",evaluate:e=>e.props.dictDetails.title},{type:t.ATTRIBUTE,name:"configId",evaluate:e=>e.configId},{type:t.ATTRIBUTE,name:"configTitle",evaluate:e=>e.configTitle}],redundantAttribute:"expr1350",selector:"[expr1350]"},{type:a.EACH,getKey:null,condition:null,template:e('<div class="header"><h5 expr1352="expr1352"> </h5><button expr1353="expr1353" type="button" class="btn btn-small red lighten-1" title="Remove subentry" style="margin-right: 15px;"><i class="material-icons">delete</i></button></div><div expr1354="expr1354" class="att"></div><div expr1361="expr1361" class="att-new"></div>',[{expressions:[{type:t.ATTRIBUTE,name:"data-element",evaluate:e=>e.element.name},{type:t.ATTRIBUTE,name:"class",evaluate:e=>e.element.valid?"element-info":"element-info text-red"}]},{redundantAttribute:"expr1352",selector:"[expr1352]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.element.name," ",e.element.valid?"":"(unknown element)!"].join("")}]},{redundantAttribute:"expr1353",selector:"[expr1353]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.doDeleteEl}]},{type:a.EACH,getKey:null,condition:null,template:e('<label expr1355="expr1355" class="name blue-text flow-text"> </label><select expr1356="expr1356" class="value"></select><input expr1359="expr1359" type="text" class="value" placeholder="Value"/><button expr1360="expr1360" type="button" class="btn btn-small red lighten-1" title="Remove attribute"><i class="material-icons">delete</i></button>',[{expressions:[{type:t.ATTRIBUTE,name:"data-attribute",evaluate:e=>e.att.name}]},{redundantAttribute:"expr1355",selector:"[expr1355]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>["@",e.att.name].join("")},{type:t.ATTRIBUTE,name:"for",evaluate:e=>e.att.name+"-value"}]},{type:a.IF,evaluate:e=>e.att.values,redundantAttribute:"expr1356",selector:"[expr1356]",template:e('<option expr1357="expr1357" value>[any value]</option><option expr1358="expr1358"></option>',[{expressions:[{type:t.EVENT,name:"onchange",evaluate:e=>e.changeAttribute},{type:t.ATTRIBUTE,name:"value",evaluate:e=>e.att.value},{type:t.ATTRIBUTE,name:"name",evaluate:e=>e.att.name+"-value"}]},{redundantAttribute:"expr1357",selector:"[expr1357]",expressions:[{type:t.ATTRIBUTE,name:"selected",evaluate:e=>!e.att.value}]},{type:a.EACH,getKey:null,condition:null,template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.v.value},{type:t.ATTRIBUTE,name:"value",evaluate:e=>e.v.value},{type:t.ATTRIBUTE,name:"selected",evaluate:e=>e.v.value===e.att.value}]}]),redundantAttribute:"expr1358",selector:"[expr1358]",itemName:"v",indexName:null,evaluate:e=>e.att.values}])},{type:a.IF,evaluate:e=>!e.att.values,redundantAttribute:"expr1359",selector:"[expr1359]",template:e(null,[{expressions:[{type:t.ATTRIBUTE,name:"value",evaluate:e=>e.att.value},{type:t.EVENT,name:"onchange",evaluate:e=>e.changeAttribute}]}])},{redundantAttribute:"expr1360",selector:"[expr1360]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.deleteAttribute}]}]),redundantAttribute:"expr1354",selector:"[expr1354]",itemName:"att",indexName:null,evaluate:e=>e.element.activeAttributes},{type:a.IF,evaluate:e=>e.element.inactiveAttributes.length,redundantAttribute:"expr1361",selector:"[expr1361]",template:e('<label style="width: 100%">(Optional) - Attributes this element should have to be a subentry: </label><select class="name new-attribute" name="new-attribute"><option expr1362="expr1362"></option></select><button expr1363="expr1363" class="btn btn-small" type="button"><i class="material-icons">add</i></button>',[{type:a.EACH,getKey:null,condition:null,template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.att.name},{type:t.ATTRIBUTE,name:"value",evaluate:e=>e.att.name}]}]),redundantAttribute:"expr1362",selector:"[expr1362]",itemName:"att",indexName:null,evaluate:e=>e.element.inactiveAttributes},{redundantAttribute:"expr1363",selector:"[expr1363]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.addAttribute}]}])}]),redundantAttribute:"expr1351",selector:"[expr1351]",itemName:"element",indexName:null,evaluate:e=>e.activeSubentries},{type:a.IF,evaluate:e=>e.inactiveSubentries.length,redundantAttribute:"expr1364",selector:"[expr1364]",template:e('<div class="input-field col s6"><select id="new-element"><option expr1365="expr1365"></option></select><label for="new-element">Subentry element</label><span class="helper-text">Elements listed here function as subentries which can be shared by multiple entries.</span></div><div class="input-field col s1"><a expr1366="expr1366" class="btn btn-small"><i class="material-icons">add</i></a></div>',[{type:a.EACH,getKey:null,condition:null,template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.elementName},{type:t.ATTRIBUTE,name:"value",evaluate:e=>e.elementName}]}]),redundantAttribute:"expr1365",selector:"[expr1365]",itemName:"elementName",indexName:null,evaluate:e=>e.inactiveSubentries},{redundantAttribute:"expr1366",selector:"[expr1366]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.doAddEl}]}])},{redundantAttribute:"expr1367",selector:"[expr1367]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.saveData}]}])}]),name:"dict-config-subbing"},Dt={css:'dict-config .columnContainer,[is="dict-config"] .columnContainer{ display: flex; gap: 4vw; justify-content: space-between; margin: auto; } dict-config li,[is="dict-config"] li{ padding: 0 0 0.7rem 0.7rem; }',exports:{bindings:[["store","dictionaryChanged","update"]],state:{stats:{},isResaving:!1,resaveProgressMessage:""},onMounted(){this.getStats()},getStats(){$.get(this.dictData.dictId+"/stats.json").then(e=>this.update({stats:e}))},async resave(){if(!this.state.isResaving)for(this.update({isResaving:!0});;){var{progressMessage:e,finished:t}=await $.get(this.dictId+"/resave.json");if(t)return void this.update({isResaving:!1});this.update({resaveProgressMessage:e})}}},template:(e,t,a,n)=>e('<dict-nav expr1392="expr1392"></dict-nav><h1>Configuration</h1><div expr1393="expr1393" class="row"></div><div expr1395="expr1395"></div><div class="columnContainer" style="margin-left: 20px;"><div><h3 class="header">Manage dictionary</h3><ul><li><a expr1397="expr1397">Description</a></li><li><a expr1398="expr1398">Users</a></li><li><a expr1399="expr1399">Publishing</a></li><li><a expr1400="expr1400">Change URL</a></li></ul></div><div><h3 class="header">Entry settings</h3><ul><li><a expr1401="expr1401">Structure</a></li><li expr1402="expr1402"></li><li expr1404="expr1404"></li><li><a expr1406="expr1406">Headword list</a></li><li><a expr1407="expr1407">Searching</a></li></ul></div><div style="margin-right: auto;"><h3 class="header">Expert settings</h3><ul><li><a expr1408="expr1408">Entry editor</a></li><li><a expr1409="expr1409">Flags</a></li><li><a expr1410="expr1410">Auto-numbering</a></li><li><a expr1411="expr1411">Linking</a></li><li><a expr1412="expr1412">Download settings</a></li><li><a expr1413="expr1413">Subentries</a></li><li><a expr1414="expr1414">Sketch Engine</a></li><li><a expr1415="expr1415">KonText</a></li><li><a expr1416="expr1416">Multimedia API</a></li></ul></div></div>',[{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"links",evaluate:e=>[["config","Configure"]]}],redundantAttribute:"expr1392",selector:"[expr1392]"},{type:a.IF,evaluate:e=>e.state.stats.needUpdate&&!e.state.isResaving,redundantAttribute:"expr1393",selector:"[expr1393]",template:e(' <button expr1394="expr1394" class="btn" style="margin-left: 15px;">Do it now</button>',[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>["Your dictionary needs to be re-indexed (",e.stats.needUpdate," entries)."].join("")}]},{redundantAttribute:"expr1394",selector:"[expr1394]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.resave}]}])},{type:a.IF,evaluate:e=>e.state.isResaving,redundantAttribute:"expr1395",selector:"[expr1395]",template:e('\n      Re-indexing your dictionary, please wait...<br/><span expr1396="expr1396"></span>',[{type:a.IF,evaluate:e=>e.state.resaveProgressMessage,redundantAttribute:"expr1396",selector:"[expr1396]",template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.resaveProgressMessage}]}])}])},{redundantAttribute:"expr1397",selector:"[expr1397]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/config/ident"].join("")}]},{redundantAttribute:"expr1398",selector:"[expr1398]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/config/users"].join("")}]},{redundantAttribute:"expr1399",selector:"[expr1399]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/config/publico"].join("")}]},{redundantAttribute:"expr1400",selector:"[expr1400]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/config/url"].join("")}]},{redundantAttribute:"expr1401",selector:"[expr1401]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/config/xema"].join("")}]},{type:a.IF,evaluate:e=>!e.dictData.xemplateOverride,redundantAttribute:"expr1402",selector:"[expr1402]",template:e('<a expr1403="expr1403">Formatting</a>',[{redundantAttribute:"expr1403",selector:"[expr1403]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/config/xemplate"].join("")}]}])},{type:a.IF,evaluate:e=>e.dictData.xemplateOverride,redundantAttribute:"expr1404",selector:"[expr1404]",template:e('<a expr1405="expr1405">Formatting</a>',[{redundantAttribute:"expr1405",selector:"[expr1405]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/config/xemplate-override"].join("")}]}])},{redundantAttribute:"expr1406",selector:"[expr1406]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/config/titling"].join("")}]},{redundantAttribute:"expr1407",selector:"[expr1407]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/config/searchability"].join("")}]},{redundantAttribute:"expr1408",selector:"[expr1408]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/config/editing"].join("")}]},{redundantAttribute:"expr1409",selector:"[expr1409]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/config/flagging"].join("")}]},{redundantAttribute:"expr1410",selector:"[expr1410]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/config/autonumber"].join("")}]},{redundantAttribute:"expr1411",selector:"[expr1411]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/config/links"].join("")}]},{redundantAttribute:"expr1412",selector:"[expr1412]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/config/download"].join("")}]},{redundantAttribute:"expr1413",selector:"[expr1413]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/config/subbing"].join("")}]},{redundantAttribute:"expr1414",selector:"[expr1414]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/config/ske"].join("")}]},{redundantAttribute:"expr1415",selector:"[expr1415]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/config/kontext"].join("")}]},{redundantAttribute:"expr1416",selector:"[expr1416]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/config/gapi"].join("")}]}]),name:"dict-config"},$t={css:null,exports:{state:{isLoading:!0,isSaving:!1,data:{headwordAnnotationsType:"simple",headwordAnnotations:[]}},changeAnnotation(){$("[name=hwannotype][value=advanced]").is(":checked")?($("#headwordAnnotations").attr("disabled","disabled"),$("#advancedAnnotations").removeAttr("disabled")):($("#advancedAnnotations").attr("disabled","disabled"),$("#headwordAnnotations").removeAttr("disabled")),$("#headwordAnnotations").formSelect()},onMounted(){this.store.loadDictionaryConfig("titling").done(e=>{this.state.data=e.content,this.state.data.numberEntries||(this.state.data.numberEntries=1e3),this.state.data.headwordAnnotationsType||(this.state.data.headwordAnnotationsType="simple"),this.state.data.headwordAnnotations||(this.state.data.headwordAnnotations=[]),this.state.data.sort_locale&&""!=this.state.data.sort_locale&&$("#sort_locale").data("selected-locale",this.state.data.sort_locale);var t={},a={},n="";this.state.data.locales.forEach(e=>{t[e.lang]=null,a[e.lang]=e.code,e.code==this.state.data.locale&&(n=e.lang)}),$("#sort_locale").autocomplete({data:t}),$("#sort_locale").data("locales",a),""!=n&&$("#sort_locale").val(n),$("#sort_locale").on("change",function(){var e=$(this).data("locales");$(this).data("selected-locale",e[$(this).val()])})}).always(()=>{this.update({isLoading:!1}),M.updateTextFields(),M.textareaAutoResize($("#advancedAnnotations"))})},onUpdated(){this.dictData.dictConfigs.xema&&this.dictData.dictConfigs.xema.elements&&(1==$("#headword option").length&&Object.entries(this.dictData.dictConfigs.xema.elements).forEach(([e])=>{$("#headword").append('<option value="'+e+'">'+e+"</option>")}),1==$("#headwordSorting option").length&&Object.entries(this.dictData.dictConfigs.xema.elements).forEach(([e])=>{$("#headwordSorting").append('<option value="'+e+'">'+e+"</option>")}),0==$("#headwordAnnotations option").length&&Object.entries(this.dictData.dictConfigs.xema.elements).forEach(([e])=>{e!=this.state.data.headword&&$("#headwordAnnotations").append('<option value="'+e+'">'+e+"</option>")}),""!=this.state.data.headword&&$("#headword option[value="+this.state.data.headword+"]").attr("selected","selected"),""!=this.state.data.headwordSorting&&$("#headwordSorting option[value="+this.state.data.headwordSorting+"]").attr("selected","selected"),this.state.data.headwordAnnotations.forEach(e=>{$("#headwordAnnotations option[value="+e+"]").attr("selected","selected")}),$("select").formSelect())},getConfigData(){var e={headword:$("#headword").val(),headwordSorting:$("#headwordSorting").val(),sortDesc:$("#sortDesc").is(":checked"),numberEntries:$("#numberEntries").val(),locale:$("#sort_locale").data("selected-locale")};return $("[name=hwannotype][value=advanced]").is(":checked")?(e.headwordAnnotationsType="advanced",e.headwordAnnotationsAdvanced=$("#advancedAnnotations").val()):(e.headwordAnnotationsType="simple",e.headwordAnnotations=$("#headwordAnnotations").val()),e},saveData(){this.update({isSaving:!0}),this.store.updateDictionaryConfig("titling",this.getConfigData()).always(()=>this.update({isSaving:!1}))}},template:(e,t,a,n)=>e('<loading-overlay expr1378="expr1378"></loading-overlay><dict-nav expr1379="expr1379"></dict-nav><h1>Headword</h1><div class="row"><div class="input-field col s6"><select id="headword"><option value>(not set)</option></select><label for="headword">Headword</label><span class="helper-text">Select the element which contains the entry\'s headword. If you make no selection here Lexonomy will try to guess what the headword of each entry is.</span></div></div><div class="row"><div class="input-field col s6"><select id="headwordSorting"><option value>(not set)</option></select><label for="headwordSorting">Headword sorting</label><span class="helper-text">Select the element which will be used for sorting of headwords in the entry list. If you make no selection here Lexonomy will use the element you chose for headword.</span></div><div class="input-field col s6"><label style="padding-top: 30px;"><input expr1380="expr1380" type="checkbox" id="sortDesc"/><span>Sort in descending order</span></label></div></div><div class="row"><h4>Headword annotations</h4></div><div class="row"><div class="col s5"><label><input expr1381="expr1381" name="hwannotype" type="radio" value="simple"/><span>simple</span></label><br/><div class="input-field"><select expr1382="expr1382" id="headwordAnnotations" multiple></select><span class="helper-text">You can select any elements here whose content you want displayed beside the headword in the entry list, such as homograph numbers or part-of-speech labels.</span></div></div><div class="col s5"><label><input expr1383="expr1383" name="hwannotype" type="radio" value="advanced"/><span>advanced</span></label><br/><div class="input-field"><textarea expr1384="expr1384" id="advancedAnnotations" class="materialize-textarea" placeholder="headword annotations"> </textarea><span class="helper-text">You can insert any HTML containing placeholders for elements in the form of \'%(element)\', e.g. \'&lt;b>%(headword)&lt;/b>\'.</span></div></div></div><div class="row"><div class="input-field col s8"><input expr1385="expr1385" type="text" id="sort_locale" class="autocomplete" placeholder="Type to search for language"/><label for="sort_locale">Alphabetical order</label><span class="helper-text">Select language to sort entries alphabetically in the entry list.</span></div></div><div class="row"><div class="input-field col s6"><input expr1386="expr1386" id="numberEntries" type="number"/><label for="numberEntries">Number of entries to be shown in the entry list at once</label><span class="helper-text">If your dictionary contains large entries (large XML files), it is recommended to reduce this number for quicker loading of entry list.</span></div></div><dict-config-buttons expr1387="expr1387"></dict-config-buttons>',[{type:a.IF,evaluate:e=>e.state.isLoading||e.state.isSaving,redundantAttribute:"expr1378",selector:"[expr1378]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"links",evaluate:e=>[["config","Configure"],["titling","Headword list"]]}],redundantAttribute:"expr1379",selector:"[expr1379]"},{redundantAttribute:"expr1380",selector:"[expr1380]",expressions:[{type:t.ATTRIBUTE,name:"checked",evaluate:e=>e.state.data.sortDesc}]},{redundantAttribute:"expr1381",selector:"[expr1381]",expressions:[{type:t.ATTRIBUTE,name:"checked",evaluate:e=>"simple"==e.state.data.headwordAnnotationsType},{type:t.EVENT,name:"onchange",evaluate:e=>e.changeAnnotation}]},{redundantAttribute:"expr1382",selector:"[expr1382]",expressions:[{type:t.ATTRIBUTE,name:"disabled",evaluate:e=>"advanced"==e.state.data.headwordAnnotationsType}]},{redundantAttribute:"expr1383",selector:"[expr1383]",expressions:[{type:t.ATTRIBUTE,name:"checked",evaluate:e=>"advanced"==e.state.data.headwordAnnotationsType},{type:t.EVENT,name:"onchange",evaluate:e=>e.changeAnnotation}]},{redundantAttribute:"expr1384",selector:"[expr1384]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.data.headwordAnnotationsAdvanced},{type:t.ATTRIBUTE,name:"disabled",evaluate:e=>"simple"==e.state.data.headwordAnnotationsType}]},{redundantAttribute:"expr1385",selector:"[expr1385]",expressions:[{type:t.ATTRIBUTE,name:"data-selected-locale",evaluate:e=>e.state.data.locale}]},{redundantAttribute:"expr1386",selector:"[expr1386]",expressions:[{type:t.VALUE,evaluate:e=>e.state.data.numberEntries}]},{type:a.TAG,getComponent:n,evaluate:e=>"dict-config-buttons",slots:[],attributes:[{type:t.ATTRIBUTE,name:"save-data",evaluate:e=>e.saveData}],redundantAttribute:"expr1387",selector:"[expr1387]"}]),name:"dict-config-titling"},Lt={css:null,exports:{saveData(){this.update({isSaving:!0});var t=$("#url").val();""!=t&&$("#url").hasClass("valid")&&$.post(window.API_URL+this.dictData.dictId+"/move.json",{url:t},e=>{e.success?($("#success").show(),$("#newlink").attr("href","#/"+t)):$("#error").show(),this.update({isSaving:!1})})}},template:(e,t,a,n)=>e('<loading-overlay expr1388="expr1388"></loading-overlay><dict-nav expr1389="expr1389"></dict-nav><h1>Change URL</h1><div class="row"><label for="url">Current URL</label><div style="margin: 0 0 30px;"><span expr1390="expr1390"> </span></div></div><div class="row"><label for="url">New URL</label><div><div style="display: flex; align-items: baseline;"><span id="baseUrl">https://www.lexonomy.eu/</span><span><input id="url" type="text" class="validate inlineBlock" required minlength="5" pattern="[a-zA-Z0-9\\-_]*" style="max-width: 300px;"/></span></div><div class="input-field" style="margin-top: 0;"><span class="helper-text">This will be your dictionary\'s address on the web. You will be able to change this later. Allowed: letters, numbers, - and _</span></div></div></div><dict-config-buttons expr1391="expr1391" label="Change"></dict-config-buttons><br/><div><span id="error" style="display:none">This URL is already taken.</span><span id="success" style="display:none">\n         Your dictionary has been moved to a new URL.\n         <a href id="newlink">Go to new dictionary URL</a>.\n      </span></div>',[{type:a.IF,evaluate:e=>e.state.isSaving,redundantAttribute:"expr1388",selector:"[expr1388]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"links",evaluate:e=>[["config","Configure"],["url","Change URL"]]}],redundantAttribute:"expr1389",selector:"[expr1389]"},{redundantAttribute:"expr1390",selector:"[expr1390]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>["https://www.lexonomy.eu/",e.dictData.dictId].join("")}]},{type:a.TAG,getComponent:n,evaluate:e=>"dict-config-buttons",slots:[],attributes:[{type:t.ATTRIBUTE,name:"save-data",evaluate:e=>e.saveData}],redundantAttribute:"expr1391",selector:"[expr1391]"}]),name:"dict-config-url"},Nt={css:'dict-config-users .user-checkbox,[is="dict-config-users"] .user-checkbox{ padding-right: 2em; } dict-config-users .delete-user,[is="dict-config-users"] .delete-user,dict-config-users .add-user,[is="dict-config-users"] .add-user{ float: right; } dict-config-users #userConfigError,[is="dict-config-users"] #userConfigError{ margin-left: 1em; color: red; }',exports:{state:{isLoading:!0,isSaving:!1,data:{users:[]}},onEmailInput(e,t){this.state.data.users[e].email=t.target.value},onPermissionChange(e,t){this.state.data.users[e][t.target.name]=t.target.checked},doDeleteUser(e){this.state.data.users.splice(e,1),this.update()},doAddUser(e){this.state.data.users.push({id:this.state.data.users.length,email:"",canEdit:!1,canConfig:!1,canDownload:!1,canUpload:!1,isEditable:!0}),this.update(),$('table input[type="email"]',this.root).last().focus()},onMounted(){this.store.loadDictionaryConfig("users").done(e=>{this.state.data={users:[]};let t=0;for(var a in e.content){var n=e.content[a];n.email=a,n.id=t,t++,this.state.data.users.push(n)}}).always(()=>{this.update({isLoading:!1})})},saveData(){if(null==Object.values(this.state.data.users).find(e=>e.canConfig))$("#userConfigError").html("At least one user must have <i>Configure</i> permission.");else{$("#userConfigError").html("");let t={};this.state.data.users.forEach(e=>{t[e.email]={canEdit:e.canEdit,canConfig:e.canConfig,canDownload:e.canDownload,canUpload:e.canUpload}}),this.update({isSaving:!0}),this.store.updateDictionaryConfig("users",t).always(()=>this.update({isSaving:!1}))}}},template:(e,t,a,n)=>e('<loading-overlay expr1440="expr1440"></loading-overlay><dict-nav expr1441="expr1441"></dict-nav><h1>Users</h1><template expr1442="expr1442"></template>',[{type:a.IF,evaluate:e=>e.state.isLoading||e.state.isSaving,redundantAttribute:"expr1440",selector:"[expr1440]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"links",evaluate:e=>[["config","Configure"],["users","Users"]]}],redundantAttribute:"expr1441",selector:"[expr1441]"},{type:a.IF,evaluate:e=>!e.state.isLoading,redundantAttribute:"expr1442",selector:"[expr1442]",template:e('<div expr1443="expr1443" class="grey-text center-align"></div><div><div expr1446="expr1446"></div></div>',[{type:a.IF,evaluate:e=>!e.state.data.users.length,redundantAttribute:"expr1443",selector:"[expr1443]",template:e('<h2>No users</h2><br/><button expr1444="expr1444" class="btn btn-primary"><i class="material-icons right">add</i>\n            Add new user\n         </button><br/><br/><br/><br/><div class="buttons" style="justify-content: center;"><dict-config-buttons expr1445="expr1445"></dict-config-buttons></div>',[{redundantAttribute:"expr1444",selector:"[expr1444]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.doAddUser}]},{type:a.TAG,getComponent:n,evaluate:e=>"dict-config-buttons",slots:[],attributes:[{type:t.ATTRIBUTE,name:"save-data",evaluate:e=>e.saveData}],redundantAttribute:"expr1445",selector:"[expr1445]"}])},{type:a.IF,evaluate:e=>e.state.data.users.length,redundantAttribute:"expr1446",selector:"[expr1446]",template:e('<table><thead><tr style="border-bottom: none;"><th></th><th colspan="5">Privileges</th></tr><tr><th>User email</th><th>Edit</th><th>Configure</th><th>Download</th><th>Upload</th><th></th></tr></thead><tbody><tr expr1447="expr1447" no-reorder></tr></tbody></table><br/><div><button expr1456="expr1456" class="btn"><i class="material-icons right">add</i>\n               Add new user\n            </button></div><br/><br/><dict-config-buttons expr1457="expr1457"></dict-config-buttons><div id="userConfigError"></div>',[{type:a.EACH,getKey:e=>e.user.id,condition:null,template:e('<td><span expr1448="expr1448"></span><span expr1450="expr1450"></span></td><td><label><input expr1451="expr1451" type="checkbox" name="canEdit"/><span></span></label></td><td><label><input expr1452="expr1452" type="checkbox" name="canConfig"/><span></span></label></td><td><label><input expr1453="expr1453" type="checkbox" name="canDownload"/><span></span></label></td><td><label><input expr1454="expr1454" type="checkbox" name="canEdit"/><span></span></label></td><td><a expr1455="expr1455" class="btn btn-floating delete-user"><i class="material-icons">delete</i></a></td>',[{type:a.IF,evaluate:e=>e.user.isEditable,redundantAttribute:"expr1448",selector:"[expr1448]",template:e('<input expr1449="expr1449" id="new-email" type="email" class="validate" style="max-width: 300px;"/>',[{redundantAttribute:"expr1449",selector:"[expr1449]",expressions:[{type:t.EVENT,name:"oninput",evaluate:e=>e.onEmailInput.bind(e,e.idx)}]}])},{type:a.IF,evaluate:e=>!e.user.isEditable,redundantAttribute:"expr1450",selector:"[expr1450]",template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.user.email].join("")}]}])},{redundantAttribute:"expr1451",selector:"[expr1451]",expressions:[{type:t.ATTRIBUTE,name:"checked",evaluate:e=>e.user.canEdit},{type:t.EVENT,name:"onchange",evaluate:e=>e.onPermissionChange.bind(e,e.idx)}]},{redundantAttribute:"expr1452",selector:"[expr1452]",expressions:[{type:t.ATTRIBUTE,name:"checked",evaluate:e=>e.user.canConfig},{type:t.EVENT,name:"onchange",evaluate:e=>e.onPermissionChange.bind(e,e.idx)}]},{redundantAttribute:"expr1453",selector:"[expr1453]",expressions:[{type:t.ATTRIBUTE,name:"checked",evaluate:e=>e.user.canDownload},{type:t.EVENT,name:"onchange",evaluate:e=>e.onPermissionChange.bind(e,e.idx)}]},{redundantAttribute:"expr1454",selector:"[expr1454]",expressions:[{type:t.ATTRIBUTE,name:"checked",evaluate:e=>e.user.canUpload},{type:t.EVENT,name:"onchange",evaluate:e=>e.onPermissionChange.bind(e,e.idx)}]},{redundantAttribute:"expr1455",selector:"[expr1455]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.doDeleteUser.bind(e,e.idx)}]}]),redundantAttribute:"expr1447",selector:"[expr1447]",itemName:"user",indexName:"idx",evaluate:e=>e.state.data.users},{redundantAttribute:"expr1456",selector:"[expr1456]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.doAddUser}]},{type:a.TAG,getComponent:n,evaluate:e=>"dict-config-buttons",slots:[],attributes:[{type:t.ATTRIBUTE,name:"save-data",evaluate:e=>e.saveData}],redundantAttribute:"expr1457",selector:"[expr1457]"}])}])}]),name:"dict-config-users"},Ut={css:'dict-config-xema #editor,[is="dict-config-xema"] #editor{ position: relative !important; min-height: 750px; display: flex; flex-wrap: nowrap; } dict-config-xema #editor .details,[is="dict-config-xema"] #editor .details{flex-grow: 1;} dict-config-xema .editor .list,[is="dict-config-xema"] .editor .list{ flex-basis: 0; } dict-config-xema #editor.designer input.textbox.cap,[is="dict-config-xema"] #editor.designer input.textbox.cap{ width: 15em !important; } dict-config-xema #editor.designer input[type=radio],[is="dict-config-xema"] #editor.designer input[type=radio]{ opacity: 1 !important; } dict-config-xema { display: block; }',exports:{state:{isLoading:!0,isSaving:!1,override:!1,currentElement:null,currentAttribute:null,xema:void 0},async onBeforeMount(e,t){this.state.xema=(await this.store.loadDictionaryConfig("xema")).content,this.state.isLoading=!1,this.state.override=!(!this.state.xema._xonomyDocSpec&&!this.state.xema._dtd),this.state.currentElement=this.state.xema.root,this.state.currentAttribute=void 0,this.update(),this.state.override&&(M.updateTextFields(),M.textareaAutoResize($("#editor_doc")),M.textareaAutoResize($("#editor_xml")),M.textareaAutoResize($("#editor_dtd")))},onBeforeUpdate(){if(this.state.xema){const t=new Set(Object.keys(this.state.xema.elements));Object.values(this.state.xema.elements).forEach(e=>e.children.forEach(e=>t.delete(e.name))),this.state.roots=[...t].map(e=>({...this.state.xema.elements[e],id:e}))}},toggleOverride(){this.state.override=!this.state.override,this.state.override||(delete this.state.xema._xonomyDocSpec,delete this.state.xema._dtd,delete this.state.xema._newXml),this.update()},getConfigData(){var e={...this.state.xema};return this.override&&($("#editor_doc").val()&&(e._xonomyDocSpec=$("#editor_doc").val()),$("#editor_xml").val()&&(e._newXml=$("#editor_xml").val()),$("#editor_dtd").val()&&(e._dtd=$("#editor_dtd").val())),e},saveData(){this.update({isSaving:!0}),this.store.updateDictionaryConfig("xema",this.getConfigData()).always(()=>this.update({isSaving:!1}))},selectElementOrAttribute(e,t){this.state.currentElement=e,this.state.currentAttribute=t,console.log(`Updating actives, ${this.state.currentElement} @`+this.state.currentAttribute),this.update()},onXemaElementUpdated(e,t){this.state.xema.elements[e]=t,this.update()},onXemaElementDeleted(e){delete this.state.xema.elements[e],this.update()},onXemaAttributeUpdated(e){const t=this.state.xema.elements[this.state.currentElement];t.attributes[this.state.currentAttribute]=e,this.update()},onXemaAttributeRenamed(e){const t=this.state.xema.elements[this.state.currentElement];t.attributes[e]=t.attributes[this.state.currentAttribute],delete t.attributes[this.state.currentAttribute],this.state.currentAttribute=e,this.update()},exampleDoc(){this.state.xema._xonomyDocSpec=JSON.stringify({elements:{entry:{},headword:{hasText:!0}}},void 0,2),this.update()},exampleXML(){this.state.xema._xml="<entry><headword></headword></entry>",this.update()},exampleDTD(){this.state.xema._dtd=`<!ELEMENT entry (headword)>
<!ELEMENT headword (#PCDATA)>`,this.update}},template:(e,t,a,n)=>e('<loading-overlay expr1423="expr1423"></loading-overlay><dict-nav expr1424="expr1424"></dict-nav><h1>Entry structure</h1><div expr1425="expr1425"></div><template expr1426="expr1426"></template>',[{type:a.IF,evaluate:e=>e.state.isLoading||e.state.isSaving,redundantAttribute:"expr1423",selector:"[expr1423]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"links",evaluate:e=>[["config","Configure"],["xema","Entry structure"]]}],redundantAttribute:"expr1424",selector:"[expr1424]"},{type:a.IF,evaluate:e=>!e.state.xema,redundantAttribute:"expr1425",selector:"[expr1425]",template:e("Loading...",[])},{type:a.IF,evaluate:e=>e.state.xema,redundantAttribute:"expr1426",selector:"[expr1426]",template:e('<div expr1427="expr1427" id="editor" class="editor designer"></div><div expr1431="expr1431"></div><div><button expr1438="expr1438" class="btn waves-effect waves-light"> <i class="material-icons right">edit</i></button></div><dict-config-buttons expr1439="expr1439"></dict-config-buttons>',[{type:a.IF,evaluate:e=>!e.state.override,redundantAttribute:"expr1427",selector:"[expr1427]",template:e('<div class="list"><dict-config-element-in-tree expr1428="expr1428"></dict-config-element-in-tree></div><div class="details"><dict-config-xema-element expr1429="expr1429"></dict-config-xema-element><dict-config-xema-attribute expr1430="expr1430"></dict-config-xema-attribute></div>',[{type:a.EACH,getKey:null,condition:null,template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"dict-config-element-in-tree",slots:[],attributes:[{type:t.ATTRIBUTE,name:"data",evaluate:e=>e.root},{type:t.ATTRIBUTE,name:"xema",evaluate:e=>e.state.xema},{type:t.ATTRIBUTE,name:"current-element",evaluate:e=>e.state.currentElement},{type:t.ATTRIBUTE,name:"current-attribute",evaluate:e=>e.state.currentAttribute},{type:t.ATTRIBUTE,name:"selectElementOrAttribute",evaluate:e=>e.selectElementOrAttribute}]}]),redundantAttribute:"expr1428",selector:"[expr1428]",itemName:"root",indexName:null,evaluate:e=>e.state.roots},{type:a.IF,evaluate:e=>e.state.currentElement&&!e.state.currentAttribute,redundantAttribute:"expr1429",selector:"[expr1429]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"dict-config-xema-element",slots:[],attributes:[{type:t.ATTRIBUTE,name:"elementId",evaluate:e=>e.state.currentElement},{type:t.ATTRIBUTE,name:"xema",evaluate:e=>e.state.xema},{type:t.ATTRIBUTE,name:"config",evaluate:e=>e.state.xema.elements[e.state.currentElement]},{type:t.ATTRIBUTE,name:"applyLocalData",evaluate:e=>e.onXemaElementUpdated},{type:t.ATTRIBUTE,name:"createElement",evaluate:e=>e.onXemaElementUpdated},{type:t.ATTRIBUTE,name:"selectElementOrAttribute",evaluate:e=>e.selectElementOrAttribute},{type:t.ATTRIBUTE,name:"deleteElement",evaluate:e=>e.onXemaElementDeleted}]}])},{type:a.IF,evaluate:e=>e.state.currentElement&&e.state.currentAttribute,redundantAttribute:"expr1430",selector:"[expr1430]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"dict-config-xema-attribute",slots:[],attributes:[{type:t.ATTRIBUTE,name:"elementId",evaluate:e=>e.state.currentElement},{type:t.ATTRIBUTE,name:"attributeId",evaluate:e=>e.state.currentAttribute},{type:t.ATTRIBUTE,name:"xema",evaluate:e=>e.state.xema},{type:t.ATTRIBUTE,name:"config",evaluate:e=>e.state.xema.elements[e.state.currentElement].attributes[e.state.currentAttribute]},{type:t.ATTRIBUTE,name:"applyLocalData",evaluate:e=>e.onXemaAttributeUpdated},{type:t.ATTRIBUTE,name:"renameAttribute",evaluate:e=>e.onXemaAttributeRenamed}]}])}])},{type:a.IF,evaluate:e=>e.state.override,redundantAttribute:"expr1431",selector:"[expr1431]",template:e('<div class="row"><div class="col s10"><p>To specify your custom Lexonomy schema use either <i>Xonomy Document Specification</i>, or <i>DTD</i>.</p><h3>Xonomy Document Specification</h3><p>A <a href="http://www.lexiconista.com/xonomy/" target="_blank">Xonomy Document Specification</a> is a JavaScript object which configures the Xonomy XML editor used in Lexonomy.</p></div></div><div class="row"><div class="input-field col s10"><textarea expr1432="expr1432" id="editor_doc" class="materialize-textarea" placeholder> </textarea><label for="editor_doc">Document specification</label><span class="helper-text">Xonomy Document Specification. If you would like to see an example, <a expr1433="expr1433">click here to load a sample specification</a>.</span></div></div><div class="row"><div class="input-field col s10"><textarea expr1434="expr1434" id="editor_xml" class="materialize-textarea" placeholder> </textarea><label for="editor_xml">Template for new entries</label><span class="helper-text">XML template for newly created entries. If you would like to see an example, <a expr1435="expr1435">click here to load a sample XML template</a>.</span></div></div><div class="row"><div class="col s10"><h3>DTD (Document Type Defition)</h3><p><a href="https://en.wikipedia.org/wiki/Document_type_definition" target="_blank">Document Type Definitions</a> are a popular formalism for defining the structure of XML documents.</p></div></div><div class="row"><div class="input-field col s10"><textarea expr1436="expr1436" id="editor_dtd" class="materialize-textarea" placeholder> </textarea><label for="editor_dtd">Your DTD</label><span class="helper-text">If you would like to see an example, <a expr1437="expr1437">click here to load a sample DTD</a>.</span></div></div>',[{redundantAttribute:"expr1432",selector:"[expr1432]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.xema._xonomyDocSpec||""}]},{redundantAttribute:"expr1433",selector:"[expr1433]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.exampleDoc}]},{redundantAttribute:"expr1434",selector:"[expr1434]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.xema._css||""}]},{redundantAttribute:"expr1435",selector:"[expr1435]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.exampleXML}]},{redundantAttribute:"expr1436",selector:"[expr1436]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.xema._dtd||""}]},{redundantAttribute:"expr1437",selector:"[expr1437]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.exampleDTD}]}])},{redundantAttribute:"expr1438",selector:"[expr1438]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.state.override?"Stop using your own schema":"Use your own schema"].join("")},{type:t.EVENT,name:"onclick",evaluate:e=>e.toggleOverride}]},{type:a.TAG,getComponent:n,evaluate:e=>"dict-config-buttons",slots:[],attributes:[{type:t.ATTRIBUTE,name:"save-data",evaluate:e=>e.saveData}],redundantAttribute:"expr1439",selector:"[expr1439]"}])}]),name:"dict-config-xema"},_t={css:null,exports:{onBeforeMount(){this.resetIfSelectedElementChanged()},onBeforeUpdate(e,t){this.resetIfSelectedElementChanged()},resetIfSelectedElementChanged(e){if(e||this.props.elementId&&(this.props.elementId!==this.state.elementId||!this.state.config.elementName)){this.state.elementId=this.props.elementId,this.state.config=JSON.parse(JSON.stringify({...this.props.config})),this.state.config.elementName=this.state.config.elementName||this.props.elementId,this.state.isAddingAttribute=!1,this.state.newAttributeName="",this.state.isAddingValue=!1,this.state.newValue="",this.state.newCaption="";const r=Object.entries(this.props.xema.elements).map(([e,t])=>({...t,id:e,elementName:t.elementName||e}));this.state.computedChildren=this.state.config.children.map(({name:e})=>{const t=e,a=this.props.xema.elements[e].elementName||t;var e=r.some(e=>e.children.some(e=>e.name===t)&&e.id!==this.props.elementId),n=r.filter(e=>e.elementName===a&&e.id!==t).map(t=>{var e=r.find(e=>e.children.some(e=>e.name===t.id));return{...t,parentElementName:e?e.elementName:"[no parent]"}}),i=0<n.length;return{id:t,elementName:a,isUsedElsewhere:e,hasNameSiblings:i,nameSiblings:n}})}},updateLocalData(e){var t=e.target.getAttribute("data-path");this._setOrGetPath(this.state,t),this._setOrGetPath(this.state,t,e.target.value),e.target.hasAttribute("data-apply")||13===e.keyCode?this.applyLocalData():this.update()},deleteLocalData(e){var t=e.target.getAttribute("data-path");this._deletePath(this.state,t),e.target.hasAttribute("data-apply")?this.applyLocalData():this.update()},resetLocalData(e){e=e.target.getAttribute("data-path");this._setOrGetPath(this.state,e,this._setOrGetPath(this.props,e)),this.update()},applyLocalData(e){const t=JSON.parse(JSON.stringify(this.state.config));this.isValidXmlName(t.elementName)||(t.elementName=this.props.config.elementName||this.props.elementId),this.props.applyLocalData(this.props.elementId,t)},beginNewAttribute(e){this.state.isAddingAttribute=!0,this.update()},cancelNewAttribute(e){this.state.isAddingAttribute=!1,this.update()},saveNewAttribute(e){!this.state.config.attributes[this.state.newAttributeName]&&this.state.newAttributeName&&this.isValidXmlName(this.state.newAttributeName)&&(this.state.config.attributes[this.state.newAttributeName]={optionality:"optional",filling:"txt",values:[]},this.state.newAttributeName="",this.state.isAddingAttribute=!1,this.applyLocalData(),this.update())},beginNewElement(e){this.state.isAddingElement=!0,this.update()},cancelNewElement(e){this.state.isAddingElement=!1,this.update()},saveNewElement(e){var t;this.isValidXmlName(this.state.newElementName)&&(t=this.state.newElementName,this.props.xema.elements[t]||this.props.createElement(newId,{elementName:this.state.newElementName,filling:"emp",children:[],values:[],attributes:{}}),this.state.newElementName="",this.state.isAddingElement=!1,this.state.config.children.push({name:t}),this.applyLocalData())},makeUnique(e){const t=e.target.getAttribute("data-name"),a=JSON.parse(JSON.stringify(this.props.xema.elements[t]));a.elementName=a.elementName||t;let n=0,i=t+n;for(;this.props.xema.elements[i];)i=t+ ++n;this.props.createElement(i,a),this.state.config.children.forEach(e=>{e.name==t&&(e.name=i)}),this.applyLocalData(),this.resetIfSelectedElementChanged(!0),this.update()},replaceWithNameSibling(e){const a=e.target.getAttribute("data-name"),t=this.$(`select[data-name="${a}"]`).value;t&&(e=Object.entries(this.props.xema.elements).some(([e,t])=>e!==this.props.elementId&&t.children.some(e=>e.name===a)),this.state.config.children.forEach(e=>{e.name===a&&(e.name=t)}),this.applyLocalData(),e||this.props.deleteElement(a),this.resetIfSelectedElementChanged(!0),this.update())},beginNewValue(e){this.state.isAddingValue=!0,this.update()},cancelNewValue(e){this.state.isAddingValue=!1,this.state.newValue="",this.state.newCaption="",this.state.newValueError="",this.update()},saveNewValue(e){e&&e.preventDefault();const t=this.state.newValue;this.state.newCaption,this.state.config.values.find(e=>e.value===t)?this.state.newValueError=`Value ${t} already exists`:(this.state.config.values.push({value:this.state.newValue,caption:this.state.newCaption}),this.state.newValueError="",this.state.newValue="",this.state.newCaption="",this.applyLocalData())},_setOrGetPath(){const[e,t]=arguments;let a=void 0,n=!1;2<arguments.length&&(a=arguments[2],n=!0);const i=t.split(/[\.\[\]\'\"]/).filter(e=>e);var r=n?i.pop():void 0;const s=i.reduce((e,t)=>e?e[t]:void 0,e);return n?s[r]=JSON.parse(JSON.stringify(a)):s},_deletePath(e,t){const a=t.split(/[\.\[\]\'\"]/).filter(e=>e);t=a.pop();const n=a.reduce((e,t)=>e?e[t]:void 0,e);Array.isArray(n)?n.splice(t,1):delete n[t]},selectAttribute(e){this.props.selectElementOrAttribute(this.props.elementId,e.currentTarget.getAttribute("data-name"))},selectElement(e){this.props.selectElementOrAttribute(e.currentTarget.getAttribute("data-name"),void 0)},isValidXmlName(e){if(!e)return!1;if(/[=\s\"\']/.test(e))return!1;try{$.parseXML("<"+e+"/>")}catch(e){return!1}return!0}},template:(e,t,a,n)=>e('<div class="block"><div class="title">Element</div><input expr1771="expr1771" class="textbox tech elName" data-path="config.elementName"/><template expr1772="expr1772"></template></div><div class="block"><div class="title tight">Attributes</div><table><tr expr1776="expr1776"></tr></table><button expr1782="expr1782" class="butAtNewOpener iconAdd"></button><template expr1783="expr1783"></template></div><div class="block"><div class="title">Content</div><label class="radio"><input expr1790="expr1790" type="radio" name="filling" value="chd" data-apply data-path="config.filling"/>Child elements</label><label class="radio"><input expr1791="expr1791" type="radio" name="filling" value="txt" data-apply data-path="config.filling"/>Text</label><label class="radio"><input expr1792="expr1792" type="radio" name="filling" value="inl" data-apply data-path="config.filling"/>Text with markup</label><label class="radio"><input expr1793="expr1793" type="radio" name="filling" value="lst" data-apply data-path="config.filling"/>Value from list</label><label class="radio"><input expr1794="expr1794" type="radio" name="filling" value="emp" data-apply data-path="config.filling"/>Empty</label><label class="radio"><input expr1795="expr1795" type="radio" name="filling" value="med" data-apply data-path="config.filling"/>Media</label></div><div expr1796="expr1796" class="block"></div><div expr1813="expr1813" class="block"></div>',[{redundantAttribute:"expr1771",selector:"[expr1771]",expressions:[{type:t.VALUE,evaluate:e=>e.state.config.elementName},{type:t.EVENT,name:"onkeypress",evaluate:e=>e.updateLocalData}]},{type:a.IF,evaluate:e=>e.state.config.elementName!==(e.props.config.elementName||e.props.elementId),redundantAttribute:"expr1772",selector:"[expr1772]",template:e('<button expr1773="expr1773" type="button" class="butRename iconAccept"></button><button expr1774="expr1774" type="button" class="butRenameCancel iconCancel" data-path="config.elementName">\n                Cancel renaming\n            </button><div expr1775="expr1775" class="warn"></div>',[{type:a.IF,evaluate:e=>e.isValidXmlName(e.state.config.elementName),redundantAttribute:"expr1773",selector:"[expr1773]",template:e("\n                Rename\n            ",[{expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.applyLocalData}]}])},{redundantAttribute:"expr1774",selector:"[expr1774]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.resetLocalData}]},{type:a.IF,evaluate:e=>!e.isValidXmlName(e.state.config.elementName),redundantAttribute:"expr1775",selector:"[expr1775]",template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.state.config.elementName," is not a valid element name"].join("")}]}])}])},{type:a.EACH,getKey:null,condition:null,template:e('<td expr1777="expr1777" class="cell1"><span class="tech"><span class="ats">@</span><span expr1778="expr1778" class="att"> </span></span></td><td class="cell2"><span><label class="radio"><input expr1779="expr1779" type="radio" value="optional" data-apply/>optional</label><label class="radio"><input expr1780="expr1780" type="radio" value="obligatory" data-apply/>obligatory</label></span></td><td class="cell9"><button expr1781="expr1781" class="iconOnly iconCross" data-apply>&nbsp;</button></td>',[{redundantAttribute:"expr1777",selector:"[expr1777]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.selectAttribute},{type:t.ATTRIBUTE,name:"data-name",evaluate:e=>e.att[0]}]},{redundantAttribute:"expr1778",selector:"[expr1778]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.att[0]}]},{redundantAttribute:"expr1779",selector:"[expr1779]",expressions:[{type:t.ATTRIBUTE,name:"name",evaluate:e=>`optionality[${e.att[0]}]`},{type:t.ATTRIBUTE,name:"checked",evaluate:e=>"optional"===e.att[1].optionality},{type:t.EVENT,name:"onchange",evaluate:e=>e.updateLocalData},{type:t.ATTRIBUTE,name:"data-path",evaluate:e=>`config.attributes.${e.att[0]}.optionality`}]},{redundantAttribute:"expr1780",selector:"[expr1780]",expressions:[{type:t.ATTRIBUTE,name:"name",evaluate:e=>`optionality[${e.att[0]}]`},{type:t.ATTRIBUTE,name:"checked",evaluate:e=>"obligatory"===e.att[1].optionality},{type:t.EVENT,name:"onchange",evaluate:e=>e.updateLocalData},{type:t.ATTRIBUTE,name:"data-path",evaluate:e=>`config.attributes.${e.att[0]}.optionality`}]},{redundantAttribute:"expr1781",selector:"[expr1781]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.deleteLocalData},{type:t.ATTRIBUTE,name:"data-path",evaluate:e=>"config.attributes."+e.att[0]}]}]),redundantAttribute:"expr1776",selector:"[expr1776]",itemName:"att",indexName:null,evaluate:e=>Object.entries(e.state.config.attributes).sort((e,t)=>e[0].localeCompare(t[0]))},{type:a.IF,evaluate:e=>!e.state.isAddingAttribute,redundantAttribute:"expr1782",selector:"[expr1782]",template:e("\n            Add...\n        ",[{expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.beginNewAttribute}]}])},{type:a.IF,evaluate:e=>e.state.isAddingAttribute,redundantAttribute:"expr1783",selector:"[expr1783]",template:e('<form expr1784="expr1784"><input expr1785="expr1785" class="textbox tech atName txtAtNew" data-path="newAttributeName" autofocus/><button expr1786="expr1786" class="butAtNew iconAccept"></button><button expr1787="expr1787" class="butAtNewCancel iconCancel">Cancel</button></form><div expr1788="expr1788" class="warn errInvalidAtName"></div><div expr1789="expr1789" class="warn errAtNameExists"></div>',[{redundantAttribute:"expr1784",selector:"[expr1784]",expressions:[{type:t.EVENT,name:"onsubmit",evaluate:e=>e.saveNewAttribute}]},{redundantAttribute:"expr1785",selector:"[expr1785]",expressions:[{type:t.EVENT,name:"oninput",evaluate:e=>e.updateLocalData}]},{type:a.IF,evaluate:e=>e.state.newAttributeName&&e.isValidXmlName(e.state.newAttributeName),redundantAttribute:"expr1786",selector:"[expr1786]",template:e("Add",[{expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.saveNewAttribute}]}])},{redundantAttribute:"expr1787",selector:"[expr1787]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.cancelNewAttribute}]},{type:a.IF,evaluate:e=>!e.isValidXmlName(e.state.newAttributeName),redundantAttribute:"expr1788",selector:"[expr1788]",template:e("Cannot add, not a valid XML name.",[])},{type:a.IF,evaluate:e=>e.state.config.attributes[e.state.newAttributeName],redundantAttribute:"expr1789",selector:"[expr1789]",template:e("Cannot add, such attribute already exists.",[])}])},{redundantAttribute:"expr1790",selector:"[expr1790]",expressions:[{type:t.EVENT,name:"onchange",evaluate:e=>e.updateLocalData},{type:t.ATTRIBUTE,name:"checked",evaluate:e=>"chd"===e.state.config.filling}]},{redundantAttribute:"expr1791",selector:"[expr1791]",expressions:[{type:t.EVENT,name:"onchange",evaluate:e=>e.updateLocalData},{type:t.ATTRIBUTE,name:"checked",evaluate:e=>"txt"===e.state.config.filling}]},{redundantAttribute:"expr1792",selector:"[expr1792]",expressions:[{type:t.EVENT,name:"onchange",evaluate:e=>e.updateLocalData},{type:t.ATTRIBUTE,name:"checked",evaluate:e=>"inl"===e.state.config.filling}]},{redundantAttribute:"expr1793",selector:"[expr1793]",expressions:[{type:t.EVENT,name:"onchange",evaluate:e=>e.updateLocalData},{type:t.ATTRIBUTE,name:"checked",evaluate:e=>"lst"===e.state.config.filling}]},{redundantAttribute:"expr1794",selector:"[expr1794]",expressions:[{type:t.EVENT,name:"onchange",evaluate:e=>e.updateLocalData},{type:t.ATTRIBUTE,name:"checked",evaluate:e=>"emp"===e.state.config.filling}]},{redundantAttribute:"expr1795",selector:"[expr1795]",expressions:[{type:t.EVENT,name:"onchange",evaluate:e=>e.updateLocalData},{type:t.ATTRIBUTE,name:"checked",evaluate:e=>"med"===e.state.config.filling}]},{type:a.IF,evaluate:e=>"lst"===e.state.config.filling,redundantAttribute:"expr1796",selector:"[expr1796]",template:e('<div class="title">Values</div><table><tr expr1797="expr1797"></tr></table><template expr1805="expr1805"></template><form expr1807="expr1807" style="white-space: nowrap;"></form>',[{type:a.EACH,getKey:null,condition:null,template:e('<td class="cell1"><form expr1798="expr1798" style="white-space: nowrap;"><input expr1799="expr1799" class="textbox val" placeholder="value"/><input expr1800="expr1800" class="textbox cap" placeholder="caption"/><template expr1801="expr1801"></template></form></td><td class="cell9"><button expr1804="expr1804" class="iconOnly iconCross" data-apply>&nbsp;</button></td>',[{redundantAttribute:"expr1798",selector:"[expr1798]",expressions:[{type:t.EVENT,name:"onsubmit",evaluate:e=>e.applyLocalData}]},{redundantAttribute:"expr1799",selector:"[expr1799]",expressions:[{type:t.VALUE,evaluate:e=>e.value.value},{type:t.EVENT,name:"oninput",evaluate:e=>e.updateLocalData},{type:t.ATTRIBUTE,name:"data-path",evaluate:e=>["config.values[",e.index,"].value"].join("")}]},{redundantAttribute:"expr1800",selector:"[expr1800]",expressions:[{type:t.VALUE,evaluate:e=>e.value.caption},{type:t.EVENT,name:"oninput",evaluate:e=>e.updateLocalData},{type:t.ATTRIBUTE,name:"data-path",evaluate:e=>["config.values[",e.index,"].caption"].join("")}]},{type:a.IF,evaluate:e=>e.value.value!==e.props.config.values[e.index].value||e.value.caption!==e.props.config.values[e.index].caption,redundantAttribute:"expr1801",selector:"[expr1801]",template:e('<button expr1802="expr1802" class="change iconAccept" type="submit">Change</button><button expr1803="expr1803" class="cancel iconCancel" type="button">Cancel</button>',[{redundantAttribute:"expr1802",selector:"[expr1802]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.applyLocalData}]},{redundantAttribute:"expr1803",selector:"[expr1803]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.resetLocalData},{type:t.ATTRIBUTE,name:"data-path",evaluate:e=>["config.values[",e.index,"]"].join("")}]}])},{redundantAttribute:"expr1804",selector:"[expr1804]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.deleteLocalData},{type:t.ATTRIBUTE,name:"data-path",evaluate:e=>["config.values[",e.index,"]"].join("")}]}]),redundantAttribute:"expr1797",selector:"[expr1797]",itemName:"value",indexName:"index",evaluate:e=>e.state.config.values},{type:a.IF,evaluate:e=>!e.state.isAddingValue,redundantAttribute:"expr1805",selector:"[expr1805]",template:e('<button expr1806="expr1806" class="butNewValue iconAdd">Add...</button>',[{redundantAttribute:"expr1806",selector:"[expr1806]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.beginNewValue}]}])},{type:a.IF,evaluate:e=>e.state.isAddingValue,redundantAttribute:"expr1807",selector:"[expr1807]",template:e('<input expr1808="expr1808" class="textbox new val" data-path="newValue" placeholder="value" autofocus/><input expr1809="expr1809" class="textbox new cap" data-path="newCaption" placeholder="caption"/><button expr1810="expr1810" class="butNewValueOK iconAccept"></button><button expr1811="expr1811" class="butNewValueCancel iconCancel" type="button">Cancel</button><div expr1812="expr1812" class="warn"></div>',[{expressions:[{type:t.EVENT,name:"onsubmit",evaluate:e=>e.saveNewValue}]},{redundantAttribute:"expr1808",selector:"[expr1808]",expressions:[{type:t.VALUE,evaluate:e=>e.state.newValue},{type:t.EVENT,name:"oninput",evaluate:e=>e.updateLocalData}]},{redundantAttribute:"expr1809",selector:"[expr1809]",expressions:[{type:t.VALUE,evaluate:e=>e.state.newCaption},{type:t.EVENT,name:"oninput",evaluate:e=>e.updateLocalData}]},{type:a.IF,evaluate:e=>e.state.newValue,redundantAttribute:"expr1810",selector:"[expr1810]",template:e("Add",[])},{redundantAttribute:"expr1811",selector:"[expr1811]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.cancelNewValue}]},{type:a.IF,evaluate:e=>e.state.newValueError,redundantAttribute:"expr1812",selector:"[expr1812]",template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.newValueError}]}])}])}])},{type:a.IF,evaluate:e=>"inl"===e.state.config.filling||"chd"===e.state.config.filling,redundantAttribute:"expr1813",selector:"[expr1813]",template:e('<div class="title tight">Child elements</div><table expr1814="expr1814"></table><button expr1826="expr1826" class="butElNewOpener iconAdd"></button><template expr1827="expr1827"></template>',[{type:a.IF,evaluate:e=>e.state.config.children.length,redundantAttribute:"expr1814",selector:"[expr1814]",template:e('<tr expr1815="expr1815"></tr>',[{type:a.EACH,getKey:null,condition:null,template:e('<td expr1816="expr1816" class="cell1"><span class="tech"><span class="brak">&lt;</span><span expr1817="expr1817" class="elm"> </span><span class="brak">&gt;</span></span></td><td class="cell2" style="white-space: nowrap;"><label>min <input expr1818="expr1818" class="textbox min" type="number" data-apply/></label><label>max <input expr1819="expr1819" class="textbox max" type="number" data-apply/></label></td><td class="cell9"><button expr1820="expr1820" class="iconOnly iconCross" data-apply>&nbsp;</button></td><td><div><button expr1821="expr1821"></button><template expr1822="expr1822"></template></div></td>',[{redundantAttribute:"expr1816",selector:"[expr1816]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.selectElement},{type:t.ATTRIBUTE,name:"data-name",evaluate:e=>e.child.id}]},{redundantAttribute:"expr1817",selector:"[expr1817]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.child.elementName}]},{redundantAttribute:"expr1818",selector:"[expr1818]",expressions:[{type:t.VALUE,evaluate:e=>e.child.min},{type:t.EVENT,name:"onchange",evaluate:e=>e.updateLocalData},{type:t.ATTRIBUTE,name:"data-path",evaluate:e=>`config.children[${e.index}].min`}]},{redundantAttribute:"expr1819",selector:"[expr1819]",expressions:[{type:t.VALUE,evaluate:e=>e.child.max},{type:t.EVENT,name:"onchange",evaluate:e=>e.updateLocalData},{type:t.ATTRIBUTE,name:"data-path",evaluate:e=>`config.children[${e.index}].max`}]},{redundantAttribute:"expr1820",selector:"[expr1820]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.deleteLocalData},{type:t.ATTRIBUTE,name:"data-path",evaluate:e=>`config.children[${e.index}]`}]},{type:a.IF,evaluate:e=>e.child.isUsedElsewhere,redundantAttribute:"expr1821",selector:"[expr1821]",template:e("make&nbsp;unique",[{expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.makeUnique},{type:t.ATTRIBUTE,name:"data-name",evaluate:e=>e.child.id}]}])},{type:a.IF,evaluate:e=>e.child.hasNameSiblings,redundantAttribute:"expr1822",selector:"[expr1822]",template:e(' <select expr1823="expr1823"><option expr1824="expr1824"></option></select><button expr1825="expr1825">use instead</button>',[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>["Element ",e.child.elementName," has different configurations:"].join("")}]},{redundantAttribute:"expr1823",selector:"[expr1823]",expressions:[{type:t.ATTRIBUTE,name:"data-name",evaluate:e=>e.child.id}]},{type:a.EACH,getKey:null,condition:null,template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.sibling.parentElementName,"/",e.sibling.elementName].join("")},{type:t.ATTRIBUTE,name:"value",evaluate:e=>e.sibling.id}]}]),redundantAttribute:"expr1824",selector:"[expr1824]",itemName:"sibling",indexName:null,evaluate:e=>e.child.nameSiblings},{redundantAttribute:"expr1825",selector:"[expr1825]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.replaceWithNameSibling},{type:t.ATTRIBUTE,name:"data-name",evaluate:e=>e.child.id}]}])}]),redundantAttribute:"expr1815",selector:"[expr1815]",itemName:"child",indexName:"index",evaluate:e=>e.state.computedChildren}])},{type:a.IF,evaluate:e=>!e.state.isAddingElement,redundantAttribute:"expr1826",selector:"[expr1826]",template:e("Add...",[{expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.beginNewElement}]}])},{type:a.IF,evaluate:e=>e.state.isAddingElement,redundantAttribute:"expr1827",selector:"[expr1827]",template:e('<input expr1828="expr1828" class="textbox tech elName txtElNew" data-path="newElementName"/><button expr1829="expr1829" class="butElNew iconAccept"></button><button expr1830="expr1830" class="butElNewCancel iconCancel">Cancel</button><div expr1831="expr1831" class="warn errInvalidElName"></div>',[{redundantAttribute:"expr1828",selector:"[expr1828]",expressions:[{type:t.VALUE,evaluate:e=>e.state.newElementName},{type:t.EVENT,name:"oninput",evaluate:e=>e.updateLocalData}]},{type:a.IF,evaluate:e=>e.state.newElementName&&e.isValidXmlName(e.state.newElementName),redundantAttribute:"expr1829",selector:"[expr1829]",template:e("Add",[{expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.saveNewElement}]}])},{redundantAttribute:"expr1830",selector:"[expr1830]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.cancelNewElement}]},{type:a.IF,evaluate:e=>e.state.newElementName&&!e.isValidXmlName(e.state.newElementName),redundantAttribute:"expr1831",selector:"[expr1831]",template:e("Cannot add, not a valid XML name.",[])}])}])}]),name:"dict-config-xema-element"},Xt={css:"dict-config-xema-attribute { display: block; }",exports:{onBeforeMount(){this.resetIfSelectedElementChanged()},onBeforeUpdate(e,t){this.resetIfSelectedElementChanged()},resetIfSelectedElementChanged(e){!e&&this.props.elementId===this.state.elementId&&this.props.attributeId===this.state.attributeId||(this.state.elementId=this.props.elementId,this.state.attributeId=this.props.attributeId,this.state.config=JSON.parse(JSON.stringify({...this.props.config})),this.state.newAttributeId=this.state.attributeId,this.state.isAddingValue=!1,this.state.newValue="",this.state.newCaption="")},updateLocalData(e){var t=e.target.getAttribute("data-path");this._setOrGetPath(this.state,t),this._setOrGetPath(this.state,t,e.target.value),e.target.hasAttribute("data-apply")||13===e.keyCode?this.applyLocalData():this.update()},deleteLocalData(e){var t=e.target.getAttribute("data-path");this._deletePath(this.state,t),e.target.hasAttribute("data-apply")?this.applyLocalData():this.update()},resetLocalData(e){e=e.target.getAttribute("data-path");this._setOrGetPath(this.state,e,this._setOrGetPath(this.props,e)),this.update()},applyLocalData(e){var t=JSON.parse(JSON.stringify(this.state.config));this.props.applyLocalData(t)},saveNewId(e){var t=this.props.xema.elements[this.props.elementId];this.state.newAttributeId===this.props.newAttributeId||t.attributes[this.state.newAttributeId]||this.isValidXmlName(this.state.newAttributeId)&&this.props.renameAttribute(this.state.newAttributeId)},beginNewValue(e){this.state.isAddingValue=!0,this.update()},cancelNewValue(e){this.state.isAddingValue=!1,this.state.newValue="",this.state.newCaption="",this.update()},saveNewValue(e){this.state.config.values.push({value:this.state.newValue,caption:this.state.newCaption}),this.state.newValue="",this.state.newCaption="",this.applyLocalData()},_setOrGetPath(){const[e,t]=arguments;let a=void 0,n=!1;2<arguments.length&&(a=arguments[2],n=!0);const i=t.split(/[\.\[\]\'\"]/).filter(e=>e);var r=n?i.pop():void 0;const s=i.reduce((e,t)=>e?e[t]:void 0,e);return n?s[r]=JSON.parse(JSON.stringify(a)):s},_deletePath(e,t){const a=t.split(/[\.\[\]\'\"]/).filter(e=>e);t=a.pop();const n=a.reduce((e,t)=>e?e[t]:void 0,e);Array.isArray(n)?n.splice(t,1):delete n[t]},isValidXmlName(e){if(!e)return!1;if(/[=\s\"\']/.test(e))return!1;try{$.parseXML("<"+e+"/>")}catch(e){return!1}return!0}},template:(e,t,a,n)=>e('<div class="block"><div class="title">Attribute</div><form expr1748="expr1748"><input expr1749="expr1749" class="textbox tech atName" data-path="newAttributeId"/><button expr1750="expr1750" class="butRename iconAccept" type="submit"></button><div expr1751="expr1751" class="warn errInvalidAtName"></div><div expr1752="expr1752" class="warn errAtNameExists"></div></form></div><div class="block"><div class="title">Content</div><label class="radio"><input expr1753="expr1753" type="radio" name="filling" value="txt" data-path="config.filling" data-apply/>Text</label><label class="radio"><input expr1754="expr1754" type="radio" name="filling" value="lst" data-path="config.filling" data-apply/>Value from list</label></div><div expr1755="expr1755" class="block"></div>',[{expressions:[{type:t.ATTRIBUTE,name:"class",evaluate:e=>"details"}]},{redundantAttribute:"expr1748",selector:"[expr1748]",expressions:[{type:t.EVENT,name:"onsubmit",evaluate:e=>e.saveNewId}]},{redundantAttribute:"expr1749",selector:"[expr1749]",expressions:[{type:t.VALUE,evaluate:e=>e.state.newAttributeId},{type:t.EVENT,name:"oninput",evaluate:e=>e.updateLocalData}]},{type:a.IF,evaluate:e=>e.props.attributeId!==e.state.newAttributeId&&e.isValidXmlName(e.state.newAttributeId)&&null==e.props.xema.elements[e.props.elementId].attributes[e.state.newAttributeId],redundantAttribute:"expr1750",selector:"[expr1750]",template:e("Rename",[{expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.saveNewId}]}])},{type:a.IF,evaluate:e=>!e.isValidXmlName(e.state.newAttributeId),redundantAttribute:"expr1751",selector:"[expr1751]",template:e("Cannot rename, not a valid XML name.",[])},{type:a.IF,evaluate:e=>e.state.newAttributeId!=e.props.attributeId&&e.props.xema.elements[e.props.elementId].attributes[e.state.newAttributeId],redundantAttribute:"expr1752",selector:"[expr1752]",template:e("Cannot rename, such attribute already exists.",[])},{redundantAttribute:"expr1753",selector:"[expr1753]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.updateLocalData},{type:t.ATTRIBUTE,name:"checked",evaluate:e=>"txt"===e.state.config.filling}]},{redundantAttribute:"expr1754",selector:"[expr1754]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.updateLocalData},{type:t.ATTRIBUTE,name:"checked",evaluate:e=>"lst"===e.state.config.filling}]},{type:a.IF,evaluate:e=>"lst"===e.state.config.filling,redundantAttribute:"expr1755",selector:"[expr1755]",template:e('<div class="title">Values</div><table><tr expr1756="expr1756"></tr></table><template expr1764="expr1764"></template><form expr1766="expr1766" style="white-space: nowrap;"></form>',[{type:a.EACH,getKey:null,condition:null,template:e('<td class="cell1"><form expr1757="expr1757" style="white-space: nowrap;"><input expr1758="expr1758" class="textbox val" placeholder="value"/><input expr1759="expr1759" class="textbox cap" placeholder="caption"/><template expr1760="expr1760"></template></form></td><td class="cell9"><button expr1763="expr1763" class="iconOnly iconCross" data-apply>&nbsp;</button></td>',[{redundantAttribute:"expr1757",selector:"[expr1757]",expressions:[{type:t.EVENT,name:"onsubmit",evaluate:e=>e.applyLocalData}]},{redundantAttribute:"expr1758",selector:"[expr1758]",expressions:[{type:t.VALUE,evaluate:e=>e.value.value},{type:t.EVENT,name:"oninput",evaluate:e=>e.updateLocalData},{type:t.ATTRIBUTE,name:"data-path",evaluate:e=>["config.values[",e.index,"].value"].join("")}]},{redundantAttribute:"expr1759",selector:"[expr1759]",expressions:[{type:t.VALUE,evaluate:e=>e.value.caption},{type:t.EVENT,name:"oninput",evaluate:e=>e.updateLocalData},{type:t.ATTRIBUTE,name:"data-path",evaluate:e=>["config.values[",e.index,"].caption"].join("")}]},{type:a.IF,evaluate:e=>e.value.value!==e.props.config.values[e.index].value||e.value.caption!==e.props.config.values[e.index].caption,redundantAttribute:"expr1760",selector:"[expr1760]",template:e('<button expr1761="expr1761" class="change iconAccept" type="submit">Change</button><button expr1762="expr1762" class="cancel iconCancel" type="button">Cancel</button>',[{redundantAttribute:"expr1761",selector:"[expr1761]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.applyLocalData}]},{redundantAttribute:"expr1762",selector:"[expr1762]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.resetLocalData},{type:t.ATTRIBUTE,name:"data-path",evaluate:e=>["config.values[",e.index,"]"].join("")}]}])},{redundantAttribute:"expr1763",selector:"[expr1763]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.deleteLocalData},{type:t.ATTRIBUTE,name:"data-path",evaluate:e=>["config.values[",e.index,"]"].join("")}]}]),redundantAttribute:"expr1756",selector:"[expr1756]",itemName:"value",indexName:"index",evaluate:e=>e.state.config.values},{type:a.IF,evaluate:e=>!e.state.isAddingValue,redundantAttribute:"expr1764",selector:"[expr1764]",template:e('<button expr1765="expr1765" class="butNewValue iconAdd">Add...</button>',[{redundantAttribute:"expr1765",selector:"[expr1765]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.beginNewValue}]}])},{type:a.IF,evaluate:e=>e.state.isAddingValue,redundantAttribute:"expr1766",selector:"[expr1766]",template:e('<input expr1767="expr1767" class="textbox new val" data-path="newValue" placeholder="value" autofocus/><input expr1768="expr1768" class="textbox new cap" data-path="newCaption" placeholder="caption"/><button expr1769="expr1769" class="butNewValueOK iconAccept"></button><button expr1770="expr1770" class="butNewValueCancel iconCancel" type="button">Cancel</button>',[{expressions:[{type:t.EVENT,name:"onsubmit",evaluate:e=>e.saveNewValue}]},{redundantAttribute:"expr1767",selector:"[expr1767]",expressions:[{type:t.VALUE,evaluate:e=>e.state.newValue},{type:t.EVENT,name:"oninput",evaluate:e=>e.updateLocalData}]},{redundantAttribute:"expr1768",selector:"[expr1768]",expressions:[{type:t.VALUE,evaluate:e=>e.state.newCaption},{type:t.EVENT,name:"oninput",evaluate:e=>e.updateLocalData}]},{type:a.IF,evaluate:e=>e.state.newValue,redundantAttribute:"expr1769",selector:"[expr1769]",template:e("Add",[])},{redundantAttribute:"expr1770",selector:"[expr1770]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.cancelNewValue}]}])}])}]),name:"dict-config-xema-attribute"},Bt={css:'dict-config-element-in-tree { position: relative; display: block; width: auto!important; } dict-config-element-in-tree:last-child:before { content: ""; display: block; position: absolute; left: -16px; bottom: 0; width: 2px; top: 16px; background: white; }',exports:{onBeforeMount(e,t){this.state.showChildren=!0,this.compute()},onMounted(e,t){},onBeforeUpdate(e,t){this.compute()},onUpdated(e,t){},onBeforeUnmount(e,t){},onUnmounted(e,t){},compute(){this.state.children=this.props.data.children.map(e=>({...this.props.xema.elements[e.name],id:e.name})),this.state.attributes=Object.entries(this.props.data.attributes).map(([e,t])=>({...t,id:e})).sort((e,t)=>e.id.localeCompare(t.id)),this.state.hasChildren=0<this.state.children.length,this.state.hasAttributes=0<this.state.attributes.length,this.state.rootClasses="container "+(this.state.showChildren?"":"collapsed ")+(this.state.hasChildren?"hasChildren ":""),this.state.classes="clickable element "+(this.props.currentElement!==this.props.data.id||this.props.currentAttribute?"":"current ")},toggleChildren(){this.state.showChildren=!this.state.showChildren,this.update()},selectElementOrAttribute(){this.props.selectElementOrAttribute(this.props.data.id,void 0)}},template:(e,t,a,n)=>e('<div class="horizontal"><span expr1417="expr1417" class="plusminus"></span></div><div expr1418="expr1418"><span class="tech"><span class="brak">&lt;</span><span expr1419="expr1419" class="elm"> </span><span class="brak">&gt;</span></span></div><div expr1420="expr1420" class="children"></div>',[{expressions:[{type:t.ATTRIBUTE,name:"class",evaluate:e=>e.state.rootClasses}]},{type:a.IF,evaluate:e=>e.state.hasChildren,redundantAttribute:"expr1417",selector:"[expr1417]",template:e(null,[{expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.toggleChildren}]}])},{redundantAttribute:"expr1418",selector:"[expr1418]",expressions:[{type:t.ATTRIBUTE,name:"class",evaluate:e=>e.state.classes},{type:t.EVENT,name:"onclick",evaluate:e=>e.selectElementOrAttribute}]},{redundantAttribute:"expr1419",selector:"[expr1419]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.props.data.elementName||e.props.data.id}]},{type:a.IF,evaluate:e=>(e.state.hasChildren||e.hasAttributes)&&e.state.showChildren,redundantAttribute:"expr1420",selector:"[expr1420]",template:e('<dict-config-attribute-in-tree expr1421="expr1421"></dict-config-attribute-in-tree><dict-config-element-in-tree expr1422="expr1422"></dict-config-element-in-tree>',[{type:a.EACH,getKey:null,condition:null,template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"dict-config-attribute-in-tree",slots:[],attributes:[{type:t.ATTRIBUTE,name:"data",evaluate:e=>e.att},{type:t.ATTRIBUTE,name:"xema",evaluate:e=>e.props.xema},{type:t.ATTRIBUTE,name:"parentElement",evaluate:e=>e.props.data},{type:t.ATTRIBUTE,name:"currentElement",evaluate:e=>e.props.currentElement},{type:t.ATTRIBUTE,name:"currentAttribute",evaluate:e=>e.props.currentAttribute},{type:t.ATTRIBUTE,name:"selectElementOrAttribute",evaluate:e=>e.props.selectElementOrAttribute}]}]),redundantAttribute:"expr1421",selector:"[expr1421]",itemName:"att",indexName:null,evaluate:e=>e.state.attributes},{type:a.EACH,getKey:null,condition:null,template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"dict-config-element-in-tree",slots:[],attributes:[{type:t.ATTRIBUTE,name:"data",evaluate:e=>e.child},{type:t.ATTRIBUTE,name:"xema",evaluate:e=>e.props.xema},{type:t.ATTRIBUTE,name:"currentElement",evaluate:e=>e.props.currentElement},{type:t.ATTRIBUTE,name:"currentAttribute",evaluate:e=>e.props.currentAttribute},{type:t.ATTRIBUTE,name:"selectElementOrAttribute",evaluate:e=>e.props.selectElementOrAttribute}]}]),redundantAttribute:"expr1422",selector:"[expr1422]",itemName:"child",indexName:null,evaluate:e=>e.state.children}])}]),name:"dict-config-element-in-tree"},Rt={css:"dict-config-attribute-in-tree { position: relative; display: inline-block; }",exports:{onBeforeMount(e,t){this.compute()},onMounted(e,t){},onBeforeUpdate(e,t){this.compute()},onUpdated(e,t){},onBeforeUnmount(e,t){},onUnmounted(e,t){},compute(){this.state.classes="clickable attribute "+(this.props.currentAttribute===this.props.data.id&&this.props.currentElement===this.props.parentElement.id?"current ":"")},selectElementOrAttribute(){this.props.selectElementOrAttribute(this.props.parentElement.id,this.props.data.id)}},template:(e,t,a,n)=>e('<div class="horizontal"></div><div expr1542="expr1542"><span class="tech"><span class="ats">@</span><span expr1543="expr1543" class="att"> </span></span></div>',[{expressions:[{type:t.ATTRIBUTE,name:"class",evaluate:e=>"container"}]},{redundantAttribute:"expr1542",selector:"[expr1542]",expressions:[{type:t.ATTRIBUTE,name:"class",evaluate:e=>e.state.classes},{type:t.EVENT,name:"onclick",evaluate:e=>e.selectElementOrAttribute}]},{redundantAttribute:"expr1543",selector:"[expr1543]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.props.data.id}]}]),name:"dict-config-attribute-in-tree"},Mt={css:'dict-config-xemplate #editor,[is="dict-config-xemplate"] #editor{ position: relative !important; min-height: 1050px; } dict-config-xemplate #editor .list,[is="dict-config-xemplate"] #editor .list{ width: 25% !important; } dict-config-xemplate #editor .details,[is="dict-config-xemplate"] #editor .details{ left: 25% !important; width: 35% !important; } dict-config-xemplate #editor .preview,[is="dict-config-xemplate"] #editor .preview{ left: 60% !important; width: 40% !important; } dict-config-xemplate #editor.designer input[type=radio],[is="dict-config-xemplate"] #editor.designer input[type=radio]{ opacity: 1 !important; }',exports:{state:{isLoading:!0,isSaving:!1,override:!1,data:{}},startOverride(){this.update({override:!0})},stopOverride(){delete this.state.data._xsl,delete this.state.data._css,this.update({override:!1}),XemplateDesigner.start(this.dictData.dictConfigs.xema,this.state.data,this.dictData.dictId)},exampleXsl(){$("#editor_xsl").val(`<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="entry">
 <div class='myEntry'><xsl:apply-templates/></div>
</xsl:template>
<xsl:template match="headword">
 <span class='myHeadword'><xsl:apply-templates/></span>
</xsl:template>
</xsl:stylesheet>
`),M.textareaAutoResize($("#editor_xsl")),M.updateTextFields()},exampleCss(){$("#editor_css").val(`div.myEntry {font-family: serif; font-size: 1.25em}
div.myEntry span.myHeadword {font-weight: bold}
`),M.textareaAutoResize($("#editor_css")),M.updateTextFields()},onMounted(){this.store.loadDictionaryConfig("xemplate").done(e=>{this.state.data=e.content,this.state.override=this.state.data._xsl||this.state.data._css}).always(()=>{this.update({isLoading:!1}),this.state.override&&(M.updateTextFields(),M.textareaAutoResize($("#editor_css")),M.textareaAutoResize($("#editor_xsl")))})},onUpdated(){this.dictData.dictConfigs.xema&&this.state.data!={}&&!this.state.override&&XemplateDesigner.start(this.dictData.dictConfigs.xema,this.state.data,this.dictData.dictId)},getConfigData(){var e={};return XemplateDesigner.xemplate&&(e=XemplateDesigner.xemplate),this.state.override&&(""!=$("#editor_css").val()&&(e._css=$("#editor_css").val()),""!=$("#editor_xsl").val()&&(e._xsl=$("#editor_xsl").val())),e},saveData(){this.update({isSaving:!0}),this.store.updateDictionaryConfig("xemplate",this.getConfigData()).always(()=>this.update({isSaving:!1}))}},template:(e,t,a,n)=>e('<loading-overlay expr1458="expr1458"></loading-overlay><dict-nav expr1459="expr1459"></dict-nav><h1>Entry formatting</h1><div expr1460="expr1460"></div><div expr1462="expr1462"></div><dict-config-buttons expr1468="expr1468"></dict-config-buttons>',[{type:a.IF,evaluate:e=>e.state.isLoading||e.state.isSaving,redundantAttribute:"expr1458",selector:"[expr1458]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"links",evaluate:e=>[["config","Configure"],["xemplate","Entry formatting"]]}],redundantAttribute:"expr1459",selector:"[expr1459]"},{type:a.IF,evaluate:e=>!(e.state.data._xsl&&""!=e.state.data._xsl||e.state.data._css&&""!=e.state.data._css||e.state.override),redundantAttribute:"expr1460",selector:"[expr1460]",template:e('<div class="row designer" id="editor"></div><div class="row"><div class="col s10"><button expr1461="expr1461" class="btn waves-effect waves-light">\n               Use your own stylesheet\n               <i class="material-icons right">edit</i></button></div></div>',[{redundantAttribute:"expr1461",selector:"[expr1461]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.startOverride}]}])},{type:a.IF,evaluate:e=>e.state.data._xsl&&""!=e.state.data._xsl||e.state.data._css&&""!=e.state.data._css||e.state.override,redundantAttribute:"expr1462",selector:"[expr1462]",template:e('<div class="row"><div class="input-field col s10"><textarea expr1463="expr1463" id="editor_xsl" class="materialize-textarea"> </textarea><label for="editor_xsl">XSL</label><span class="helper-text">Custom XSL stylesheet. If you would like to see an example,\n               <a expr1464="expr1464">click here to load a sample XSL</a>.\n            </span></div></div><div class="row"><div class="input-field col s10"><textarea expr1465="expr1465" id="editor_css" class="materialize-textarea"> </textarea><label for="editor_css">CSS</label><span class="helper-text">Custom CSS stylesheet. If you would like to see an example,\n               <a expr1466="expr1466">click here to load a sample CSS</a>.\n            </span></div></div><div class="row"><div class="col s10"><button expr1467="expr1467" class="btn waves-effect waves-light">\n               Stop using your own stylesheet\n               <i class="material-icons right">edit</i></button></div></div>',[{redundantAttribute:"expr1463",selector:"[expr1463]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.data._xsl}]},{redundantAttribute:"expr1464",selector:"[expr1464]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.exampleXsl}]},{redundantAttribute:"expr1465",selector:"[expr1465]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.data._css}]},{redundantAttribute:"expr1466",selector:"[expr1466]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.exampleCss}]},{redundantAttribute:"expr1467",selector:"[expr1467]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.stopOverride}]}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-config-buttons",slots:[],attributes:[{type:t.ATTRIBUTE,name:"save-data",evaluate:e=>e.saveData}],redundantAttribute:"expr1468",selector:"[expr1468]"}]),name:"dict-config-xemplate"},Ft={css:null,exports:{onMounted(){$(document).ready(function(){$(".noAttributes").change(function(){var e=$(".download-link").attr("href");this.checked?$(".download-link").attr("href",e+"?clean=true"):$(".download-link").attr("href",e.replace("?clean=true",""))})})}},template:(e,t,a,n)=>e('<dict-nav expr1469="expr1469"></dict-nav><h1>Download</h1><div class="input-field"><a expr1470="expr1470" class="waves-effect waves-light btn btn-primary download-link" target="_blank"><i class="material-icons left">file_download</i> </a></div><div><label><input type="checkbox" class="noAttributes" name="noAttributes"/><span>XML without Lexonomy attributes</span></label></div><small class="helper-text">\n      If you want to import the XML file back to Lexonomy, you need Lexonomy attributes.\n   </small>',[{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"links",evaluate:e=>[["download","download"]]}],redundantAttribute:"expr1469",selector:"[expr1469]"},{redundantAttribute:"expr1470",selector:"[expr1470]",expressions:[{type:t.TEXT,childNodeIndex:1,evaluate:e=>["Download ",e.dictData.dictId,".xml"].join("")},{type:t.ATTRIBUTE,name:"href",evaluate:e=>[window.API_URL,e.dictData.dictId,"/download.xml"].join("")}]}]),name:"dict-download"},jt={css:'dict-edit-entry .editorContainer,[is="dict-edit-entry"] .editorContainer{ position: relative; margin-bottom: 0; } dict-edit-entry .editorContainer #toolbar,[is="dict-edit-entry"] .editorContainer #toolbar{ box-shadow: none; border-bottom: 1px solid #d9d9d8; } dict-edit-entry .editorContainer #container,[is="dict-edit-entry"] .editorContainer #container{ z-index: 5; background-color: white; transition-delay: 1s; } dict-edit-entry .editorContainer #container #editor.laic,[is="dict-edit-entry"] .editorContainer #container #editor.laic{ padding-left: 30px; } dict-edit-entry .editorContainer #container .viewer,[is="dict-edit-entry"] .editorContainer #container .viewer{ padding: 0; } dict-edit-entry .editorContainer #history,[is="dict-edit-entry"] .editorContainer #history{ position: absolute; top: 45px; border-left: 1px solid #d9d9d8; background-color: #f2f2f2; } dict-edit-entry .xonomy div.modeSwitcher,[is="dict-edit-entry"] .xonomy div.modeSwitcher{ position: absolute; bottom: 26px; } dict-edit-entry #sourceCode,[is="dict-edit-entry"] #sourceCode{ position: absolute; top: 60px; left: 10px; right: 10px; bottom: 40px; } dict-edit-entry #sourceCode textarea,[is="dict-edit-entry"] #sourceCode textarea{ border: none; box-shadow: none; background-color: #f2f2f2; border-radius: 0; }',exports:{bindings:[["store","entryIdChanged","onEntryIdChanged"]],onEntryIdChanged(){this.initEditorIfNeeded(),this.updateUrl(),Screenful.Editor[this.dictData.mode](null,this.dictData.entryId)},initEditorIfNeeded(){if(this.dictData.dictId&&this.dictData.config&&!Screenful.Editor.editor){Screenful.Editor.createUrl=""+window.API_URL+this.dictData.dictId+"/entrycreate.json",Screenful.Editor.readUrl=""+window.API_URL+this.dictData.dictId+"/entryread.json",Screenful.Editor.updateUrl=""+window.API_URL+this.dictData.dictId+"/entryupdate.json",Screenful.Editor.deleteUrl=""+window.API_URL+this.dictData.dictId+"/entrydelete.json";var s=this.dictData.config.xema,n=this.dictData.config.xemplate,o=(kontext=this.dictData.config.kontext,kex=this.dictData.config.kex,subbing=this.dictData.config.subbing,xampl=this.dictData.config.xampl,thes=this.dictData.config.thes,collx=this.dictData.config.collx,defo=this.dictData.config.defo,titling=this.dictData.config.titling,flagging=this.dictData.config.flagging,linking=this.dictData.config.linking,editing=this.dictData.config.editing,gapi=this.dictData.config.gapi,dictId=this.dictData.dictId,userDicts=this.dictData.dictionaryList,ske_username=this.authData.ske_username,ske_apiKey=this.authData.ske_apiKey,""),l=!1;if(editing._js)try{o=new Function("return "+editing._js)(),l=o.editor&&o.harvester}catch(e){M.toast({html:"Invalid custom editor code."})}$("#editorStyle").html(editing._css?`<style>${editing._css}</style>`:""),n[s.root]||(n[s.root]={shown:!1}),"false"==n[s.root].shown&&(n[s.root].shown=!1),Screenful.Editor.viewer=null,(n._xsl||n._css||n[s.root].shown)&&(Screenful.Editor.viewer=function(e,t){var a;0==t.contentHtml.length&&(a=(new DOMParser).parseFromString(t.content,"text/xml"),t.contentHtml=Xemplatron.xml2html(a,n,s)),$(e).addClass("viewer").html(t.contentHtml),Gmedia.addVoice(t),$(e).find("a.xref").on("click",function(e){e=$(e.delegateTarget).attr("data-text");window.parent.$("#searchbox").val(e),window.parent.Screenful.Navigator.list()})}),Screenful.Editor.editor=function(e,t,a){var n,i,r;if(a=!this.dictData.userAccess.canEdit,Xonomy.lang="en",Xonomy.baseUrl=window.API_URL,newXml="",s._xonomyDocSpec?(i=s._xonomyDocSpec,s._newXml&&(newXml=s._newXml)):s._dtd?(n=parseDTD(s._dtd),i=struct2Xonomy(n),newXml=initialDocument(n)):i=Xematron.xema2docspec(s,editing.xonomyTextEditor),newXml=newXml||Xematron.xema2xml(s),i.allowModeSwitching=!0,i.onModeSwitch=function(e){Cookies.set("xonomyMode_"+this.dictData.dictId,e),window.parent.$(".doctypes").removeClass("laic"),window.parent.$(".doctypes").removeClass("nerd"),window.parent.$(".doctypes").addClass(e)}.bind(this),a||(i.allowLayby=!0,i.laybyMessage="This is your temporary lay-by for entry fragments. You can drag and drop XML elements here."),Xonomy.setMode(Cookies.get("xonomyMode_"+this.dictData.dictId)||editing.xonomyMode),Xrefs.extendDocspec(i,s),Ske.extendDocspec(i,s),Kontext.extendDocspec(i,s),Sub.extendDocspec(i,s),i.onchange=Screenful.Editor.changed,a){for(elName in i.elements)i.elements[elName].isReadOnly=!0;i.unknownElement&&"object"==typeof i.unknownElement&&(i.unknownElement.isReadOnly=!0),i.unknownElement&&"function"==typeof i.unknownElement&&(r=i.unknownElement,i.unknownElement=function(e){e=r(e);return e.isReadOnly=!0,e})}l?o.editor(e,t||{content:newXml,id:0},a):(o&&o.adjustDocSpec&&o.adjustDocSpec(i),Xonomy.render(t?t.content:newXml,e,i),Xonomy.keyNav||Xonomy.startKeyNav($("#container")[0],document.getElementById("container")),Gmedia.addVoice())}.bind(this),Screenful.Editor.harvester=function(e){return l?o.harvester(e):Xonomy.harvest()},Screenful.Editor.allowSourceCode=!0,Screenful.Editor.formatSourceCode=Screenful.formatXml,Screenful.Editor.validateSourceCode=Screenful.isWellFormedXml,Screenful.Editor.cleanupSourceCode=Screenful.cleanupXml,Screenful.History.historyUrl=window.API_URL+this.dictData.dictId+"/history.json",Screenful.History.isDeletion=e=>"delete"==e.action||"purge"==e.action,Screenful.History.getRevisionID=e=>e.revision_id,Screenful.History.printAction=function(e){var t="";return t+="<div style='white-space: nowrap'>","create"==e.action?t+="<b>Created</b>":"update"==e.action?t+="<b>Changed</b>":"delete"==e.action?t+="<b>Deleted</b>":"purge"==e.action&&(t+="<b>Bulk-deleted</b>"),e.historiography.uploadStart&&(t+=" while uploading"),e.historiography.apikey&&(t+=" through API"),e.historiography.refactoredFrom&&(t+=" as a subentry of <a href='javascript:void(null)' onclick='parent.Screenful.Editor.open(null, "+e.historiography.refactoredFrom+")'>"+e.historiography.refactoredFrom+"</a>"),t+="</div>",e.email&&(t+="<div style='white-space: nowrap'><b>By:</b> "+e.email+"</div>"),t+="<div style='white-space: nowrap'><b>When:</b> "+e.when+"</div>"},Screenful.History.fakeEntry=function(e){return{id:e.entry_id,content:e.content,contentHtml:e.contentHtml}},Screenful.Editor.onListChange=this.onListChange,Screenful.Editor.onEntryIdChange=this.onEntryIdChange,Screenful.Editor.onModeChange=this.onModeChange,Screenful.Editor.populateToolbar(),Screenful.Editor.updateToolbar(),Screenful.status(Screenful.Loc.ready),this.dictData.entryId&&Screenful.Editor[this.dictData.mode](null,this.dictData.entryId)}},onAlertCloseClick(){$(".alertmessage").hide()},onListChange(){this.store.loadEntryList()},onEntryIdChange(e){this.dictData.entryId=e,this.updateUrl()},onModeChange(e){this.dictData.mode=e,this.updateUrl()},updateUrl(){var e=`${window.location.href.split("#")[0]}#/${this.dictData.dictId}/edit/${this.dictData.doctype}/${this.dictData.entryId}/`+this.dictData.mode+url.stringifyQuery(route.query());e!=window.location.href&&history.pushState(null,null,e)},onMounted(){this.initEditorIfNeeded()},onUpdated(){this.initEditorIfNeeded()},onBeforeUnmount(){Screenful.Editor.editor=null}},template:(e,t,a,n)=>e('<div class="row editorContainer"><div class="xonomy-envelope"><div id="toolbar" class="buttons"></div><div id="container" class="empty"></div><div id="history" style="display: none"></div><div id="waiter" style="display: none"></div><div id="statusbar"><div class="alertmessage yellow"><span class="text">(ALERT)</span><span class="right clickable closeIcon"><i expr1565="expr1565" class="material-icons">close</i></span></div><span class="statusmessage"></span></div></div><div id="editorStyle"></div></div>',[{redundantAttribute:"expr1565",selector:"[expr1565]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.onAlertCloseClick}]}]),name:"dict-edit-entry"},Pt={css:`dict-edit #dictEditContainer,[is="dict-edit"] #dictEditContainer{ display: flex; } dict-edit .totalEntries,[is="dict-edit"] .totalEntries{ font-size: 0.85rem; color: #b8b8b8; margin-left: 1.3rem; text-transform: none; } dict-edit ul.select-dropdown,[is="dict-edit"] ul.select-dropdown,dict-edit ul.dropdown-content,[is="dict-edit"] ul.dropdown-content{ width: 200% !important; } dict-edit li > span,[is="dict-edit"] li > span{ white-space: nowrap; } dict-edit .resizeHandle,[is="dict-edit"] .resizeHandle{ cursor: ew-resize; width: 5px; min-height: 100%; background-color: whitesmoke; margin: 0 10px; } dict-edit .resizeHandle:hover,[is="dict-edit"] .resizeHandle:hover{ background-color: #cfcfcf; } dict-edit .entry-list,[is="dict-edit"] .entry-list{ max-height: 80vh; overflow-y: auto; } dict-edit .dictLeftCol,[is="dict-edit"] .dictLeftCol{ min-width: 200px; min-height: 50vh; position: relative; } dict-edit .dictRightCol,[is="dict-edit"] .dictRightCol{ min-width: 500px; flex: 1; } dict-edit .entriesCountInfo,[is="dict-edit"] .entriesCountInfo{ font-size: 0.85rem; color: #b8b8b8; } dict-edit .collection-item,[is="dict-edit"] .collection-item{ position: relative; display: flex; border-left: 5px solid white; padding-left: 0.2rem; } dict-edit .collection-item.selected,[is="dict-edit"] .collection-item.selected{ border-left-color: #000; } dict-edit .collection-item .headword-link,[is="dict-edit"] .collection-item .headword-link{ text-decoration: none; font-size: 1.2rem; letter-spacing: 1px; margin-right: auto; } dict-edit .collection-item .flag,[is="dict-edit"] .collection-item .flag{ cursor: pointer; } dict-edit .collection-item .flagKey,[is="dict-edit"] .collection-item .flagKey{ font-family: monospace; } dict-edit .collection-item .badge,[is="dict-edit"] .collection-item .badge{ font-weight: bold; font-size: 1rem; color: #fff; white-space: nowrap; min-width: auto; border-radius: 2px; box-shadow: 0 2px 2px 0 rgb(0 0 0 / 14%), 0 3px 1px -2px rgb(0 0 0 / 12%), 0 1px 5px 0 rgb(0 0 0 / 20%); } dict-edit .collection-item .noFlag,[is="dict-edit"] .collection-item .noFlag{ font-size: 1rem; color: grey; } dict-edit .collection-item.saving::before,[is="dict-edit"] .collection-item.saving::before{ content: ''; position: absolute; left: 0; right: 0; top: 0; bottom: 0; background-color: #ffffffe8; line-height: 100%; z-index: 500; } dict-edit .collection-item.saving::after,[is="dict-edit"] .collection-item.saving::after{ content: 'saving...'; position: absolute; transform: translateX(-50%) translateY(-50%); left: 50%; top: 50%; color: #6e6e6e; z-index: 501; font-size: 1.3rem; text-transform: uppercase; } dict-edit .collection-item.focused,[is="dict-edit"] .collection-item.focused{ background-color: #eceff1; } dict-edit .lineNum,[is="dict-edit"] .lineNum{ font-size: 0.8rem; color: #b8b8b8; margin-right: 10px; min-width: 30px; text-align: right; }`,exports:{bindings:[["store","dictionaryListLoadingChanged","update"],["store","entryListChanged","update"],["store","entryListLoadingChanged","update"],["store","entryIdChanged","update"]],state:{focused:!1,size:10,mousePos:null,cursorPosition:null},getFlagStyle(e){e=this.store.getFlagColor(e)||"initial";return`color: ${this.store.getFlagTextColor(e)}; background-color: `+e},onHeadwordClick(e,t){this.store.changeEntryId(e)},onHeadwordLinkClick(e,t){t.preventDefault(),this.onDocumentClick(t),this.store.changeEntryId(e)},onOpenFlagMenuClick(a,e){e.stopPropagation();var t="ts_"+Date.now()+Math.floor(1e4*Math.random());let n=$(e.target);$("#flagDropdown").clone().attr({id:t}).data("entryid",a.id).appendTo($("body")).find("li").each(function(e,t){$(t).click(this.onFlagMenuItemClick.bind(this,a.id,$(t).data("flag")))}.bind(this)),n.attr("data-target",t).dropdown({constrainWidth:!1,coverTrigger:!1,container:$("body")}).dropdown("open")},onFlagMenuItemClick(e,t,a){this.store.setEntryFlag(e,t)},onDocumentClick(e){let t=$(".entry-list")[0];var a;t&&e.target.parentNode&&(!(a=t.contains(e.target))&&a==this.state.focused||(this.state.focused=a,this.state.cursorPosition=a?$(e.target).closest(".collection-item").data("idx")+1:null,this.updateCursor()))},onDocumentKeyDown(t){var e;[38,40,33,34,13].includes(t.keyCode)?(t.preventDefault(),38==t.keyCode?this.moveCursorUp(1):40==t.keyCode?this.moveCursorDown(1):33==t.keyCode?this.moveCursorUp(this.state.size):34==t.keyCode?this.moveCursorDown(this.state.size):13==t.keyCode&&this.state.cursorPosition&&(e=this.dictData.entryList[this.state.cursorPosition-1])&&(this.store.changeEntryId(e.id),this.updateCursor())):this.dictData.config.flagging.flags.length&&this.state.cursorPosition&&(46==t.keyCode?this.store.setEntryFlag(this.dictData.entryList[this.state.cursorPosition-1].id,""):this.dictData.config.flagging.flags.map(e=>e.key).includes(t.key)&&(e=this.dictData.config.flagging.flags.find(e=>e.key==t.key))&&this.store.setEntryFlag(this.dictData.entryList[this.state.cursorPosition-1].id,e.name))},onResizeHandleMouseDown(e){this.state.mousePos=e.x,document.addEventListener("mouseup",this.onDocumentMouseUp,!1),document.addEventListener("mousemove",this.resizeColumn,!1),$("body").css("user-select","none")},onDocumentMouseUp(){document.removeEventListener("mousemove",this.resizeColumn,!1),document.removeEventListener("mouseup",this.onDocumentMouseUp,!1),$("body").css("user-select","")},doChangeDoctype(e){e!=this.dictData.doctype&&(this.dictData.doctype=e,this.dictData.searchtext="",this.dictData.modifier="start",route(this.dictData.dictId+"/edit/"+e),this.store.loadEntryList().done(()=>{this.dictData.entryList.length?this.store.changeEntryId(this.dictData.entryList[0].id):($("#container").html("").addClass("empty"),Screenful.Editor.updateToolbar())}),this.update())},moveCursorDown(e){this.state.cursorPosition?this.state.cursorPosition=Math.min(this.state.cursorPosition+(e||1),this.dictData.entryList.length):this.state.cursorPosition=1,this.updateCursor()},moveCursorUp(e){this.state.cursorPosition?this.state.cursorPosition=Math.max(1,this.state.cursorPosition-(e||1)):this.state.cursorPosition=this.dictData.entryList.length-1,this.updateCursor()},updateCursor(){var e;$(".collection-item.focused",this.root).removeClass("focused"),this.state.cursorPosition&&(e=$(".collection-item:nth-child("+this.state.cursorPosition+")"),$(e).addClass("focused"),e&&this.scrollSelectedIntoView())},scrollSelectedIntoView(){let e=$(".entry-list")[0];var t,a,n,i;!e||(a=$(".entry-list .focused")[0])&&(t=a.offsetTop,a=a.clientHeight,n=e.scrollTop,i=e.scrollTop+e.clientHeight-a,t<n?e.scrollTop=t:i<t&&(e.scrollTop=t-e.clientHeight+a))},resizeColumn(e){var t=e.x-this.state.mousePos,e=(this.state.mousePos=e.x,$(".dictLeftCol").width());$(".dictLeftCol").css("width",e+t+"px")},setCursorByEntryId(){var e;this.dictData.entryId&&-1!=(e=this.dictData.entryList.findIndex(e=>e.id==this.dictData.entryId))&&(this.state.cursorPosition=e+1,this.updateCursor())},onMounted(){document.addEventListener("click",this.onDocumentClick),document.addEventListener("keydown",this.onDocumentKeyDown),this.dictData.isEntryListLoaded?this.setCursorByEntryId():this.store.one("entryListChanged",this.setCursorByEntryId.bind(this))},onBeforeUnmount(){document.removeEventListener("click",this.onDocumentClick),document.removeEventListener("keydown",this.onDocumentKeyDown)},onUpdated(){this.updateCursor()}},template:(e,t,a,n)=>e('<loading-overlay expr1494="expr1494"></loading-overlay><dict-nav expr1495="expr1495"></dict-nav><h1 expr1496="expr1496" class="header"> <span expr1497="expr1497" class="totalEntries"></span></h1><template expr1498="expr1498"></template>',[{type:a.IF,evaluate:e=>e.dictData.isDictionaryListLoading||e.dictData.isDictionaryLoading,redundantAttribute:"expr1494",selector:"[expr1494]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"links",evaluate:e=>[["edit","Edit"]]}],redundantAttribute:"expr1495",selector:"[expr1495]"},{redundantAttribute:"expr1496",selector:"[expr1496]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.dictData.title].join("")}]},{type:a.IF,evaluate:e=>e.dictData.entryCount,redundantAttribute:"expr1497",selector:"[expr1497]",template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>["total ",e.dictData.entryCount," entries"].join("")}]}])},{type:a.IF,evaluate:e=>e.dictData.isDictionaryLoaded&&!e.dictData.isDictionaryListLoading,redundantAttribute:"expr1498",selector:"[expr1498]",template:e('<div expr1499="expr1499" class="doctypes"></div><div id="dictEditContainer"><div expr1502="expr1502" class="dictLeftCol"><div expr1503="expr1503"></div><template expr1505="expr1505"></template></div><div expr1519="expr1519" class="resizeHandle"></div><div class="dictRightCol"><dict-edit-entry expr1520="expr1520"></dict-edit-entry></div></div>',[{type:a.IF,evaluate:e=>1<e.dictData.doctypes.length,redundantAttribute:"expr1499",selector:"[expr1499]",template:e('<ul class="tabs"><li expr1500="expr1500" class="tab col s2"></li></ul>',[{type:a.EACH,getKey:null,condition:null,template:e('<a expr1501="expr1501"> </a>',[{expressions:[{type:t.ATTRIBUTE,name:"active",evaluate:e=>e.type==e.dictData.doctype}]},{redundantAttribute:"expr1501",selector:"[expr1501]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.type},{type:t.EVENT,name:"onclick",evaluate:e=>e.doChangeDoctype.bind(e,e.type)}]}]),redundantAttribute:"expr1500",selector:"[expr1500]",itemName:"type",indexName:null,evaluate:e=>e.dictData.doctypes}])},{redundantAttribute:"expr1502",selector:"[expr1502]",expressions:[{type:t.ATTRIBUTE,name:"style",evaluate:e=>["width: max(",e.dictData.config.flagging.flags.length?"25vw":"20vw",", 250px);"].join("")}]},{type:a.IF,evaluate:e=>e.dictData.isEntryListLoading,redundantAttribute:"expr1503",selector:"[expr1503]",template:e('<loading-overlay expr1504="expr1504"></loading-overlay>',[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[],redundantAttribute:"expr1504",selector:"[expr1504]"}])},{type:a.IF,evaluate:e=>e.dictData.isEntryListLoaded,redundantAttribute:"expr1505",selector:"[expr1505]",template:e('<dict-entry-filter expr1506="expr1506"></dict-entry-filter><div expr1507="expr1507" class="entriesCountInfo"></div><div class="entry-list collection"><div expr1508="expr1508"></div><div expr1513="expr1513" style="padding-top: 10vh;"></div></div><ul expr1514="expr1514" id="flagDropdown" class="dropdown-content flagDropdown"></ul>',[{type:a.TAG,getComponent:n,evaluate:e=>"dict-entry-filter",slots:[],attributes:[{type:t.ATTRIBUTE,name:"search-func",evaluate:e=>e.store.searchEntryList.bind(e.store)}],redundantAttribute:"expr1506",selector:"[expr1506]"},{type:a.IF,evaluate:e=>e.dictData.entryCount>e.dictData.entryList.length,redundantAttribute:"expr1507",selector:"[expr1507]",template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>["Showing ",e.dictData.entryList.length," of ",e.dictData.entryCount," entries."].join("")}]}])},{type:a.EACH,getKey:null,condition:null,template:e('<span expr1509="expr1509" class="lineNum"> </span><a expr1510="expr1510"><raw-html expr1511="expr1511"></raw-html></a><span expr1512="expr1512"></span>',[{expressions:[{type:t.ATTRIBUTE,name:"data-idx",evaluate:e=>e.idx},{type:t.ATTRIBUTE,name:"class",evaluate:e=>["collection-item ",e.entry.isSaving?"saving":""," ",e.entry.id==e.dictData.entryId?"selected":""].join("")},{type:t.EVENT,name:"onclick",evaluate:e=>e.onHeadwordClick.bind(e,e.entry.id)}]},{redundantAttribute:"expr1509",selector:"[expr1509]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.idx+1,"."].join("")}]},{redundantAttribute:"expr1510",selector:"[expr1510]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#",e.dictData.dictId,"/edit/",e.dictData.doctype,"/",e.entry.id,"/view"].join("")},{type:t.ATTRIBUTE,name:"class",evaluate:e=>["headword-link ",e.entry.id==e.dictData.entryId?"red-text":""].join("")},{type:t.EVENT,name:"onclick",evaluate:e=>e.onHeadwordLinkClick.bind(e,e.entry.id)}]},{type:a.TAG,getComponent:n,evaluate:e=>"raw-html",slots:[],attributes:[{type:t.ATTRIBUTE,name:"content",evaluate:e=>e.entry.title||"&nbsp;"}],redundantAttribute:"expr1511",selector:"[expr1511]"},{type:a.IF,evaluate:e=>e.dictData.config.flagging.flags.length,redundantAttribute:"expr1512",selector:"[expr1512]",template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.store.getFlagLabel(e.entry.flag)||e.entry.flag||"No flag"].join("")},{type:t.EVENT,name:"onclick",evaluate:e=>e.onOpenFlagMenuClick.bind(e,e.entry)},{type:t.ATTRIBUTE,name:"class",evaluate:e=>["flag ",e.entry.flag?"badge":"noFlag"].join("")},{type:t.ATTRIBUTE,name:"style",evaluate:e=>e.getFlagStyle(e.entry.flag)}]}])}]),redundantAttribute:"expr1508",selector:"[expr1508]",itemName:"entry",indexName:"idx",evaluate:e=>e.dictData.entryList},{type:a.IF,evaluate:e=>!e.dictData.entryList.length&&!e.dictData.isEntryListLoading,redundantAttribute:"expr1513",selector:"[expr1513]",template:e('<h2 class="grey-text center-align">No entries</h2>',[])},{type:a.IF,evaluate:e=>e.dictData.config.flagging.flags.length,redundantAttribute:"expr1514",selector:"[expr1514]",template:e('<li data-flag><i class="material-icons" style="color: grey">label_outline</i><div>no flag</div><div class="right flagKey">delete</div></li><li expr1515="expr1515"></li>',[{type:a.EACH,getKey:null,condition:null,template:e('<i expr1516="expr1516" class="material-icons">label</i><div expr1517="expr1517"> </div><div expr1518="expr1518" class="right flagKey"> </div>',[{expressions:[{type:t.ATTRIBUTE,name:"data-flag",evaluate:e=>e.flag.name}]},{redundantAttribute:"expr1516",selector:"[expr1516]",expressions:[{type:t.ATTRIBUTE,name:"style",evaluate:e=>["color: ",e.flag.color].join("")}]},{redundantAttribute:"expr1517",selector:"[expr1517]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.flag.label}]},{redundantAttribute:"expr1518",selector:"[expr1518]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.flag.key}]}]),redundantAttribute:"expr1515",selector:"[expr1515]",itemName:"flag",indexName:null,evaluate:e=>e.dictData.config.flagging.flags}])}])},{redundantAttribute:"expr1519",selector:"[expr1519]",expressions:[{type:t.EVENT,name:"onmousedown",evaluate:e=>e.onResizeHandleMouseDown}]},{type:a.TAG,getComponent:n,evaluate:e=>"dict-edit-entry",slots:[],attributes:[],redundantAttribute:"expr1520",selector:"[expr1520]"}])}]),name:"dict-edit"},Ot={css:'dict-list .searchBox,[is="dict-list"] .searchBox{ max-width: 200px; display: inline-block; margin: 0 15px 0 0; } dict-list .searchBox input,[is="dict-list"] .searchBox input{ padding-right: 27px; } dict-list .clearFilterIcon,[is="dict-list"] .clearFilterIcon{ position: absolute; right: 5px; top: 11px; } dict-list .dict-lang,[is="dict-list"] .dict-lang{ padding-left: 0.5em; } dict-list ul li,[is="dict-list"] ul li{ position: relative; } dict-list ul li:hover,[is="dict-list"] ul li:hover{ background-color: #f8f8f8f2!important; } dict-list ul li.selected,[is="dict-list"] ul li.selected{ background-color: #fffde7 !important; } dict-list .title,[is="dict-list"] .title{ padding-left: 35px; } dict-list .checkbox,[is="dict-list"] .checkbox{ display: inline-block; vertical-align: middle; position: absolute; left: 20px; } dict-list .checkbox span,[is="dict-list"] .checkbox span{ opacity: 0.2; } dict-list .checkbox:hover span,[is="dict-list"] .checkbox:hover span{ opacity: 1; } dict-list .checkbox input:checked + span,[is="dict-list"] .checkbox input:checked + span{ opacity: 1; } dict-list .deleteAllBox,[is="dict-list"] .deleteAllBox{ text-align: center; position: fixed; bottom: 0; left: 0; right: 0; padding: 20px; background-color: white; font-size: 1.2rem; z-index: 9999; } dict-list .deleteAllBox button,[is="dict-list"] .deleteAllBox button{ margin-left: 20px; }',exports:{bindings:[["store","dictionaryListChanged","update"],["store","dictionaryListLoadingChanged","onDictionaryListLoadingChange"]],state:{isLoading:!1,lastCheckedIdx:null,visibleDictionaries:[],selectedCount:0,query:""},onDictionaryListLoadingChange(){this.dictData.isDictionaryListLoaded&&(this.state.visibleDictionaries=this.dictData.dictionaryList),this.update()},onSearchInput(e){this.state.query=e.target.value,this.filter()},onClearFilterClick(e){$("#searchBox").val()&&($("#searchBox").val(""),this.state.query="",this.filter())},onCheckboxClick(e){var t=$(e.currentTarget).attr("idx");this.toggleLineSelection(t,e.shiftKey),this.state.lastCheckedIdx=t},toggleLineSelection(e,t){var a=$("#chb_"+e).prop("checked"),n=t?Math.min(e,this.state.lastCheckedIdx):e,i=t?Math.max(e,this.state.lastCheckedIdx):e;for(let e=n;e<=i;e++)this.state.visibleDictionaries[e].selected=a;this.update()},onDeleteSelectedClick(){var e;confirm("Are you sure you want to delete selected dictionaries? You will not be able to undo this.")&&(this.update({isLoading:!0}),e=this.state.visibleDictionaries.filter(e=>e.selected).map(e=>e.id),this.deleteNextSelected(e))},filter(){if(this.dictData.dictionaryList.forEach(e=>{delete e.h_title}),this.state.visibleDictionaries=this.dictData.dictionaryList,""!==this.state.query){let e=FuzzySort.go(this.state.query,this.state.visibleDictionaries,{key:"id",keys:["title"]});this.state.visibleDictionaries=e.map(e=>(e.obj.h_title=FuzzySort.highlight(e[0],'<b class="red-text">',"</b>"),e.obj.score=e.score,e.obj)).sort((e,t)=>e.score==t.score?e.title.localeCompare(t.title):Math.sign(t.score-e.score))}this.update(),this.highlightOccurrences()},highlightOccurrences(){let a,n;this.state.visibleDictionaries.forEach((e,t)=>{(n=this.$("#r_"+t))&&((a=this.$("#t_"+t)).innerHTML=e.h_title||a.innerHTML.replace(/<b class="red-text">|<\/b>/g,""))},this)},deleteNextSelected(e){e.length?this.store.deleteDictionary(e.pop()).always(this.deleteNextSelected.bind(this,e)):(this.state.visibleDictionaries=this.dictData.dictionaryList,this.state.isLoading=!1,this.filter())},onDeselectAll(){this.state.visibleDictionaries.forEach(e=>{e.selected=!1}),this.update()},doEditDict(e){route(e+"/edit")},doConfigDict(e){route(e+"/config")},doCloneDict(e){this.update({isLoading:!0}),this.store.cloneDictionary(e)},doDeleteDict(e){var t=this.store.getDictionary(e).title;confirm("Are you sure you want to delete dictionary "+t+"? You will not be able to undo this.")&&(this.update({isLoading:!0}),this.store.deleteDictionary(e).always(()=>{this.update({isLoading:!1})}))},onBeforeUpdate(){this.state.selectedCount=this.state.visibleDictionaries.filter(e=>e.selected).length},onBeforeMount(){this.dictData.isDictionaryListLoaded&&(this.state.visibleDictionaries=this.dictData.dictionaryList)}},template:(e,t,a,n)=>e('<loading-overlay expr1471="expr1471"></loading-overlay><template expr1472="expr1472"></template>',[{type:a.IF,evaluate:e=>e.state.isLoading||e.dictData.isDictionaryListLoading,redundantAttribute:"expr1471",selector:"[expr1471]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.IF,evaluate:e=>!e.dictData.isDictionaryListLoading,redundantAttribute:"expr1472",selector:"[expr1472]",template:e('<div expr1473="expr1473"></div><div expr1493="expr1493" class="grey-text center-align"></div>',[{type:a.IF,evaluate:e=>e.dictData.dictionaryList.length,redundantAttribute:"expr1473",selector:"[expr1473]",template:e('<h1>your dictionaries</h1><div style="display: flex; align-items: center; flex-wrap: wrap;"><span expr1474="expr1474" class="searchBox input-field"></span><span style="margin-left: auto;"><a href="#/make" class="btn waves-effect waves-light"><i class="material-icons left">add</i>\n                  create new dictionary\n               </a></span></div><ul expr1477="expr1477" class="collection"></ul><div expr1488="expr1488" class="center" style="margin: 10vh auto;"></div><div expr1489="expr1489" id="deleteAllBox" class="deleteAllBox z-depth-5"></div>',[{type:a.IF,evaluate:e=>e.dictData.dictionaryList.length,redundantAttribute:"expr1474",selector:"[expr1474]",template:e('<i class="material-icons prefix grey-text">search</i><input expr1475="expr1475" id="searchBox"/><i expr1476="expr1476" class="material-icons clearFilterIcon grey-text clickable">close</i>',[{redundantAttribute:"expr1475",selector:"[expr1475]",expressions:[{type:t.EVENT,name:"oninput",evaluate:e=>e.onSearchInput}]},{redundantAttribute:"expr1476",selector:"[expr1476]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.onClearFilterClick}]}])},{type:a.IF,evaluate:e=>e.state.visibleDictionaries.length,redundantAttribute:"expr1477",selector:"[expr1477]",template:e('<li expr1478="expr1478"></li>',[{type:a.EACH,getKey:e=>e.dict.id,condition:null,template:e('<div><label expr1479="expr1479" class="checkbox"></label><a expr1481="expr1481" class="title"> </a><span expr1482="expr1482" class="dict-lang"></span><span expr1483="expr1483" class="dict-lang grey-text"> </span><a expr1484="expr1484" class="secondary-content clickable" title="delete dictionary"></a><a expr1485="expr1485" class="secondary-content clickable" title="clone dictionary"><i class="material-icons">content_copy</i></a><a expr1486="expr1486" class="secondary-content clickable" title="config dictionary"></a><a expr1487="expr1487" class="secondary-content clickable" title="edit dictionary"></a></div>',[{expressions:[{type:t.ATTRIBUTE,name:"id",evaluate:e=>["r_",e.idx].join("")},{type:t.ATTRIBUTE,name:"class",evaluate:e=>["collection-item ",e.dict.selected?"selected":""].join("")}]},{type:a.IF,evaluate:e=>e.dict.currentUserCanDelete,redundantAttribute:"expr1479",selector:"[expr1479]",template:e('<input expr1480="expr1480" type="checkbox"/><span></span>',[{redundantAttribute:"expr1480",selector:"[expr1480]",expressions:[{type:t.ATTRIBUTE,name:"id",evaluate:e=>["chb_",e.idx].join("")},{type:t.ATTRIBUTE,name:"idx",evaluate:e=>e.idx},{type:t.ATTRIBUTE,name:"checked",evaluate:e=>e.dict.selected},{type:t.EVENT,name:"onclick",evaluate:e=>e.onCheckboxClick}]}])},{redundantAttribute:"expr1481",selector:"[expr1481]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.dict.title},{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dict.id].join("")},{type:t.ATTRIBUTE,name:"id",evaluate:e=>["t_",e.idx].join("")}]},{type:a.IF,evaluate:e=>e.dict.lang,redundantAttribute:"expr1482",selector:"[expr1482]",template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.dict.lang}]}])},{redundantAttribute:"expr1483",selector:"[expr1483]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.dict.size," entries"].join("")}]},{type:a.IF,evaluate:e=>e.dict.currentUserCanDelete,redundantAttribute:"expr1484",selector:"[expr1484]",template:e('<i class="material-icons">delete</i>',[{expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.doDeleteDict.bind(e,e.dict.id)}]}])},{redundantAttribute:"expr1485",selector:"[expr1485]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.doCloneDict.bind(e,e.dict.id)}]},{type:a.IF,evaluate:e=>e.dict.currentUserCanDelete,redundantAttribute:"expr1486",selector:"[expr1486]",template:e('<i class="material-icons">settings</i>',[{expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.doConfigDict.bind(e,e.dict.id)}]}])},{type:a.IF,evaluate:e=>e.dict.currentUserCanEdit,redundantAttribute:"expr1487",selector:"[expr1487]",template:e('<i class="material-icons">edit</i>',[{expressions:[{type:t.ATTRIBUTE,name:"data-dict-id",evaluate:e=>e.dict.id},{type:t.EVENT,name:"onclick",evaluate:e=>e.doEditDict.bind(e,e.dict.id)}]}])}]),redundantAttribute:"expr1478",selector:"[expr1478]",itemName:"dict",indexName:"idx",evaluate:e=>e.state.visibleDictionaries}])},{type:a.IF,evaluate:e=>!e.state.visibleDictionaries.length,redundantAttribute:"expr1488",selector:"[expr1488]",template:e('<h1 class="grey-text lighten-2">Nothing found</h1>',[])},{type:a.IF,evaluate:e=>e.state.selectedCount,redundantAttribute:"expr1489",selector:"[expr1489]",template:e('<div expr1490="expr1490"> <button expr1491="expr1491" class="btn">\n                     delete\n                  </button><button expr1492="expr1492" class="btn btn-secondary">\n                     cancel\n                  </button></div>',[{redundantAttribute:"expr1490",selector:"[expr1490]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>["Delete selected dictionaries (",e.state.selectedCount,")?"].join("")}]},{redundantAttribute:"expr1491",selector:"[expr1491]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.onDeleteSelectedClick}]},{redundantAttribute:"expr1492",selector:"[expr1492]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.onDeselectAll}]}])}])},{type:a.IF,evaluate:e=>!e.dictData.dictionaryList.length,redundantAttribute:"expr1493",selector:"[expr1493]",template:e('<h1>no dictionaries</h1><div>\n            You have no dictionary yet. Create one using button below.\n         </div><br/><a href="#/make" class="btn waves-effect waves-light"><i class="material-icons left">add</i>\n            create new dictionary\n         </a>',[])}])}]),name:"dict-list"},Vt={css:null,exports:{state:{isLoading:!0,errorMessage:"",url:"",baseUrl:"https://www.lexonomy.eu/"},onMounted(){this.store.suggestUrl().done(e=>{this.update({isLoading:!1,url:e.suggested,baseUrl:e.baseUrl}),M.updateTextFields(),$("select").formSelect()})},doMake(e){var t=$("#title").val();t&&(this.update({isLoading:!0}),this.store.createDictionary({url:$("#url").val(),template:$("#template").val(),title:t}).done(e=>{e.success?route("/"+e.url):this.state.errorMessage="Selected URL is already taken."}).always(this.update.bind(this,{isLoading:!1})))}},template:(e,t,a,n)=>e('<loading-overlay expr1544="expr1544"></loading-overlay><h1>\n      New dictionary\n   </h1><div class="row"><div class="input-field"><input id="title" type="text" class="validate inlineBlock" required style="max-width: 300px;"/><label for="title">Title</label><span class="helper-text">Enter a human-readable title such as "My Esperanto Dictionary". You will be able to change this later.</span></div></div><div><label for="url">URL</label></div><div class="row"><div style="display: flex; align-items: baseline;"><span expr1545="expr1545" class="grey-text"> </span><span class="input-field" style="margin-top: 0;"><input expr1546="expr1546" id="url" type="text" class="validate inlineBlock" required minlength="5" pattern="[a-zA-Z0-9\\-_]*" style="max-width: 300px;"/><span class="helper-text">This will be your dictionary\'s address on the web. You will be able to change this later. Allowed:  letters, numbers, - and _</span></span></div></div><div></div><div class="input-field"><div style="max-width: 300px;"><select id="template"><option value="blank">(none)</option><option value="smd">Simple Monolingual Dictionary</option><option value="sbd">Simple Bilingual Dictionary</option></select></div><label>Template</label><span class="helper-text">You can choose a template here to start you off. Each template comes with a few sample entries. You will be able to change or delete those and to customize the template.</span></div><div expr1547="expr1547" class="section"></div><div class="buttons"><button expr1549="expr1549" class="btn waves-effect waves-light" name="makeDict" id="makeButton">Create dictionary\n         <i class="material-icons left">add</i></button><a href="#" class="btn btn-flat">cancel</a></div>',[{type:a.IF,evaluate:e=>e.state.isLoading,redundantAttribute:"expr1544",selector:"[expr1544]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{redundantAttribute:"expr1545",selector:"[expr1545]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.baseUrl}]},{redundantAttribute:"expr1546",selector:"[expr1546]",expressions:[{type:t.VALUE,evaluate:e=>e.state.url}]},{type:a.IF,evaluate:e=>""!=e.state.errorMessage,redundantAttribute:"expr1547",selector:"[expr1547]",template:e('<div expr1548="expr1548" class="message messageError"> </div>',[{redundantAttribute:"expr1548",selector:"[expr1548]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.state.errorMessage].join("")}]}])},{redundantAttribute:"expr1549",selector:"[expr1549]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.doMake}]}]),name:"dict-new"},Kt={css:'dict-public-entry .infoIcon,[is="dict-public-entry"] .infoIcon{ margin-left: 1.5rem; } dict-public-entry .infoIcon a,[is="dict-public-entry"] .infoIcon a{ font-size: 1.8rem; } dict-public-entry .leftCol,[is="dict-public-entry"] .leftCol{ position: relative; display: block; min-height: calc(100vh - 260px); } dict-public-entry .entry-list,[is="dict-public-entry"] .entry-list{ max-height: 80vh; overflow-y: auto; } dict-public-entry .collection-item,[is="dict-public-entry"] .collection-item{ position: relative; display: flex; border-left: 5px solid white; padding-left: 0.2rem; } dict-public-entry .collection-item .headword-link,[is="dict-public-entry"] .collection-item .headword-link{ text-decoration: none; font-size: 1.2rem; letter-spacing: 1px; margin-right: auto; } dict-public-entry .collection-item.selected,[is="dict-public-entry"] .collection-item.selected{ border-left-color: #000; } dict-public-entry .collection-item.focused,[is="dict-public-entry"] .collection-item.focused{ background-color: #eceff1; } dict-public-entry .lineNum,[is="dict-public-entry"] .lineNum{ font-size: 0.8rem; color: #b8b8b8; margin-right: 10px; min-width: 30px; text-align: right; } dict-public-entry .noEntries,[is="dict-public-entry"] .noEntries{ padding-top: 10vh; }',exports:{bindings:[["store","entryIdChanged","entryIdChanged"],["store","isDictionaryLoadingChanged","update"],["store","entryListLoadingChanged","update"],["store","isEntryLoadingChanged","update"]],entryIdChanged(){this.store.loadEntry()},onMounted(){this.dictData.dictId&&!this.dictData.isEntryLoading&&this.store.loadEntry()}},template:(e,t,a,n)=>e('<loading-overlay expr1550="expr1550"></loading-overlay><dict-nav expr1551="expr1551"></dict-nav><h1 expr1552="expr1552" class="header"></h1><template expr1553="expr1553"></template>',[{type:a.IF,evaluate:e=>e.dictData.isDictionaryLoading||e.dictData.isEntryListLoading&&!e.dictData.isEntryListLoaded,redundantAttribute:"expr1550",selector:"[expr1550]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"links",evaluate:e=>[[e.dictData.entryId,"View"]]}],redundantAttribute:"expr1551",selector:"[expr1551]"},{type:a.IF,evaluate:e=>e.dictData.title,redundantAttribute:"expr1552",selector:"[expr1552]",template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.dictData.title].join("")}]}])},{type:a.IF,evaluate:e=>e.dictData.public&&e.dictData.isEntryListLoaded,redundantAttribute:"expr1553",selector:"[expr1553]",template:e('<div class="row"><div class="col s4 leftCol"><loading-overlay expr1554="expr1554"></loading-overlay><template expr1555="expr1555"></template></div><div class="col s8"><div class="divider"></div><entry-view expr1563="expr1563"></entry-view></div></div><div class="divider"></div><div expr1564="expr1564" class="section"> </div>',[{type:a.IF,evaluate:e=>e.dictData.isEntryListLoading&&e.dictData.isEntryListLoaded,redundantAttribute:"expr1554",selector:"[expr1554]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.IF,evaluate:e=>e.dictData.isEntryListLoaded,redundantAttribute:"expr1555",selector:"[expr1555]",template:e('<dict-entry-filter expr1556="expr1556"></dict-entry-filter><div expr1557="expr1557" class="entriesCountInfo"></div><div class="entry-list collection"><div expr1558="expr1558"></div><div expr1562="expr1562" class="noEntries"></div></div>',[{type:a.TAG,getComponent:n,evaluate:e=>"dict-entry-filter",slots:[],attributes:[{type:t.ATTRIBUTE,name:"search-func",evaluate:e=>e.store.searchEntryList.bind(e.store)}],redundantAttribute:"expr1556",selector:"[expr1556]"},{type:a.IF,evaluate:e=>e.dictData.openEntryCount>e.dictData.entryList.length,redundantAttribute:"expr1557",selector:"[expr1557]",template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>["Showing ",e.dictData.entryList.length," of ",e.dictData.openEntryCount," entries."].join("")}]}])},{type:a.EACH,getKey:null,condition:null,template:e('<span expr1559="expr1559" class="lineNum"> </span><a expr1560="expr1560"><raw-html expr1561="expr1561"></raw-html></a>',[{expressions:[{type:t.ATTRIBUTE,name:"class",evaluate:e=>["collection-item ",e.entry.id==e.dictData.entryId?"selected":""].join("")}]},{redundantAttribute:"expr1559",selector:"[expr1559]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.idx+1,"."].join("")}]},{redundantAttribute:"expr1560",selector:"[expr1560]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/",e.entry.id].join("")},{type:t.ATTRIBUTE,name:"class",evaluate:e=>["headword-link ",e.entry.id==e.dictData.entryId?"red-text":""].join("")}]},{type:a.TAG,getComponent:n,evaluate:e=>"raw-html",slots:[],attributes:[{type:t.ATTRIBUTE,name:"content",evaluate:e=>e.entry.title||"&nbsp;"}],redundantAttribute:"expr1561",selector:"[expr1561]"}]),redundantAttribute:"expr1558",selector:"[expr1558]",itemName:"entry",indexName:"idx",evaluate:e=>e.dictData.entryList},{type:a.IF,evaluate:e=>e.dictData.entryList&&!e.dictData.entryList.length,redundantAttribute:"expr1562",selector:"[expr1562]",template:e('<h2 class="grey-text center-align">No entries</h2>',[])}])},{type:a.TAG,getComponent:n,evaluate:e=>"entry-view",slots:[],attributes:[],redundantAttribute:"expr1563",selector:"[expr1563]"},{redundantAttribute:"expr1564",selector:"[expr1564]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.dictData.licence].join("")}]}])}]),name:"dict-public-entry"},Ht={css:'dict-public .dictBtns,[is="dict-public"] .dictBtns{ margin-top: 5px; } dict-public .firstRowContainer,[is="dict-public"] .firstRowContainer{ display: flex; } dict-public .sectionDivider,[is="dict-public"] .sectionDivider{ width: 1px; border-left: 1px solid #e0e0e0; padding-left: 30px; margin-left: 30px; } dict-public .firstRowCol,[is="dict-public"] .firstRowCol{ flex: 1; padding-bottom: 30px; } dict-public .description,[is="dict-public"] .description{ word-break: break-word; } dict-public dict-entry-filter,[is="dict-public"] dict-entry-filter{ max-width: 500px; } dict-public .searchResult,[is="dict-public"] .searchResult{ min-height: max(15vh, 200px); } dict-public .searchResultNote,[is="dict-public"] .searchResultNote{ font-size: 0.8rem; margin-left: 10px; } dict-public .noEntries,[is="dict-public"] .noEntries{ padding-top: 30px; } dict-public .entry-list li,[is="dict-public"] .entry-list li{ display: inline-block; padding: 3px 10px; } dict-public .entry-list li a:hover,[is="dict-public"] .entry-list li a:hover{ text-decoration: underline; } dict-public .refreshExamplesBtn,[is="dict-public"] .refreshExamplesBtn{ margin-top: 15px; } dict-public .loadingExamples,[is="dict-public"] .loadingExamples{ min-height: 20px; margin: 15px 10px; } dict-public .licence,[is="dict-public"] .licence{ opacity: .5; }',exports:{bindings:[["store","dictionaryChanged","onDictionaryChanged"],["store","isDictionaryExamplesLoading","update"]],state:{isEntryListLoading:!1,showFoundEntries:!1},reloadDictionaryExamples(){(this.dictData.public||this.authData.authorized)&&this.store.reloadDictionaryExamples()},search(){this.update({isEntryListLoading:!0}),this.store.loadEntryList(20).done(()=>{this.state.showFoundEntries=!0}).always(()=>{this.update({isEntryListLoading:!1})})},onReloadExamplesClick(){this.reloadDictionaryExamples(),this.update()},onDictionaryChanged(){this.reloadDictionaryExamples()},onCloseSearchResultClick(){this.update({showFoundEntries:!1})},getEntryUrl(e){return this.dictData.userAccess&&this.dictData.userAccess.canEdit?`#/${this.dictData.dictId}/edit/${this.dictData.doctype}/${e.id}/view`:`#/${this.dictData.dictId}/`+e.id},onUpdated(){[".entry-list li",".random-entries li"].forEach(e=>{let a=0;$(e).each((e,t)=>{a=Math.max(a,$(t).width())}),$(e).each((e,t)=>{$(t).css("width",Math.min(300,a+20)+"px")})})},onMounted(){this.dictData.searchtext="",this.dictData.dictionaryExamples||this.dictData.isDictionaryExamplesLoading||this.reloadDictionaryExamples()}},template:(e,t,a,n)=>e('<dict-nav expr1575="expr1575"></dict-nav><loading-overlay expr1576="expr1576"></loading-overlay><template expr1577="expr1577"></template>',[{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[],redundantAttribute:"expr1575",selector:"[expr1575]"},{type:a.IF,evaluate:e=>e.dictData.isDictionaryLoading||e.state.isEntryListLoading,redundantAttribute:"expr1576",selector:"[expr1576]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.IF,evaluate:e=>!e.dictData.isDictionaryLoading,redundantAttribute:"expr1577",selector:"[expr1577]",template:e('<h1 expr1578="expr1578" class="header"> <div class="dictBtns buttons"><a expr1579="expr1579" class="btn"></a><a expr1580="expr1580" class="btn"></a><a expr1581="expr1581" class="btn"></a><a expr1582="expr1582" class="btn"></a><a expr1583="expr1583" class="btn"></a></div></h1><div class="firstRowContainer"><div class="firstRowCol description"><h3>Description</h3><raw-html expr1584="expr1584"></raw-html></div><template expr1585="expr1585"></template></div><div expr1594="expr1594"></div>',[{redundantAttribute:"expr1578",selector:"[expr1578]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.dictData.title].join("")}]},{type:a.IF,evaluate:e=>e.dictData.userAccess.canEdit,redundantAttribute:"expr1579",selector:"[expr1579]",template:e("edit",[{expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/edit"].join("")}]}])},{type:a.IF,evaluate:e=>e.dictData.userAccess.canConfig,redundantAttribute:"expr1580",selector:"[expr1580]",template:e("config",[{expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/config"].join("")}]}])},{type:a.IF,evaluate:e=>e.dictData.userAccess.canUpload,redundantAttribute:"expr1581",selector:"[expr1581]",template:e("upload",[{expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/upload"].join("")}]}])},{type:a.IF,evaluate:e=>e.dictData.userAccess.canDownload,redundantAttribute:"expr1582",selector:"[expr1582]",template:e("download",[{expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/download"].join("")}]}])},{type:a.IF,evaluate:e=>e.authData.authorized,redundantAttribute:"expr1583",selector:"[expr1583]",template:e("links",[{expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/links"].join("")}]}])},{type:a.TAG,getComponent:n,evaluate:e=>"raw-html",slots:[],attributes:[{type:t.ATTRIBUTE,name:"content",evaluate:e=>e.dictData.blurb}],redundantAttribute:"expr1584",selector:"[expr1584]"},{type:a.IF,evaluate:e=>e.dictData.public||e.dictData.userAccess,redundantAttribute:"expr1585",selector:"[expr1585]",template:e('<div class="sectionDivider"></div><div class="firstRowCol"><h3>Search</h3><dict-entry-filter expr1586="expr1586"></dict-entry-filter><div expr1587="expr1587" class="searchResult"></div></div>',[{type:a.TAG,getComponent:n,evaluate:e=>"dict-entry-filter",slots:[],attributes:[{type:t.ATTRIBUTE,name:"search-func",evaluate:e=>e.search}],redundantAttribute:"expr1586",selector:"[expr1586]"},{type:a.IF,evaluate:e=>!e.state.isEntryListLoading&&e.state.showFoundEntries&&e.dictData.entryList,redundantAttribute:"expr1587",selector:"[expr1587]",template:e('<ul expr1588="expr1588" class="entry-list found-entries"></ul><div expr1592="expr1592" class="serchResultNote grey-text"></div><div expr1593="expr1593" class="noEntries"></div>',[{type:a.IF,evaluate:e=>e.dictData.entryList.length,redundantAttribute:"expr1588",selector:"[expr1588]",template:e('<li expr1589="expr1589"></li>',[{type:a.EACH,getKey:null,condition:null,template:e('<a expr1590="expr1590"><raw-html expr1591="expr1591"></raw-html></a>',[{redundantAttribute:"expr1590",selector:"[expr1590]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>e.getEntryUrl(e.entry)}]},{type:a.TAG,getComponent:n,evaluate:e=>"raw-html",slots:[],attributes:[{type:t.ATTRIBUTE,name:"content",evaluate:e=>e.entry.title}],redundantAttribute:"expr1591",selector:"[expr1591]"}]),redundantAttribute:"expr1589",selector:"[expr1589]",itemName:"entry",indexName:null,evaluate:e=>e.dictData.entryList}])},{type:a.IF,evaluate:e=>20<e.dictData.entryCount,redundantAttribute:"expr1592",selector:"[expr1592]",template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>["Showing first 20 entries of ",e.dictData.entryCount,"."].join("")}]}])},{type:a.IF,evaluate:e=>!e.dictData.entryList.length,redundantAttribute:"expr1593",selector:"[expr1593]",template:e('<h2 class="grey-text center-align">No entries</h2>',[])}])}])},{type:a.IF,evaluate:e=>e.dictData.public,redundantAttribute:"expr1594",selector:"[expr1594]",template:e('<div class="divider"></div><a expr1595="expr1595" class="refreshExamplesBtn btn btn-floating waves-effect waves-light right"></a><h3>Examples</h3><div expr1596="expr1596" class="loadingExamples grey-text"></div><ul expr1597="expr1597" class="entry-list random-entries"></ul><div class="divider"></div><div expr1600="expr1600" class="licence section right"> </div>',[{type:a.IF,evaluate:e=>e.dictData.dictionaryExamplesHasMore,redundantAttribute:"expr1595",selector:"[expr1595]",template:e('<i class="material-icons">refresh</i>',[{expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.onReloadExamplesClick}]}])},{type:a.IF,evaluate:e=>e.dictData.isDictionaryExamplesLoading,redundantAttribute:"expr1596",selector:"[expr1596]",template:e("\n            Loading...\n         ",[])},{type:a.IF,evaluate:e=>!e.dictData.isDictionaryExamplesLoading&&e.dictData.dictionaryExamples,redundantAttribute:"expr1597",selector:"[expr1597]",template:e('<li expr1598="expr1598"></li>',[{type:a.EACH,getKey:null,condition:null,template:e('<a expr1599="expr1599"> </a>',[{redundantAttribute:"expr1599",selector:"[expr1599]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.entry.titlePlain},{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/",e.entry.id].join("")}]}]),redundantAttribute:"expr1598",selector:"[expr1598]",itemName:"entry",indexName:null,evaluate:e=>e.dictData.dictionaryExamples}])},{redundantAttribute:"expr1600",selector:"[expr1600]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.dictData.licence].join("")}]}])}])}]),name:"dict-public"},zt={css:null,exports:{state:{isUploading:!1,isImporting:!1,showProgress:!1,errorMessage:"",infoMessage:""},doUpload(){var e=new FormData,t=$("#file")[0].files[0];e.append("myfile",t),$("#purge").is(":checked")&&e.append("purge","on"),this.update({isUploading:!0,errorMessage:"",infoMessage:"Upload started, please keep the window open."}),this.store.uploadXML(e).done(e=>{e.success?this.startImport(e.file,e.uploadStart):this.update({infoMessage:"Error while uploading file"})}).always(()=>{this.update({isUploading:!1})})},startImport(t,a){""!=t&&(this.update({isImporting:!0}),this.store.importXML({filename:t,uploadStart:a}).done(e=>{clearTimeout(this.state.timeutHandle),this.state.infoMessage=e.progressMessage,e.finished?(this.state.isImporting=!1,this.state.infoMessage+=' Dictionary import finished. <a href="#/'+this.dictData.dictId+'">See dictionary</a>'):e.errors?(this.state.infoMessage="There were some errors during XML parsing",this.store.importXML({filename:t,uploadStart:a,showErrors:!0,truncate:1e4}).done(e=>{this.update({errorMessage:e.errorData})}),this.state.isImporting=!1):this.state.timeutHandle=setTimeout(this.startImport.bind(this,t,a),2e3),this.update()}))}},template:(e,t,a,n)=>e('<loading-overlay expr1566="expr1566"></loading-overlay><dict-nav expr1567="expr1567"></dict-nav><h1>Upload</h1><div class="file-field input-field buttons" style="max-width: 700px;"><div class="btn"><span>Choose XML file</span><input type="file" id="file"/></div><div class="file-path-wrapper"><input class="file-path validate" type="text"/></div><div><a expr1568="expr1568" id="startButton"><i class="material-icons left">file_upload</i>Upload file\n         </a></div></div><div><label><input type="checkbox" id="purge"/><span>Purge dictionary before upload</span></label></div><br/><br/><template expr1569="expr1569"></template>',[{type:a.IF,evaluate:e=>e.state.isUploading,redundantAttribute:"expr1566",selector:"[expr1566]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"links",evaluate:e=>[["upload","Upload"]]}],redundantAttribute:"expr1567",selector:"[expr1567]"},{redundantAttribute:"expr1568",selector:"[expr1568]",expressions:[{type:t.ATTRIBUTE,name:"class",evaluate:e=>["waves-effect waves-light btn btn-primary ",e.state.isUploading||e.state.isImporting?"disabled":""].join("")},{type:t.EVENT,name:"onclick",evaluate:e=>e.doUpload}]},{type:a.IF,evaluate:e=>e.state.infoMessage||e.state.errorMessage,redundantAttribute:"expr1569",selector:"[expr1569]",template:e('<h3>Progress</h3><div expr1570="expr1570" classs="message messageInfo"></div><div expr1572="expr1572" class="message messageError"></div>',[{type:a.IF,evaluate:e=>e.state.infoMessage,redundantAttribute:"expr1570",selector:"[expr1570]",template:e('<raw-html expr1571="expr1571"></raw-html>',[{type:a.TAG,getComponent:n,evaluate:e=>"raw-html",slots:[],attributes:[{type:t.ATTRIBUTE,name:"content",evaluate:e=>e.state.infoMessage}],redundantAttribute:"expr1571",selector:"[expr1571]"}])},{type:a.IF,evaluate:e=>e.state.errorMessage,redundantAttribute:"expr1572",selector:"[expr1572]",template:e('<raw-html expr1573="expr1573"></raw-html>',[{type:a.TAG,getComponent:n,evaluate:e=>"raw-html",slots:[],attributes:[{type:t.ATTRIBUTE,name:"content",evaluate:e=>e.state.errorMessage}],redundantAttribute:"expr1573",selector:"[expr1573]"}])}])}]),name:"dict-upload"},Gt={css:'dict-links .dictName,[is="dict-links"] .dictName{ border-bottom: 1px solid #d9d9d8; } dict-links .dictName i,[is="dict-links"] .dictName i{ margin-left: 10px; } dict-links .dictLinks,[is="dict-links"] .dictLinks{ display: flex; column-gap: 6vw; padding-left: 10px; } dict-links .arrowCell,[is="dict-links"] .arrowCell{ color: #cbcbcb ; padding: 0 20px; }',exports:{state:{dictionaries:{},isLoading:!0},processLinks(e,a){e[a].forEach(e=>{var t="from"==a?e.source_dict:e.target_dict;this.state.dictionaries[t]||(this.state.dictionaries[t]={dictId:t,from:[],to:[]}),this.state.dictionaries[t][a].push(e)})},openDictInfo(e){$("#modalTitle").html(e.title),$("#modalContent").html(e.blurb);let t=M.Modal.getInstance($("#modalDictionary"));t.open()},checkAllLoaded(){Object.values(this.state.dictionaries).some(e=>e.isLoading)||this.update({isLoading:!1})},onMounted(){$(".modal").modal(),this.state.dictionaries={},this.store.loadDictionaryLinks().done(e=>{for(var t in this.processLinks(e.links,"to"),this.processLinks(e.links,"from"),this.state.dictionaries)t!=this.dictData.dictId?(this.state.dictionaries[t].isLoading=!0,this.store.loadDictionary(t).done(function(e,t){t.success&&Object.assign(this.state.dictionaries[e],{title:t.publicInfo.title,blurb:t.publicInfo.blurb,isLoading:!1})}.bind(this,t)).always(this.checkAllLoaded.bind(this))):Object.assign(this.state.dictionaries[t],{isLoading:!1,title:this.dictData.title,blurb:this.dictData.blurb});this.checkAllLoaded()})}},template:(e,t,a,n)=>e('<loading-overlay expr1602="expr1602"></loading-overlay><dict-nav expr1603="expr1603"></dict-nav><h1>Links</h1><template expr1604="expr1604"></template><div id="modalDictionary" class="modal"><div class="modal-content"><h2 id="modalTitle"></h2><div id="modalContent"></div></div><div class="modal-footer"><a class="btn modal-close waves-effect waves-green">Close</a></div></div>',[{type:a.IF,evaluate:e=>e.state.isLoading,redundantAttribute:"expr1602",selector:"[expr1602]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.TAG,getComponent:n,evaluate:e=>"dict-nav",slots:[],attributes:[{type:t.ATTRIBUTE,name:"links",evaluate:e=>[["links","links"]]}],redundantAttribute:"expr1603",selector:"[expr1603]"},{type:a.IF,evaluate:e=>!e.state.isLoading,redundantAttribute:"expr1604",selector:"[expr1604]",template:e('<div expr1605="expr1605" class="grey-text"></div><div expr1606="expr1606"></div>',[{type:a.IF,evaluate:e=>!Object.values(e.state.dictionaries).length,redundantAttribute:"expr1605",selector:"[expr1605]",template:e("<h2>No links</h2>",[])},{type:a.EACH,getKey:null,condition:null,template:e('<div><h2 expr1607="expr1607" class="dictName"> <i expr1608="expr1608" class="material-icons clickable"></i><a expr1609="expr1609" class="btn right">open</a></h2></div><div class="dictLinks"><div><h3 class="title">Outgoing links</h3><div expr1610="expr1610"></div><table expr1611="expr1611"></table></div><div><h3 class="title">Incoming links</h3><div expr1617="expr1617"></div><table expr1618="expr1618"></table></div></div>',[{redundantAttribute:"expr1607",selector:"[expr1607]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.dict.title].join("")}]},{type:a.IF,evaluate:e=>e.dict.blurb,redundantAttribute:"expr1608",selector:"[expr1608]",template:e("\n                  info_outline\n               ",[{expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.openDictInfo.bind(e,e.dict)}]}])},{redundantAttribute:"expr1609",selector:"[expr1609]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dict.dictId].join("")}]},{type:a.IF,evaluate:e=>!e.dict.to.length,redundantAttribute:"expr1610",selector:"[expr1610]",template:e('<h4 class="grey-text">No links</h4>',[])},{type:a.IF,evaluate:e=>e.dict.to.length,redundantAttribute:"expr1611",selector:"[expr1611]",template:e('<tr expr1612="expr1612"></tr>',[{type:a.EACH,getKey:null,condition:null,template:e('<td><a expr1613="expr1613"> </a></td><td expr1614="expr1614" class="grey-text"> </td><td class="arrowCell"><i class="material-icons">arrow_forward</i></td><td><a expr1615="expr1615"> </a></td><td expr1616="expr1616" class="grey-text"> </td>',[{redundantAttribute:"expr1613",selector:"[expr1613]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.link.source_hw||e.link.source_id].join("")},{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/edit/entry/view/",e.link.source_entry].join("")}]},{redundantAttribute:"expr1614",selector:"[expr1614]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.link.source_hw?"("+e.link.source_id+")":""].join("")}]},{redundantAttribute:"expr1615",selector:"[expr1615]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.link.target_hw||e.link.target_el+" "+e.link.target_id].join("")},{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.link.target_dict,"/edit/entry/view/",e.link.target_entry].join("")}]},{redundantAttribute:"expr1616",selector:"[expr1616]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.link.target_hw?e.link.target_el+" "+e.link.target_id:""].join("")}]}]),redundantAttribute:"expr1612",selector:"[expr1612]",itemName:"link",indexName:null,evaluate:e=>e.dict.to}])},{type:a.IF,evaluate:e=>!e.dict.from.length,redundantAttribute:"expr1617",selector:"[expr1617]",template:e('<h4 class="grey-text">No links</h4>',[])},{type:a.IF,evaluate:e=>e.dict.from.length,redundantAttribute:"expr1618",selector:"[expr1618]",template:e('<tr expr1619="expr1619"></tr>',[{type:a.EACH,getKey:null,condition:null,template:e('<td><a expr1620="expr1620"> </a></td><td expr1621="expr1621" class="grey-text"> </td><td style="padding: 0 20px;" class="grey-text"><i class="material-icons">arrow_forward</i></td><td><a expr1622="expr1622"> </a></td><td expr1623="expr1623" class="grey-text"> </td>',[{redundantAttribute:"expr1620",selector:"[expr1620]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.link.source_hw||e.link.source_el+" "+e.link.source_id].join("")},{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.link.source_dict,"/edit/entry/view/",e.link.source_entry].join("")}]},{redundantAttribute:"expr1621",selector:"[expr1621]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.link.source_hw?e.link.source_el+" "+e.link.source_id:""].join("")}]},{redundantAttribute:"expr1622",selector:"[expr1622]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.link.target_hw||e.link.target_id].join("")},{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/edit/entry/view/",e.link.target_entry].join("")}]},{redundantAttribute:"expr1623",selector:"[expr1623]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.link.target_hw?"("+e.link.target_id+")":""].join("")}]}]),redundantAttribute:"expr1619",selector:"[expr1619]",itemName:"link",indexName:null,evaluate:e=>e.dict.from}])}]),redundantAttribute:"expr1606",selector:"[expr1606]",itemName:"dict",indexName:null,evaluate:e=>Object.values(e.state.dictionaries)}])}]),name:"dict-links"},qt={css:'entry-view,[is="entry-view"]{ position: relative; display: block; min-height: calc(100vh - 260px); } entry-view .voicetts,[is="entry-view"] .voicetts{ display: inline-block; vertical-align: top; } entry-view .voicetts-icon img,[is="entry-view"] .voicetts-icon img{ width: 30px; cursor: pointer; margin-left: 1em; }',exports:{bindings:[["store","isEntryLoadingChanged","update"]],initViewer(){var e;this.dictData.entry&&this.dictData.entry.content&&(e=Xemplatron.xml2html(this.dictData.entry.content,this.dictData.config.xemplate,this.dictData.config.xema),$("#viewer").html(e),Gmedia.addVoicePublic(this.dictData.entry,this.dictData.config.gapi,this.dictData.config.titling))},onUpdated(){this.initViewer()},onMounted(){this.initViewer()}},template:(e,t,a,n)=>e('<loading-overlay expr1601="expr1601"></loading-overlay><div class="viewer" id="viewer"></div>',[{type:a.IF,evaluate:e=>e.dictData.isEntryLoading,redundantAttribute:"expr1601",selector:"[expr1601]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[{type:t.ATTRIBUTE,name:"fulscreen",evaluate:e=>!1}]}])}]),name:"entry-view"},Yt={css:'app-footer .footer-logos,[is="app-footer"] .footer-logos{ padding: 15px 20px 50px 50px; background: #d9d9d8; } app-footer .footer-copyright,[is="app-footer"] .footer-copyright{ font-weight: 300; padding: 15px 15px 30px 50px; background: #b8b8b8; } app-footer .logolint a,[is="app-footer"] .logolint a{ height: 30px; display: inline-block; vertical-align: middle; } app-footer .logolint a::after,[is="app-footer"] .logolint a::after{ height: 30px; display: inline-block; content: " "; border-right: 1px solid #fff; margin: 0 10px; } app-footer .logolint a img,[is="app-footer"] .logolint a img{ height: 30px; filter: brightness(0) invert(1); } app-footer .logolint a:hover img,[is="app-footer"] .logolint a:hover img{ filter: none; } app-footer .version,[is="app-footer"] .version{ font-weight: 100; }',exports:{},template:(e,t,a,n)=>e('<div class="footer-logos"><div class="logolint"><a target="_blank" href="https://www.muni.cz/" title="Masaryk University"><img class="mulogo" src="img/logo_muni_small.png"/></a><a target="_blank" href="https://www.sketchengine.eu/" title="Sketch Engine"><img class="skelogo" src="img/logo_ske_small.png"/></a></div><div expr1574="expr1574" class="version right white-text"> </div></div><div class="footer-copyright">\n      Lexonomy is developed as part of <a href="https://elex.is/">ELEXIS</a> project.\n      <a class="right" href="https://github.com/elexis-eu/lexonomy" title="GitHub" target="_blank"><img src="img/github.png"/></a></div>',[{expressions:[{type:t.ATTRIBUTE,name:"class",evaluate:e=>"Xpage-footer"}]},{redundantAttribute:"expr1574",selector:"[expr1574]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>["Version: ",window.LEXONOMY_VERSION].join("")}]}]),name:"app-footer"},Wt={css:null,exports:{state:{messageSent:!1,isTokenValid:!1,isLoading:!0,errorMessage:""},onMounted(){this.auth.verifyToken(this.props.token,"recovery").always(e=>{this.update({isLoading:!1,isTokenValid:e&&e.success})})},onKeyUp(e){13==e.keyCode&&this.setPassword()},setPassword(){$("#password").val()&&(this.update({isResetting:!0}),this.auth.resetPassword(this.props.token,$("#password").val()).always(e=>{this.update({isResetting:!1,messageSent:e.success,errorMessage:e.success?"":"Incorrect e-mail."})}))}},template:(e,t,a,n)=>e('<loading-overlay expr1666="expr1666"></loading-overlay><div expr1667="expr1667"></div><div expr1668="expr1668" class="section message messageError"></div><div expr1669="expr1669" class="section message messageError"></div><div expr1670="expr1670"></div>',[{type:a.IF,evaluate:e=>e.state.isLoading||e.state.isResetting,redundantAttribute:"expr1666",selector:"[expr1666]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.IF,evaluate:e=>e.state.messageSent,redundantAttribute:"expr1667",selector:"[expr1667]",template:e('<div class="message messageSuccess">\n         Your password is updated. You can now log in with your e-mail address and password.\n      </div><br/><br/><div class="center-align"><a href="#/" class="btn btn-primary">log in</a></div>',[])},{type:a.IF,evaluate:e=>!e.state.isTokenValid&&!e.state.isLoading,redundantAttribute:"expr1668",selector:"[expr1668]",template:e("\n      This recovery link is invalid. It may have expired or has been used before.\n   ",[])},{type:a.IF,evaluate:e=>e.state.errorMessage,redundantAttribute:"expr1669",selector:"[expr1669]",template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.state.errorMessage].join("")}]}])},{type:a.IF,evaluate:e=>!e.state.messageSent&&e.state.isTokenValid,redundantAttribute:"expr1670",selector:"[expr1670]",template:e('<div class="input-field"><input expr1671="expr1671" id="password" type="password" class="validate"/><label for="password">Your password</label><span class="helper-text">Set your password to access Lexonomy.</span></div><button expr1672="expr1672" class="btn waves-effect waves-light" name="login" id="loginButton">Set password\n         <i class="material-icons right">send</i></button>',[{redundantAttribute:"expr1671",selector:"[expr1671]",expressions:[{type:t.EVENT,name:"onkeyup",evaluate:e=>e.onKeyUp}]},{redundantAttribute:"expr1672",selector:"[expr1672]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.setPassword}]}])}]),name:"forgot-password"},Qt={css:null,exports:{state:{messageSent:!1,errorMessage:"",isResetting:!1},onKeyUp(e){13==e.keyCode&&this.requestResetPassword()},requestResetPassword(e){var t=$("#email").val();t&&(this.update({isResetting:!0}),this.auth.requestResetPassword(t).always(e=>{this.update({isResetting:!1,messageSent:e.success,errorMessage:e.success?"":"Incorrect e-mail."})}))}},template:(e,t,a,n)=>e('<loading-overlay expr1624="expr1624"></loading-overlay><div expr1625="expr1625" class="section message messageSuccess"></div><div expr1626="expr1626" class="section message messageError"></div><div expr1627="expr1627" class="section"></div>',[{type:a.IF,evaluate:e=>e.state.isResetting,redundantAttribute:"expr1624",selector:"[expr1624]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.IF,evaluate:e=>e.state.messageSent,redundantAttribute:"expr1625",selector:"[expr1625]",template:e("\n      We have sent you an e-mail with instructions on how to reset your password.\n   ",[])},{type:a.IF,evaluate:e=>e.state.errorMessage,redundantAttribute:"expr1626",selector:"[expr1626]",template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.state.errorMessage].join("")}]}])},{type:a.IF,evaluate:e=>!e.state.messageSent,redundantAttribute:"expr1627",selector:"[expr1627]",template:e('<div class="input-field"><input expr1628="expr1628" id="email" type="email"/><label for="email">Your e-mail</label><span class="helper-text">If you have forgotten your password, enter your e-mail address and we will send you instructions on how to create a new one.</span></div><div class="buttons"><a href="#/" class="btn btn-secondary waves-effect waves-light">\n            Back\n         </a><button expr1629="expr1629" class="btn waves-effect waves-light" name="login" id="loginButton">Get a new password\n            <i class="material-icons right">send</i></button></div>',[{redundantAttribute:"expr1628",selector:"[expr1628]",expressions:[{type:t.EVENT,name:"onkeyup",evaluate:e=>e.onKeyUp}]},{redundantAttribute:"expr1629",selector:"[expr1629]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.requestResetPassword}]}])}]),name:"forgot"},Zt={css:'app-header .fontSize,[is="app-header"] .fontSize{ display: flex; user-select: none; margin: 0 15px; } app-header .fontSizeArrows,[is="app-header"] .fontSizeArrows{ display: flex; flex-direction: column; align-self: center; } app-header .fontSizeArrows i,[is="app-header"] .fontSizeArrows i{ height: 20px; line-height: 20px; } app-header .brand-logo,[is="app-header"] .brand-logo{ padding: 0 20px 0 40px; } app-header .site-logo,[is="app-header"] .site-logo{ height: 50px; position: relative; top: 20px } app-header .sidenav-trigger i,[is="app-header"] .sidenav-trigger i{ font-size: 36px; } app-header .sideNavSection,[is="app-header"] .sideNavSection{ text-transform: uppercase; color: #767676; border-bottom: 1px solid #e0e0e0; } app-header .sideNavSection span,[is="app-header"] .sideNavSection span{ padding-left: 1rem; } app-header nav,[is="app-header"] nav{ border-bottom: 1px solid black; box-shadow: none; }',exports:{doLogout(e){this.auth.logout()},onIncreaseFontSize(){var e=parseInt($("html").css("font-size").replace("px",""))+1;e<=22&&($("html").css("font-size",e+"px"),document.cookie="fontSize="+e)},onDecreaseFontSize(){var e=parseInt($("html").css("font-size").replace("px",""))-1;14<=e&&($("html").css("font-size",e+"px"),document.cookie="fontSize="+e)},getFontSizeFromCookies(){let e=decodeURIComponent(document.cookie),a=e.split(";");for(let t=0;t<a.length;t++){let e=a[t].trim();if(0==e.indexOf("fontSize="))return e.substring(9,e.length)}return""},onUpdated(){$(".dropdown-trigger").each((e,t)=>{($el=$(t))[0].M_Dropdown&&$el[0].M_Dropdown.destroy(),$el.dropdown({coverTrigger:!1,constrainWidth:!1})})},onBeforeMount(){var e=this.getFontSizeFromCookies();e&&$("html").css("font-size",e+"px")},onMounted(){$(".dropdown-trigger").dropdown({coverTrigger:!1,constrainWidth:!1}),$(".sidenav").sidenav()}},template:(e,t,a,n)=>e('<ul expr1630="expr1630" id="dropdown-menu-dict" class="dropdown-content"></ul><ul expr1642="expr1642" id="dropdown-menu-anon" class="dropdown-content"></ul><ul expr1643="expr1643" id="dropdown-menu-user" class="dropdown-content"></ul><nav class="white"><div class="nav-wrapper"><a href="#" class="brand-logo"><img class="site-logo" src="img/logo_50.png"/></a><span class="fontSize black-text right"><span style="font-size: 15px; position: relative; top: 2px;">A</span><span style="font-size: 22px; margin-right: 10px;">A</span><span class="fontSizeArrows"><i expr1645="expr1645" class="material-icons clickable">arrow_drop_up</i><i expr1646="expr1646" class="material-icons clickable">arrow_drop_down</i></span></span><a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a><ul id="nav-mobile" class="right hide-on-med-and-down"><li expr1647="expr1647"></li><li expr1648="expr1648"></li><li expr1649="expr1649"></li></ul></div></nav><ul class="sidenav"><template expr1651="expr1651"></template><template expr1663="expr1663"></template><template expr1664="expr1664"></template></ul>',[{type:a.IF,evaluate:e=>e.authData.authorized&&e.dictData.isDictionaryLoaded&&e.dictData.userAccess,redundantAttribute:"expr1630",selector:"[expr1630]",template:e('<li expr1631="expr1631"></li><li expr1633="expr1633"></li><li expr1635="expr1635"></li><li expr1637="expr1637"></li><li expr1639="expr1639"></li><li><a expr1641="expr1641">Links</a></li>',[{type:a.IF,evaluate:e=>e.dictData.userAccess.canEdit,redundantAttribute:"expr1631",selector:"[expr1631]",template:e('<a expr1632="expr1632">View</a>',[{redundantAttribute:"expr1632",selector:"[expr1632]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId].join("")}]}])},{type:a.IF,evaluate:e=>e.dictData.userAccess.canEdit,redundantAttribute:"expr1633",selector:"[expr1633]",template:e('<a expr1634="expr1634">Edit</a>',[{redundantAttribute:"expr1634",selector:"[expr1634]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/edit"].join("")}]}])},{type:a.IF,evaluate:e=>e.dictData.userAccess.canConfig,redundantAttribute:"expr1635",selector:"[expr1635]",template:e('<a expr1636="expr1636">Configure</a>',[{redundantAttribute:"expr1636",selector:"[expr1636]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/config"].join("")}]}])},{type:a.IF,evaluate:e=>e.dictData.userAccess.canDownload,redundantAttribute:"expr1637",selector:"[expr1637]",template:e('<a expr1638="expr1638">Download</a>',[{redundantAttribute:"expr1638",selector:"[expr1638]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/download"].join("")}]}])},{type:a.IF,evaluate:e=>e.dictData.userAccess.canUpload,redundantAttribute:"expr1639",selector:"[expr1639]",template:e('<a expr1640="expr1640">Upload</a>',[{redundantAttribute:"expr1640",selector:"[expr1640]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/upload"].join("")}]}])},{redundantAttribute:"expr1641",selector:"[expr1641]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/links"].join("")}]}])},{type:a.IF,evaluate:e=>!e.authData.authorized,redundantAttribute:"expr1642",selector:"[expr1642]",template:e('<li><a href="#/">Log in</a></li><li><a href="#/register">Get an account</a></li><li><a href="#/forgot">Forgot your password?</a></li>',[])},{type:a.IF,evaluate:e=>e.authData.authorized,redundantAttribute:"expr1643",selector:"[expr1643]",template:e('<li><a expr1644="expr1644" href="#/">Log out</a></li><li><a href="#/userprofile">Your profile</a></li>',[{redundantAttribute:"expr1644",selector:"[expr1644]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.doLogout}]}])},{redundantAttribute:"expr1645",selector:"[expr1645]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.onIncreaseFontSize}]},{redundantAttribute:"expr1646",selector:"[expr1646]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.onDecreaseFontSize}]},{type:a.IF,evaluate:e=>e.authData.authorized&&e.dictData.isDictionaryLoaded,redundantAttribute:"expr1647",selector:"[expr1647]",template:e('<a class="dropdown-trigger" href="#/" data-target="dropdown-menu-dict">\n                  Dictionary\n                  <i class="material-icons right">arrow_drop_down</i></a>',[])},{type:a.IF,evaluate:e=>!e.authData.authorized,redundantAttribute:"expr1648",selector:"[expr1648]",template:e('<a class="dropdown-trigger" href="#/" data-target="dropdown-menu-anon">\n                  anonymous user\n                  <i class="material-icons right">arrow_drop_down</i></a>',[])},{type:a.IF,evaluate:e=>e.authData.authorized,redundantAttribute:"expr1649",selector:"[expr1649]",template:e('<a expr1650="expr1650" class="dropdown-trigger" href="#/" data-target="dropdown-menu-user"> <i class="material-icons right">arrow_drop_down</i></a>',[{redundantAttribute:"expr1650",selector:"[expr1650]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.authData.username].join("")}]}])},{type:a.IF,evaluate:e=>e.authData.authorized&&e.dictData.isDictionaryLoaded&&e.dictData.userAccess,redundantAttribute:"expr1651",selector:"[expr1651]",template:e('<li class="sideNavSection"><span>Dictionary</span></li><li expr1652="expr1652"></li><li expr1654="expr1654"></li><li expr1656="expr1656"></li><li expr1658="expr1658"></li><li expr1660="expr1660"></li><li><a expr1662="expr1662">Links</a></li>',[{type:a.IF,evaluate:e=>e.dictData.userAccess.canEdit,redundantAttribute:"expr1652",selector:"[expr1652]",template:e('<a expr1653="expr1653">View</a>',[{redundantAttribute:"expr1653",selector:"[expr1653]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId].join("")}]}])},{type:a.IF,evaluate:e=>e.dictData.userAccess.canEdit,redundantAttribute:"expr1654",selector:"[expr1654]",template:e('<a expr1655="expr1655">Edit</a>',[{redundantAttribute:"expr1655",selector:"[expr1655]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/edit"].join("")}]}])},{type:a.IF,evaluate:e=>e.dictData.userAccess.canConfig,redundantAttribute:"expr1656",selector:"[expr1656]",template:e('<a expr1657="expr1657">Configure</a>',[{redundantAttribute:"expr1657",selector:"[expr1657]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/config"].join("")}]}])},{type:a.IF,evaluate:e=>e.dictData.userAccess.canDownload,redundantAttribute:"expr1658",selector:"[expr1658]",template:e('<a expr1659="expr1659">Download</a>',[{redundantAttribute:"expr1659",selector:"[expr1659]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/download"].join("")}]}])},{type:a.IF,evaluate:e=>e.dictData.userAccess.canUpload,redundantAttribute:"expr1660",selector:"[expr1660]",template:e('<a expr1661="expr1661">Upload</a>',[{redundantAttribute:"expr1661",selector:"[expr1661]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/upload"].join("")}]}])},{redundantAttribute:"expr1662",selector:"[expr1662]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId,"/links"].join("")}]}])},{type:a.IF,evaluate:e=>!e.authData.authorized,redundantAttribute:"expr1663",selector:"[expr1663]",template:e('<li><a href="#/">Log in</a></li><li><a href="#/register">Get an account</a></li><li><a href="#/forgot">Forgot your password?</a></li>',[])},{type:a.IF,evaluate:e=>e.authData.authorized,redundantAttribute:"expr1664",selector:"[expr1664]",template:e('<li class="sideNavSection"><span>User</span></li><li><a expr1665="expr1665" href="#/">Log out</a></li><li><a href="#/userprofile">Your profile</a></li>',[{redundantAttribute:"expr1665",selector:"[expr1665]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.doLogout}]}])}]),name:"app-header"},Jt={css:'login .skelogin,[is="login"] .skelogin{ width: 80px; height: 30px; vertical-align: middle; } login small,[is="login"] small{ position: relative; top: -10px; }',exports:{state:{isLoggingIn:!1,message:""},onKeyUp(e){13==e.keyCode&&this.doLogin()},doLogin(){var e=$("#username").val(),t=$("#password").val();e&&t&&(this.update({isLoggingIn:!0}),this.auth.login(e,t).always(e=>{this.update({isLoggingIn:!1,message:e.success?"":"Incorrect username or password."})}))}},template:(e,t,a,n)=>e('<loading-overlay expr1673="expr1673" fullscreen="1"></loading-overlay><div expr1674="expr1674" class="section message messageError"></div><div class="section"><div class="input-field"><input id="username" type="email" class="validate"/><label for="username">Username</label><small>\n            No account?\n            <a href="#register" tabindex="-1">Sign up</a></small></div><div class="input-field"><input expr1675="expr1675" id="password" type="password"/><label for="password">Password</label><small><a href="#forgot" tabindex="-1">Forgot password?</a></small></div><button expr1676="expr1676" class="btn btn-primary waves-effect waves-light" name="login" id="loginButton">\n         Log in\n         <i class="material-icons right">send</i></button></div><div expr1677="expr1677" class="section"></div>',[{type:a.IF,evaluate:e=>e.state.isLoggingIn,redundantAttribute:"expr1673",selector:"[expr1673]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.IF,evaluate:e=>e.state.message,redundantAttribute:"expr1674",selector:"[expr1674]",template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.state.message].join("")}]}])},{redundantAttribute:"expr1675",selector:"[expr1675]",expressions:[{type:t.EVENT,name:"onkeyup",evaluate:e=>e.onKeyUp}]},{redundantAttribute:"expr1676",selector:"[expr1676]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.doLogin}]},{type:a.IF,evaluate:e=>e.dictData.siteconfig&&e.dictData.siteconfig.sketchengineLoginPage,redundantAttribute:"expr1677",selector:"[expr1677]",template:e('<a expr1678="expr1678" class="btn waves-effect waves-light">Sign up or log in with &nbsp;\n         <img class="skelogin" alt="Sketch Engine" title="Sketch Engine" src="img/logo_ske_white.png"/><i class="material-icons right">send</i></a>',[{redundantAttribute:"expr1678",selector:"[expr1678]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>e.dictData.siteconfig.sketchengineLoginPage+encodeURIComponent(window.location.href)}]}])}]),name:"login"},ea={css:'main-page,[is="main-page"]{ margin-top: 20px; } main-page .resource-list-inline,[is="main-page"] .resource-list-inline{ padding-left: 0; margin-left: -5px; list-style: none; } main-page .resource-list-inline > li,[is="main-page"] .resource-list-inline > li{ display: inline-block; padding-right: 5px; padding-left: 5px; }',exports:null,template:(e,t,a,n)=>e('<div expr1679="expr1679"></div><div expr1686="expr1686" class="row"></div><div class="divider" style="margin-top: 50px;"></div><div expr1693="expr1693" class="section" style="opacity: 0.6;"></div><div class="section" style="opacity: 0.6;"><h3>Reference</h3><p>Měchura, M. B. (2017) ‘<a href="docs/elex2017.pdf">Introducing Lexonomy: an open-source dictionary writing and publishing system</a>’ in <i>Electronic Lexicography in the 21st Century: Lexicography from Scratch. Proceedings of the eLex 2017 conference, 19-21 September 2017, Leiden, The Netherlands.</i><br/><span>If you are referring to Lexonomy from an academic publication, it is recommended that you cite this paper.</span></p></div>',[{type:a.IF,evaluate:e=>e.authData.authorized,redundantAttribute:"expr1679",selector:"[expr1679]",template:e('<template expr1680="expr1680"></template><template expr1682="expr1682"></template>',[{type:a.IF,evaluate:e=>e.dictData.siteconfig.consent&&e.dictData.siteconfig.consent.terms&&!e.authData.consent,redundantAttribute:"expr1680",selector:"[expr1680]",template:e('<user-consent expr1681="expr1681"></user-consent>',[{type:a.TAG,getComponent:n,evaluate:e=>"user-consent",slots:[],attributes:[],redundantAttribute:"expr1681",selector:"[expr1681]"}])},{type:a.IF,evaluate:e=>!e.dictData.siteconfig.consent||!e.dictData.siteconfig.consent.terms||e.authData.consent,redundantAttribute:"expr1682",selector:"[expr1682]",template:e('<dict-list expr1683="expr1683"></dict-list><dict-new expr1684="expr1684"></dict-new><userprofile expr1685="expr1685"></userprofile>',[{type:a.IF,evaluate:e=>"new"!=e.props.mainSubPage&&"userprofile"!=e.props.mainSubPage,redundantAttribute:"expr1683",selector:"[expr1683]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"dict-list",slots:[],attributes:[]}])},{type:a.IF,evaluate:e=>"new"==e.props.mainSubPage,redundantAttribute:"expr1684",selector:"[expr1684]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"dict-new",slots:[],attributes:[]}])},{type:a.IF,evaluate:e=>"userprofile"==e.props.mainSubPage,redundantAttribute:"expr1685",selector:"[expr1685]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"userprofile",slots:[],attributes:[{type:t.ATTRIBUTE,name:"user-info",evaluate:e=>e.authData}]}])}])}])},{type:a.IF,evaluate:e=>!e.authData.authorized,redundantAttribute:"expr1686",selector:"[expr1686]",template:e('<div class="col m7 s12"><welcome expr1687="expr1687"></welcome></div><div class="col m5 s12"><login expr1688="expr1688"></login><register expr1689="expr1689"></register><register-password expr1690="expr1690"></register-password><forgot expr1691="expr1691"></forgot><forgot-password expr1692="expr1692"></forgot-password></div>',[{type:a.TAG,getComponent:n,evaluate:e=>"welcome",slots:[],attributes:[],redundantAttribute:"expr1687",selector:"[expr1687]"},{type:a.IF,evaluate:e=>"login"==e.props.mainSubPage,redundantAttribute:"expr1688",selector:"[expr1688]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"login",slots:[],attributes:[]}])},{type:a.IF,evaluate:e=>"register"==e.props.mainSubPage,redundantAttribute:"expr1689",selector:"[expr1689]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"register",slots:[],attributes:[]}])},{type:a.IF,evaluate:e=>"registerPassword"==e.props.mainSubPage,redundantAttribute:"expr1690",selector:"[expr1690]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"register-password",slots:[],attributes:[{type:t.ATTRIBUTE,name:"token",evaluate:e=>e.props.token}]}])},{type:a.IF,evaluate:e=>"forgot"==e.props.mainSubPage,redundantAttribute:"expr1691",selector:"[expr1691]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"forgot",slots:[],attributes:[]}])},{type:a.IF,evaluate:e=>"forgotPassword"==e.props.mainSubPage,redundantAttribute:"expr1692",selector:"[expr1692]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"forgot-password",slots:[],attributes:[{type:t.ATTRIBUTE,name:"token",evaluate:e=>e.props.token}]}])}])},{type:a.IF,evaluate:e=>e.authData.authorized,redundantAttribute:"expr1693",selector:"[expr1693]",template:e('<h3>Resources</h3><ul class="resource-list-inline"><li><a href="#/docs/intro">Gentle introduction to Lexonomy</a></li><li><a href="#/opendictionaries">Public dictionaries</a></li></ul>',[])}]),name:"main-page"},ta={css:null,exports:{bindings:[["store","isPublicDictionaryListLoadingChanged","update"]],state:{visibleDictionaries:[],language:"",query:""},loadData(){this.store.loadPublicDictionaryList().done(e=>{this.state.visibleDictionaries=this.dictData.publicDictionaryList}).always(()=>{this.update({isLoading:!1}),this.initializeLanguageSelect(),$("#search").focus()})},onSearchInput(e){this.state.query=e.target.value,this.filter()},onLanguageChange(e){this.state.language=e.target.value,this.filter()},filter(){if(this.dictData.publicDictionaryList.forEach(e=>{delete e.h_title,delete e.h_lang,delete e.h_author,delete e.h_licence}),this.state.visibleDictionaries=this.dictData.publicDictionaryList,this.state.language&&(this.state.visibleDictionaries=this.state.visibleDictionaries.filter(e=>e.lang==this.state.language)),""!==this.state.query){let e=FuzzySort.go(this.state.query,this.state.visibleDictionaries,{key:"id",keys:["title","lang","author","licence"]});this.state.visibleDictionaries=e.map(e=>(e.obj.h_title=FuzzySort.highlight(e[0],'<b class="red-text">',"</b>"),e.obj.h_lang=FuzzySort.highlight(e[1],'<b class="red-text">',"</b>"),e.obj.h_author=FuzzySort.highlight(e[2],'<b class="red-text">',"</b>"),e.obj.h_licence=FuzzySort.highlight(e[3],'<b class="red-text">',"</b>"),e.obj.score=e.score,e.obj)).sort((e,t)=>e.score==t.score?e.title.localeCompare(t.title):Math.sign(t.score-e.score))}this.update(),this.highlightOccurrences()},highlightOccurrences(){let a,n;this.state.visibleDictionaries.forEach((e,t)=>{(n=this.$("#r_"+t))&&((a=this.$("#t_"+t)).innerHTML=e.h_title||a.innerHTML.replace(/<b class="red-text">|<\/b>/g,""),(a=this.$("#l_"+t)).innerHTML=e.h_lang||a.innerHTML.replace(/<b class="red-text">|<\/b>/g,""),(a=this.$("#a_"+t)).innerHTML=e.h_author||a.innerHTML.replace(/<b class="red-text">|<\/b>/g,""),(a=this.$("#i_"+t)).innerHTML=e.h_licence||a.innerHTML.replace(/<b class="red-text">|<\/b>/g,""))},this)},initializeLanguageSelect(){$("#languageSelect").formSelect({dropdownOptions:{constrainWidth:!1}}).on("change",this.onLanguageChange)},onBeforeMount(){this.dictData.isPublicDictionaryListLoaded?this.state.visibleDictionaries=this.dictData.publicDictionaryList:this.loadData()},onMounted(){this.dictData.isPublicDictionaryListLoaded&&this.initializeLanguageSelect()}},template:(e,t,a,n)=>e('<h1>Open dictionaries</h1><loading-overlay expr1703="expr1703"></loading-overlay><div expr1704="expr1704"></div>',[{type:a.IF,evaluate:e=>e.dictData.isPublicDictionaryListLoading,redundantAttribute:"expr1703",selector:"[expr1703]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.IF,evaluate:e=>!e.dictData.isPublicDictionaryListLoading,redundantAttribute:"expr1704",selector:"[expr1704]",template:e('<div><div class="input-field" style="display: inline-block; margin-right: 40px;"><i class="material-icons prefix grey-text">search</i><input expr1705="expr1705" id="search" type="text" style="width: 200px;"/><label for="search">Find</label></div><div class="input-field" style="display: inline-block;"><i class="material-icons prefix grey-text">translate</i><select id="languageSelect" style="width: 200px;"><option value>All languages</option><option expr1706="expr1706"></option></select><label>Language</label></div></div><div expr1707="expr1707" class="center" style="margin: 20vh auto;"></div><table expr1708="expr1708" class="striped highlight" style="margin: 0 15px;"></table>',[{redundantAttribute:"expr1705",selector:"[expr1705]",expressions:[{type:t.EVENT,name:"oninput",evaluate:e=>e.onSearchInput}]},{type:a.EACH,getKey:null,condition:null,template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.language},{type:t.ATTRIBUTE,name:"value",evaluate:e=>e.language}]}]),redundantAttribute:"expr1706",selector:"[expr1706]",itemName:"language",indexName:null,evaluate:e=>e.dictData.publicDictionaryLanguageList},{type:a.IF,evaluate:e=>!e.state.visibleDictionaries.length,redundantAttribute:"expr1707",selector:"[expr1707]",template:e('<h1 class="grey-text lighten-2">Nothing found</h1>',[])},{type:a.IF,evaluate:e=>e.state.visibleDictionaries.length,redundantAttribute:"expr1708",selector:"[expr1708]",template:e('<thead><th>Title</th><th>Language</th><th>Size</th><th>Author</th><th>Licence</th><th></th></thead><tbody><tr expr1709="expr1709"></tr></tbody>',[{type:a.EACH,getKey:null,condition:null,template:e('<td><a expr1710="expr1710"><span expr1711="expr1711"> </span></a></td><td><span expr1712="expr1712"> </span></td><td><span expr1713="expr1713"> </span></td><td><span expr1714="expr1714"> </span></td><td><span expr1715="expr1715"> </span></td><td><a expr1716="expr1716" title="edit dictionary"></a></td>',[{expressions:[{type:t.ATTRIBUTE,name:"id",evaluate:e=>["r_",e.idx].join("")}]},{redundantAttribute:"expr1710",selector:"[expr1710]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.row.id].join("")}]},{redundantAttribute:"expr1711",selector:"[expr1711]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.row.title].join("")},{type:t.ATTRIBUTE,name:"id",evaluate:e=>["t_",e.idx].join("")}]},{redundantAttribute:"expr1712",selector:"[expr1712]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.row.lang].join("")},{type:t.ATTRIBUTE,name:"id",evaluate:e=>["l_",e.idx].join("")}]},{redundantAttribute:"expr1713",selector:"[expr1713]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.row.size].join("")},{type:t.ATTRIBUTE,name:"id",evaluate:e=>["l_",e.idx].join("")}]},{redundantAttribute:"expr1714",selector:"[expr1714]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.row.author].join("")},{type:t.ATTRIBUTE,name:"id",evaluate:e=>["a_",e.idx].join("")}]},{redundantAttribute:"expr1715",selector:"[expr1715]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.row.licence].join("")},{type:t.ATTRIBUTE,name:"id",evaluate:e=>["i_",e.idx].join("")}]},{type:a.IF,evaluate:e=>e.row.isAdmin,redundantAttribute:"expr1716",selector:"[expr1716]",template:e('<i class="material-icons">edit</i>',[{expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.row.id,"/edit"].join("")}]}])}]),redundantAttribute:"expr1709",selector:"[expr1709]",itemName:"row",indexName:"idx",evaluate:e=>e.state.visibleDictionaries}])}])}]),name:"open-dict-list"},aa={css:null,exports:{state:{messageSent:!1,tokenValid:!1,errorMessage:"",isCheckingToken:!0,isRegisteringPassword:!1},onMounted(){this.auth.verifyToken(this.props.token,"register").done(e=>{e.success&&(this.state.tokenValid=!0)}).always(()=>{this.update({isCheckingToken:!1})})},onKeyUp(e){13==e.keyCode&&this.registerPassword()},registerPassword(e){var t=$("#password").val();t&&(this.update({isRegisteringPassword:!0}),this.auth.registerPassword(this.props.token,t).always(e=>{this.update({messageSent:e.success,errorMessage:e.success?"":e.errorMessage,isRegisteringPassword:!1})}))}},template:(e,t,a,n)=>e('<loading-overlay expr1694="expr1694"></loading-overlay><div expr1695="expr1695"></div><div expr1698="expr1698" class="row"></div><div expr1699="expr1699" class="row"></div><div expr1700="expr1700" class="row"></div><div expr1701="expr1701" class="row"></div>',[{type:a.IF,evaluate:e=>e.state.isRegisteringPassword,redundantAttribute:"expr1694",selector:"[expr1694]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.IF,evaluate:e=>!e.state.messageSent&&e.state.tokenValid,redundantAttribute:"expr1695",selector:"[expr1695]",template:e('<div class="row"><div class="input-field col s12"><input expr1696="expr1696" id="password" type="password" class="validate"/><label for="password">Your password</label><span class="helper-text">Set your password to access Lexonomy.</span></div></div><div class="row"><button expr1697="expr1697" class="btn waves-effect waves-light" name="login">Set password\n            <i class="material-icons right">send</i></button></div>',[{redundantAttribute:"expr1696",selector:"[expr1696]",expressions:[{type:t.EVENT,name:"onkeypress",evaluate:e=>e.onKeyUp}]},{redundantAttribute:"expr1697",selector:"[expr1697]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.registerPassword}]}])},{type:a.IF,evaluate:e=>!e.state.tokenValid&&!e.state.isCheckingToken,redundantAttribute:"expr1698",selector:"[expr1698]",template:e('<div class="col s12"><div class="card red darken-2"><div class="card-content white-text"><p>This signup link is invalid. It may have expired or has been used before.</p></div></div></div>',[])},{type:a.IF,evaluate:e=>e.state.isCheckingToken,redundantAttribute:"expr1699",selector:"[expr1699]",template:e("<p>Validating signup token...</p>",[])},{type:a.IF,evaluate:e=>e.state.messageSent,redundantAttribute:"expr1700",selector:"[expr1700]",template:e('<p>We have created your account. You can now <a href="#/">log in</a> with your e-mail address and password.</p>',[])},{type:a.IF,evaluate:e=>""!=e.state.errorMessage,redundantAttribute:"expr1701",selector:"[expr1701]",template:e('<div class="col s6"><div class="card red darken-2"><div class="card-content white-text"><p expr1702="expr1702"> </p></div></div></div>',[{redundantAttribute:"expr1702",selector:"[expr1702]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.errorMessage}]}])}]),name:"register-password"},na={css:null,exports:{state:{messageSent:!1,errorMessage:"",isRegistering:!1},onKeyUp(e){13==e.keyCode&&this.doRegister()},doRegister(){var e=$("#email").val();e&&(this.update({isRegistering:!0}),this.auth.register(e).always(e=>{this.update({messageSent:e.success,errorMessage:e.success?"":"Incorrect e-mail.",isRegistering:!1})}))}},template:(e,t,a,n)=>e('<loading-overlay expr1717="expr1717" fullscreen="1"></loading-overlay><div expr1718="expr1718" class="section message messageSuccess"></div><div expr1719="expr1719" class="section message messageError"></div><div expr1720="expr1720" class="section"></div>',[{type:a.IF,evaluate:e=>e.state.isRegistering,redundantAttribute:"expr1717",selector:"[expr1717]",template:e(null,[{type:a.TAG,getComponent:n,evaluate:e=>"loading-overlay",slots:[],attributes:[]}])},{type:a.IF,evaluate:e=>e.state.messageSent,redundantAttribute:"expr1718",selector:"[expr1718]",template:e("<p>We have sent you an e-mail with instructions on how to create a new account.</p>",[])},{type:a.IF,evaluate:e=>e.state.errorMessage,redundantAttribute:"expr1719",selector:"[expr1719]",template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.state.errorMessage].join("")}]}])},{type:a.IF,evaluate:e=>!e.state.messageSent,redundantAttribute:"expr1720",selector:"[expr1720]",template:e('<div class="input-field"><input expr1721="expr1721" id="email" type="email" class="validate"/><label for="email">Your e-mail</label><span class="helper-text">To get a new account, enter your e-mail address and we will send you instructions.</span></div><div class="buttons"><a href="#/" class="btn btn-secondary waves-effect waves-light">\n            Back\n         </a><button expr1722="expr1722" class="btn waves-effect waves-light" name="login" id="loginButton">Register\n            <i class="material-icons right">send</i></button></div>',[{redundantAttribute:"expr1721",selector:"[expr1721]",expressions:[{type:t.EVENT,name:"onkeyup",evaluate:e=>e.onKeyUp}]},{redundantAttribute:"expr1722",selector:"[expr1722]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.doRegister}]}])}]),name:"register"},ia={css:null,exports:{state:{passMessage:"",apiMessage:"",skeuserMessage:"",skeapiMessage:""},onMounted(){M.updateTextFields()},doChangePass(e){""!=$("#password").val()&&$.post(window.API_URL+"changepwd.json",{password:$("#password").val()},e=>{e.success?this.passMessage="Password changed.":this.passMessage="There was an error saving the password.",this.update()})},doChangeUser(e){""!=$("#skeusername").val()&&$.post(window.API_URL+"changeskeusername.json",{ske_userName:$("#skeusername").val()},e=>{e.success?this.state.skeuserMessage="Username changed.":this.state.skeuserMessage="There was an error saving the username.",this.update()})},doChangeKey(e){""!=$("#skeapi").val()&&$.post(window.API_URL+"changeskeapi.json",{ske_apiKey:$("#skeapi").val()},e=>{e.success?this.state.skeapiMessage="API key changed.":this.state.skeapiMessage="There was an error saving the API key.",this.update()})},doNewKey(e){var t=this.generateKey();$.post(window.API_URL+"changeoneclickapi.json",{apiKey:t},e=>{e.success?(this.state.apiMessage="API key changed.",this.authData.apiKey=t):this.state.apiMessage="There was an error saving the API key.",this.update()})},doDeleteKey(e){$.post(window.API_URL+"changeoneclickapi.json",{apiKey:""},e=>{e.success?(this.state.apiMessage="API key deleted.",this.authData.apiKey=""):this.state.apiMessage="There was an error saving the API key.",this.update()})},generateKey(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="";t.length<32;)t+=e[Math.floor(Math.random()*e.length)];return t}},template:(e,t,a,n)=>e('<h1>Account settings</h1><div expr1723="expr1723" class="row"></div><div class="row"><label>Sketch Engine API key</label><p expr1733="expr1733"></p><p expr1734="expr1734"></p><div class="input-field" style="margin-top: 0;"><div style="display: flex; gap: 10px; align-items: center;"><input expr1736="expr1736" id="skeapi" type="text" class="validate" style="width: 350px;"/><button expr1737="expr1737" class="btn waves-effect waves-light" style="margin-bottom: 10px;">Change API key\n               <i class="material-icons right">send</i></button></div><span class="helper-text">Set your API key for Sketch Engine.</span></div></div><div class="row"><p expr1738="expr1738"> </p><label>Lexonomy API key</label><div class="input-field" style="margin-top: 0;"><div style="display: flex; gap: 10px; align-items: center;"><input expr1739="expr1739" type="text" disabled style="width: 350px;"/><button expr1740="expr1740" class="btn waves-effect waves-light" style="margin-bottom: 10px;">\n               Generate new API key\n               <i class="material-icons right">autorenew</i></button><button expr1741="expr1741" class="btn waves-effect waves-light" style="margin-bottom: 10px;">\n               Remove API key\n               <i class="material-icons right">delete</i></button></div><span class="helper-text">This key allows external tools such as Sketch Engine to create a dictionary in your account and to populate it with pre-generated entries.</span></div></div><div class="row"><p expr1742="expr1742"> </p><label>New password</label><div class="input-field" style="margin-top: 0;"><div style="display: flex; gap: 10px; align-items: center;"><input id="password" type="password" class="validate" style="width: 350px;"/><button expr1743="expr1743" class="btn waves-effect waves-light" style="margin-bottom: 10px;">Change password\n               <i class="material-icons right">send</i></button></div><span class="helper-text">Set your password to access Lexonomy.</span></div></div><div><a class="btn" href="#/" onclick="window.history.back()">Back</a></div>',[{type:a.IF,evaluate:e=>e.dictData.siteconfig&&!e.dictData.isSiteconfigLoading,redundantAttribute:"expr1723",selector:"[expr1723]",template:e('<label>Sketch Engine login</label><div expr1724="expr1724"></div><div expr1727="expr1727"></div><div expr1729="expr1729"></div>',[{type:a.IF,evaluate:e=>e.dictData.siteconfig.sketchengineLoginPage&&e.authData.ske_username,redundantAttribute:"expr1724",selector:"[expr1724]",template:e('<p>Your Lexonomy account is linked to your Sketch Engine account <b expr1725="expr1725"> </b><br/><a expr1726="expr1726">Link to a different Sketch Engine account&nbsp;»</a></p>',[{redundantAttribute:"expr1725",selector:"[expr1725]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.authData.ske_username}]},{redundantAttribute:"expr1726",selector:"[expr1726]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>e.dictData.siteconfig.sketchengineLoginPage}]}])},{type:a.IF,evaluate:e=>e.dictData.siteconfig.sketchengineLoginPage&&!e.authData.ske_username,redundantAttribute:"expr1727",selector:"[expr1727]",template:e('<p><strong>Sketch Engine login</strong></p><p><a expr1728="expr1728">Link Lexonomy to your Sketch Engine account&nbsp;»</a></p>',[{redundantAttribute:"expr1728",selector:"[expr1728]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>e.dictData.siteconfig.sketchengineLoginPage}]}])},{type:a.IF,evaluate:e=>!e.dictData.siteconfig.sketchengineLoginPage,redundantAttribute:"expr1729",selector:"[expr1729]",template:e('<p expr1730="expr1730"></p><div class="input-field" style="margin-top: 0;"><div style="display: flex; gap: 10px; align-items: center;"><input expr1731="expr1731" id="skeusername" type="text" class="validate" style="width: 350px;"/><button expr1732="expr1732" class="btn waves-effect waves-light" style="margin-bottom: 10px;">Change username\n                  <i class="material-icons right">send</i></button></div><span class="helper-text">Set your login username to Sketch Engine.</span></div>',[{type:a.IF,evaluate:e=>""!=e.state.skeuserMessage,redundantAttribute:"expr1730",selector:"[expr1730]",template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.skeuserMessage}]}])},{redundantAttribute:"expr1731",selector:"[expr1731]",expressions:[{type:t.VALUE,evaluate:e=>e.authData.ske_username}]},{redundantAttribute:"expr1732",selector:"[expr1732]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.doChangeUser}]}])}])},{type:a.IF,evaluate:e=>e.state.skeapiMessage,redundantAttribute:"expr1733",selector:"[expr1733]",template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.skeapiMessage}]}])},{type:a.IF,evaluate:e=>e.dictData.siteconfig.sketchengineLoginPage,redundantAttribute:"expr1734",selector:"[expr1734]",template:e('\n         Unless you need special setup, Please, <a expr1735="expr1735">login via Sketch Engine</a> to set API key automatically.\n      ',[{redundantAttribute:"expr1735",selector:"[expr1735]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>e.dictData.siteconfig.sketchengineLoginPage}]}])},{redundantAttribute:"expr1736",selector:"[expr1736]",expressions:[{type:t.VALUE,evaluate:e=>e.authData.ske_apiKey}]},{redundantAttribute:"expr1737",selector:"[expr1737]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.doChangeKey}]},{redundantAttribute:"expr1738",selector:"[expr1738]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.apiMessage}]},{redundantAttribute:"expr1739",selector:"[expr1739]",expressions:[{type:t.VALUE,evaluate:e=>e.authData.apiKey||"not set"}]},{redundantAttribute:"expr1740",selector:"[expr1740]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.doNewKey}]},{redundantAttribute:"expr1741",selector:"[expr1741]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.doDeleteKey}]},{redundantAttribute:"expr1742",selector:"[expr1742]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.state.passMessage}]},{redundantAttribute:"expr1743",selector:"[expr1743]",expressions:[{type:t.EVENT,name:"onclick",evaluate:e=>e.doChangePass}]}]),name:"userprofile"},ra={css:'welcome ul li,[is="welcome"] ul li{padding-top: 1em;}',exports:null,template:(e,t,a,n)=>e('<div class="welcome"><h3>Welcome to <strong>Lexonomy</strong>, a cloud-based, open-source platform for writing and publishing dictionaries.</h3><ul><li><a href="#/docs/intro">Gentle introduction to Lexonomy</a><br/>A short and sweet guided tour of Lexonomy for beginners.</li><li><a href="docs/elex2017.pdf">Introducing Lexonomy: an open-source dictionary writing and publishing system&nbsp;<span class="pdf">PDF</span></a><br/>A conference paper offering a detailed review of Lexonomy\'s features.</li><li><a href="#/opendictionaries">Public dictionaries</a><br/>Have a look at publicly available dictionaries created with Lexonomy.</li></ul></div>',[]),name:"welcome"},sa={css:'loading-overlay .overlay,[is="loading-overlay"] .overlay{ position: absolute; top: 0; right: 0; bottom: 0; left: 0; background-color: rgba(255, 255, 255, 0.7); z-index: 999999999; } loading-overlay .overlay.fullscreen,[is="loading-overlay"] .overlay.fullscreen{ position: fixed; } loading-overlay #loading-bar-spinner.spinner,[is="loading-overlay"] #loading-bar-spinner.spinner{ left: 50%; margin-left: -30px; top: 40%; position: absolute; z-index: 999999999 !important; animation: loading-bar-spinner 400ms linear infinite; } loading-overlay #loading-bar-spinner.spinner .spinner-icon,[is="loading-overlay"] #loading-bar-spinner.spinner .spinner-icon{ width: 60px; height: 60px; border: solid 1px transparent; border-top-color: #000000 !important; border-left-color: #000000 !important; border-radius: 50%; } @keyframes loading-bar-spinner { 0% { transform: rotate(0deg); transform: rotate(0deg); } 100% { transform: rotate(360deg); transform: rotate(360deg); } }',exports:null,template:(e,t,a,n)=>e('<div expr1744="expr1744"><div id="loading-bar-spinner" class="spinner"><div class="spinner-icon"></div></div></div>',[{redundantAttribute:"expr1744",selector:"[expr1744]",expressions:[{type:t.ATTRIBUTE,name:"class",evaluate:e=>["overlay ",e.props.fullscreen?"fullscreen":""].join("")}]}]),name:"loading-overlay"};I("api",S),I("dict-config-autonumber",N),I("dict-config-download",gt),I("dict-config-editing",vt),I("dict-config-flagging",yt),I("dict-config-gapi",ft),I("dict-config-ident",bt),I("dict-config-kontext",wt),I("dict-config-links",kt),I("dict-nav",{css:null,exports:{getLink(e){var t="#";this.dictData.dictId&&(t+="/"+this.dictData.dictId);for(var a=0;a<=e;a++)t+="/"+this.props.links[a][0];return t}},template:(e,t,a,n)=>e('<nav class="nav-breadcrumbs"><div class="nav-wrapper"><a expr1320="expr1320" class="breadcrumb">Dictionaries</a><a expr1321="expr1321" class="breadcrumb"></a><a expr1322="expr1322" class="breadcrumb"></a></div></nav>',[{redundantAttribute:"expr1320",selector:"[expr1320]",expressions:[{type:t.ATTRIBUTE,name:"href",evaluate:e=>e.authData.authorized?"#/":"#/opendictionaries"}]},{type:a.IF,evaluate:e=>e.dictData.dictId,redundantAttribute:"expr1321",selector:"[expr1321]",template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.dictData.title},{type:t.ATTRIBUTE,name:"href",evaluate:e=>["#/",e.dictData.dictId].join("")}]}])},{type:a.EACH,getKey:null,condition:e=>e.props.links&&e.props.links.length,template:e(" ",[{expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>e.link[1]},{type:t.ATTRIBUTE,name:"href",evaluate:e=>e.getLink(e.idx)}]}]),redundantAttribute:"expr1322",selector:"[expr1322]",itemName:"link",indexName:"idx",evaluate:e=>e.props.links}]),name:"dict-nav"}),I("dict-entry-filter",Tt),I("dict-config-buttons",Et),I("dict-config-publico",At),I("dict-config-searchability",It),I("dict-config-ske",St),I("dict-config-subbing",Ct),I("dict-config",Dt),I("dict-config-titling",$t),I("dict-config-url",Lt),I("dict-config-users",Nt),I("dict-config-xema",Ut),I("dict-config-xema-element",_t),I("dict-config-xema-attribute",Xt),I("dict-config-element-in-tree",Bt),I("dict-config-attribute-in-tree",Rt),I("dict-config-xemplate",Mt),I("dict-download",Ft),I("dict-edit-entry",jt),I("dict-edit",Pt),I("dict-list",Ot),I("dict-new",Vt),I("dict-public-entry",Kt),I("dict-public",Ht),I("dict-upload",zt),I("dict-links",Gt),I("e404",{css:null,exports:null,template:(e,t,a,n)=>e('<div class="container">\n    Page not found\n  </div>',[]),name:"e404"}),I("entry-view",qt),I("app-footer",Yt),I("forgot-password",Wt),I("forgot",Qt),I("app-header",Zt),I("login",Jt),I("main-page",ea),I("main",i),I("open-dict-list",ta),I("register-password",aa),I("register",na),I("userprofile",ia),I("welcome",ra),I("user-consent",{css:null,exports:{doConsent(){this.auth.consent()}},template:(e,t,a,n)=>e('<div expr1745="expr1745"></div>',[{type:a.IF,evaluate:e=>e.dictData.siteconfig,redundantAttribute:"expr1745",selector:"[expr1745]",template:e('<h1>Terms of use</h1><div class="row"><div class="col"><raw-html expr1746="expr1746"></raw-html></div></div><div class="row"><div class="col"><button expr1747="expr1747" class="btn waves-effect waves-light"> <i class="material-icons right">check</i></button></div></div>',[{type:a.TAG,getComponent:n,evaluate:e=>"raw-html",slots:[],attributes:[{type:t.ATTRIBUTE,name:"content",evaluate:e=>e.dictData.siteconfig.consent.terms}],redundantAttribute:"expr1746",selector:"[expr1746]"},{redundantAttribute:"expr1747",selector:"[expr1747]",expressions:[{type:t.TEXT,childNodeIndex:0,evaluate:e=>[e.dictData.siteconfig.consent.confirm].join("")},{type:t.EVENT,name:"onclick",evaluate:e=>e.doConsent}]}])}]),name:"user-consent"}),I("raw-html",{css:null,exports:{upd(){this.root.innerHTML=this.props.content},onMounted(){this.upd()},onUpdated(){this.upd()}},template:(e,t,a,n)=>e(null,[{expressions:[{type:t.ATTRIBUTE,name:"class",evaluate:e=>"raw-html"}]}]),name:"raw-html"}),I("loading-overlay",sa),I("docs-intro",{css:null,exports:null,template:(e,t,a,n)=>e('<div><h1>Gentle introduction to Lexonomy</h1><p><em>Lexonomy</em> is a free tool for writing and publishing\n      dictionaries and other dictionary-like things. Lexonomy runs in your web\n      browser and all data is stored on the server, so you don\'t have to\n      install anything on your computer. This page will give you a brief\n      introduction to Lexonomy, showing you how to create a simple dictionary\n      and how to publish it on the web.</p><h2>Registration</h2><h3>Creating an account</h3><p>To use Lexonomy, you first need to sign up for a Lexonomy account. For that, you need to click on Get an account on the home page, provide your email address (which will be your username) and the password will be sent to you. <a href="/signup/">Go here</a> to sign up for an account. Alternatively, you can log in with your Sketch Engine account (not available on local installations). Once you have a Lexonomy account, you can login using your email and password.</p><h3>Changing your password</h3><p>Once logged in, you can click on your username in the top right hand corner of the screen and open the menu. Select “Your profile” and at the bottom, there is an option for changing your password. Type in your new password and click “Change”.</p><h3>Forgot your password?</h3><p>If you forgot your password, click on the “Forgot your password?” link on the Lexonomy homepage, type in the email address you used when signing up and you will receive instructions on how to create a new password.</p><h2>Creating a new dictionary</h2><p>When you\'re logged in, the Lexonomy home page has a section titled <em>Your dictionaries</em>. That section is empty at first but there is a link to create a new dictionary.</p><p><img alt="Screenshot" src="/docs/01-01.png" width="90%"/></p><p>Don\'t be shy about creating a new dictionary, you will always be able to delete it later and you can create as many as you want. Also, your dictionary will not be publicly visible until you decide you want it to be.</p><p><img alt="Screenshot" src="/docs/01-02.png" width="90%"/></p><p>You have to give your dictionary a title and each new dictionary is automatically assigned a URL. This URL will be your dictionary’s address on the web. It can be changed later in the Configure settings.</p><h3>Creating a dictionary from a template</h3><p>Finally, you have to choose whether you want to create a dictionary from a template or not. If this is your first time doing this, it is recommended that you select a template in the drop-down list. There are two templates, i.e. <em>simple monolingual dictionary</em> and <em>simple bilingual dictionary</em>.</p><p><img alt="Screenshot" src="/docs/01-03.png" width="90%"/></p><p>Voilà, your dictionary is ready! Click the URL to go to its homepage.</p><h3>Creating a dictionary without a template</h3><p>It is also possible to use your own XML schema. In that case you chose the option none under template. See the section on <em>configuring your dictionary</em> on how to use your own XML schema.</p><h3>Cloning an existing dictionary</h3><p>You can also use an existing dictionary as a template. If you hover over an existing dictionary, two options appear behind it, i.e. delete and clone. By clicking on clone, a clone of the dictionary of your choice will be created and it will appear in the list of <em>Your dictionaries</em> under the dictionary that you have cloned.</p><h2>Editing entries</h2><p>Click the <em>Edit</em> link on your dictionary\'s homepage and you will be taken to Lexonomy\'s editing interface. This is where you create and edit entries.</p><p><img alt="Screenshot" src="/docs/02-01.png" width="90%"/></p><p>There is a list of entries on the left-hand side. If you had selected a template while creating your dictionary, you will see one or two sample entries here that have been created for you automatically. You can delete the sample entries if you want, and you can create as many new entries as you want. There is no upper limit to the number of entries your dictionary can contain. But for now, click one of the sample entries to see it displayed.</p><p><img alt="Screenshot" src="/docs/02-02.png" width="90%"/></p><p>What you\'re looking at here is a pretty-printed rendering of the entry. This is what it will look like if you decide to make your dictionary public on the Lexonomy server later. To edit the entry, click the <em>Edit</em> button at the top.</p><p><img alt="Screenshot" src="/docs/02-03.png" width="90%"/></p><p>Now it gets interesting! What you have here is the underlying structure of the entry, with things like headwords and senses and parts of speech marked up explicitly with XML (Extensible Markup Language).  Note that by default there are two editing views, a Nerd view and a Laic view. You can easily switch between the two views by clicking on the icons at the bottom of the editing screen. The Laic view may be slightly more user-friendly if you’re not used to working with XML.</p><p>You don\'t need to be an XML expert to use Lexonomy, but you do need to understand that every entry in Lexonomy is a small XML document which consists of <strong>elements</strong>. Each element has a name such as <code>headword</code> and consists of an <strong>opening tag</strong> such as <code>&lt;headword&gt;</code>, a <strong>closing tag</strong> such as <code>&lt;/headword&gt;</code>, and text or other elements between them. The tags are there to tell us what the various pieces of text mean. You can click on any piece of text between tags and a textbox will appear allowing you to change it.</p><p><img alt="Screenshot" src="/docs/02-04.png" width="90%"/></p><p>Sometimes, when you click on a piece of text between tags, you will be given a choice from a list instead of a free-form textbox. This is because Lexonomy knows what is supposed to go inside each element and acts accordingly.</p><p><img alt="Screenshot" src="/docs/02-05.png" width="90%"/></p><p>If you do something Lexonomy doesn\'t like, such as leaving the text inside an element blank, Lexonomy will tell you by displaying a little warning triangle. You can click the warning triangle to read a description of the error.</p><p><img alt="Screenshot" src="/docs/02-06.png" width="90%"/></p><p>Besides clicking on text, you can click on the element names themselves. A menu will come up listing all the actions you can perform on that element. This is how you add new examples to senses (more accurately: new <code>example</code> elements inside <code>sense</code> elements) and so on.</p><p><img alt="Screenshot" src="/docs/02-07.png" width="90%"/></p><p>Notice how Lexonomy always only offers you choices that "make sense": it lets you add new examples inside senses but not inside other elements, and so on. This is because, again, Lexonomy knows what an entry is supposed to be structured like and makes sure the structure is always adhered to. This may sound limiting but it isn\'t, it promotes consistency: all your entries will be guaranteed to have the same structure. And besides, you can decide yourself what the structure is supposed to be. That\'s what we will get to next, so keep on reading.</p><h2>Configuring your dictionary</h2><p>Click the <em>Configure</em> link and Lexonomy will take you to its configuration interface. This is where you can set up various things that affect the entire dictionary, i.e. <strong>Dictionary settings</strong>, <strong>Entry settings</strong>, <strong>Publishing</strong>, <strong>External data sources</strong>.</p><p><img alt="Screenshot" src="/docs/03-01.png" width="90%"/></p><h3>Dictionary settings</h3><h4>Name and description</h4><p>This setting allows you to change the name of your dictionary, and provide its description (e.g. size, last time of update, authors, how to reference it etc.). You can use more advanced presentation format with MarkDown. Don\'t forget to click the <em>Save</em> button if you change anything here!</p><p><img alt="Screenshot" src="/docs/03-02.png" width="90%"/></p><h4>Users</h4><p>Another thing you have control over is who has access to the dictionary and who can make changes there, beside yourself. This can be found under <em>Users</em>. You will see your own e-mail address listed there. This means that you have access to this dictionary. To add another user, type their e-mail address into the text box and click <em>Add</em>, and then select the level of access for them:</p><ul><li>Edit: they will be able to edit the dictionary entries.</li><li>Configure: they will be able to enter Configure options.</li><li>Download: they will be able to download dictionary entries.</li><li>Upload: they will be able to upload new entries.</li></ul><p>Be careful about <em>Configure:</em> users who have access to this can do what you\'re doing now, which means they could even remove you as a user or downgrade your access privileges. If you have a team of people collaborating on a single dictionary, it\'s a good idea that only one of them has access to the configuration interface.\n      If you want to give the new user a view-only access (relevant only for private dictionaries), then add them without selecting any of the above options. Again, don\'t forget to click the <em>Save</em> button afterwards.</p><p><img alt="Screenshot" src="/docs/03-03.png" width="90%"/></p><p>Once you\'ve saved the user list, any users on that list will have access to your dictionary – provided they have a Lexonomy account. The next time they log in, they will see the dictionary listed under <em>Your dictionaries</em> on the Lexonomy homepage.</p><h3>Entry settings</h3><h4>Entry structure</h4><p>Another thing you have control over in the configuration interface is the structure of entries: what elements are allowed to be there, what content is supposed to be inside them and so on. You\'ll find all that under <em>Entry structure</em> in the <em>Configure</em> section.</p><p><img alt="Screenshot" src="/docs/04-01.png" width="90%"/></p><p>You may get the impresion that this part of Lexonomy is overwhelmingly complex. Don\'t let that bother you, it\'s not for beginners. If you have started your dictionary from a template, everything here has already been set up for you and you don\'t need to come near it. If, on the other hand, you have worked with XML Schemas or DTDs (= Documents Type Definitions) or similar things before, you will find this familiar: Lexonomy\'s formalism for specifying the structure of entries is about as expressive as a DTD.</p><p>One last warning before we move on. At the beginning of your project when the dictionary is empty, you can change the entry structure as much as you want. Later on, though, once you\'ve created some entries, you need to tread carefully. Don\'t make changes that would disturb entries you\'ve created already. For example, do not rename elements that are already in use in the entries, and do not change the hierarchy of parent and child elements. That would cause your existing entries to become "invalid" (there will be warning triangles everywhere) and you will have to correct them manually one by one. The rule of thumb is, do add but do not take away.</p><h4>Subentries</h4><p>Lexonomy provides the option of subentries. That is, while defining the entry schema, you can designate certain sections of the XML tree, for example phraseological subentries, to be ‘shareable’, turning them into snippets of XML which are allowed to appear in several entries simultaneously. All the elements you list here will be treated as subentries by Lexonomy, and you will be able to share them among several entries. Shareable subentries have a shaded background in the editing interface and are followed by a button which tells you how\n      many other entries, besides this one, share this subentry.</p><h4>Headwords</h4><p>This section allows you to configure the headword list and its display. You can select the element which contains the entry\'s headword. If you make no selection here Lexonomy will try to guess what the headword of each entry is. You can also adjust the order of the headwords in the entry list by specifying the element that should be used for sorting, e.g. part of speech and you can hard-code the alphabetical order that should be used for sorting.</p><p>In this section you can also specify any elements whose content you want be displayed beside the headword in the entry list, such as homograph numbers or part-of-speech labels.</p><h4>Flags</h4><p>In this section, you can set different flags (coloured circles) to each entry in order to be able to easily monitor its status. This can then be used to control the workflow in your project. To be able to use this function, each entry needs to have a specific element containing one of the values you have selected for your workflow. For example, let\'s say you have three stages:</p><ol><li>automatic entries not yet checked by lexicographers: status = AE (automatic entry)</li><li>entries checked by a lexicographer: status = L (lexicographer)</li><li>entries confirmed by the editor: status = C (complete)</li></ol><p>Each entry needs to have an element, let\'s say <code>&lt;status&gt;</code>, into which one of these values is put. Then, you need to select that element in the Flags section, and enter the value and (optionally) explanatory label, and choose the colour for each status type. This information is then visualised in the form of a coloured circle next to each headword. By clicking on the circle, you can see the label of the status (if provided), and change the status of the entry.</p><p><img alt="screenshot" src="/docs/ConfigFlags1.png" width="90%"/></p><p><img alt="screenshot" src="/docs/ConfigFlags2.png" width="90%"/></p><h4>Search</h4><p>The search section allows you to specify searchable elements. The contents of elements you select here will be searchable (in addition to each entry\'s headword) in the search box on top of the headword list on the editing screen.</p><h3>Publishing</h3><h4>Entry formatting</h4><p>This is where you tell Lexonomy what your entries should look like to the end-user: which parts should be in which font and so on. If you have worked with CSS (Cascading Stylesheets) or XSL (Extensible Stylesheet Language) before, you will be at home here. If not, leave the worrying to us and start your dictionary from a template.</p><p><img alt="Screenshot" src="/docs/04-02.png" width="90%"/></p><h4>Public access</h4><p>Lexonomy is not just a tool for writing dictionaries, it is a tool for making dictionaries publicly available on the web too. Doing that is almost effortless, you just need to change a few things in the configuration: go into <em>Public access</em> and change the access level from <em>Private</em> to <em>Public</em>.</p><p><img alt="Screenshot" src="/docs/05-01.png" width="90%"/></p><p>From the moment you click the <em>Save</em> button, your dictionary will be publicly viewable.</p><p><img alt="Screenshot" src="/docs/05-02.png" width="90%"/></p><p>When you visit the dictionary\'s homepage now, you will notice that it has changed: it now contains a searchbox and a few other things that allow people to search and browse the dictionary.</p><p><img alt="Screenshot" src="/docs/05-03.png" width="90%"/></p><p>You can of course change the dictionary back to <em>Private</em> any time. One thing you need to be aware of is that when making a dictionary public, you\'re making it available under an open-source licence. The exact type of licence is up to you and can be selected in <em>Public access</em> in the <em>Configure</em> section, as you\'ve probably noticed. All the options available there are open-source licences which allow other people to reuse your data freely, without the restrictions of copyright (the only thing they are legally required to do is acknowledge you publicly as the author of the data).</p><h3>External data sources</h3><p>Your Lexonomy dictionary can be paired up with <a href="https://www.sketchengine.co.uk/">Sketch Engine</a>, a popular corpus query system. Lexonomy has a feature which allows you to "pull" example sentences and other things from a Sketch Engine corpus and, vice versa, Sketch Engine has a feature that allows you to "push" an entire pre-generated dictionary into Lexonomy (and then post-edit it there).</p><h4>Sketch Engine connection</h4><p>In this section you will find options for configuring your connection with the Sketch Engine. Sketch Engine URL, Sketch Engine API URL and Corpus name are mandatory fields, others are optional.</p><h4>Examples</h4><p>Here you configure the pulling of example sentences from Sketch Engine. You need to select the element in which every example will be wrapped, then provide an XML template for every example that will be inserted into your entries, and select the element that marks the headword in the entries, if relevant.</p><p><img alt="screenshot" src="/docs/ConfigExampleSkE.png" width="90%"/></p><h4>Collocations</h4><p>Here you configure the pulling of collocations from Sketch Engine. You need to select the element in which every collocation will be wrapped, then provide an XML template for every collocation that will be inserted into your entries.</p><p><img alt="screenshot" src="/docs/ConfigCollocationSkE.png" width="90%"/></p><h4>Thesaurus items</h4><p>Here you configure the pulling of thesaurus items from Sketch Engine. You need to select the element in which every thesaurus item will be wrapped, then provide an XML template for every thesaurus item that will be inserted into your entries.</p><p><img alt="screenshot" src="/docs/ConfigThesaurusSkE.png" width="90%"/></p><h4>Definitions</h4><p>Here you configure the pulling of definitions from Sketch Engine. You need to select the element in which every definition will be wrapped, then provide an XML template for every definition that will be inserted into your entries.</p><p><img alt="screenshot" src="/docs/ConfigDefinitionSkE.png" width="90%"/></p><h2>Download</h2><p>Lexonomy offers the ability to download your entire dictionary (under the <em>Download</em> link). It is a good idea to this regularly, as a form of backup. If for any reason the server failed and your data got lost, you would be able to recover everything from your latest download. Do bear in mind that Lexonomy doesn\'t provide any guarantees and we do not make any backups on the server, so it is up to you to take care of that.</p><h2>Upload</h2><p>Another interesting feature is the ability to upload existing data into Lexonomy instead of creating all entries by hand. This is available under the <em>Upload</em> link. It is an advanced feature, though, and you would be well advised to shy away from it unless you know exactly what you\'re doing. The data you\'re uploading must be in XML and must comply exactly with the entry structure as specified in your configuration or you must upload your own XML schema as well. If you tick the box <em>purge before upload</em> all data which is currently in your dictionary will first be permanently erased and removed from your dictionary.</p><h2>Conclusion</h2><p>This brings us to the end of this introduction. You can read more about Lexonomy in the paper <a href="/docs/elex2017.pdf">Introducing Lexonomy: an open-source dictionary writing and publishing system</a>.</p></div>',[]),name:"docs-intro"}),S=i;{var oa=document.getElementById("root"),la=void 0;let{slots:t,attributes:a,parentScope:n}=(N=void 0)===N?{}:N;(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.reduce((e,t)=>function(){return e(t(...arguments))})})(e=>e.mount(oa,n),e=>e({props:la,slots:t,attributes:a}),k)(S)}}();
